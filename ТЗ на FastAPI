
–ß–∞—Å—Ç—å 1/20 ‚Äî –ë–æ—Ç-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç-–ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç (AI Bot)
–¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É SmartSell –±–æ—Ç–∞-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–º–æ–∂–µ—Ç:
‚Ä¢	–°–æ–±–∏—Ä–∞—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥ (–≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã).
‚Ä¢	–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥ (backend –Ω–∞ FastAPI, frontend, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏).
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ.
‚Ä¢	–û–±—ä—è—Å–Ω—è—Ç—å –∫–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏.
‚Ä¢	–í–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
________________________________________
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
1.	–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —á–∞—Ç –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—ã –≤ –ø—Ä–æ—Å—Ç–æ–º –¥–∏–∞–ª–æ–≥–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –∞ –±–æ—Ç –ø–æ–Ω–∏–º–∞–µ—Ç –Ω–∞–º–µ—Ä–µ–Ω–∏—è –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∏—Ö –≤ –∑–∞–¥–∞—á–∏ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.
2.	–®–∞–±–ª–æ–Ω—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
–ü—Ä–∏–º–µ—Ä—ã –≥–æ—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
o	–¥–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –≤ –∫–∞—Ç–∞–ª–æ–≥;
o	–ø–æ–¥–∫–ª—é—á–∏—Ç—å –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ TipTop Pay;
o	–∏–∑–º–µ–Ω–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∫–Ω–æ–ø–∫–∏, –ø–æ–ª—è);
o	–Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É.
3.	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞.
o	–ë–æ—Ç —Å–æ–∑–¥–∞—ë—Ç –∫–æ–¥ –¥–ª—è FastAPI (–º–∞—Ä—à—Ä—É—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã, –º–æ–¥–µ–ª–∏), React/MUI (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ñ–æ—Ä–º—ã, —Å—Ç—Ä–∞–Ω–∏—Ü—ã).
o	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: Kaspi API, Cloudinary, Mobizon (OTP), TipTop Pay.
4.	–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–æ–¥–∞.
o	–ö–∞–∂–¥—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—á–∞—Å—Ç–æ–∫ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞–µ—Ç—Å—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –∏ –æ—Ç—á—ë—Ç–æ–º.
o	–û—Ç—á—ë—Ç –≤–∫–ª—é—á–∞–µ—Ç: —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ, –∑–∞—á–µ–º, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã, –∫–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å.
5.	–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏.
o	–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –≤ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥–µ.
o	–ü–µ—Ä–µ–¥ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º —Å–æ–∑–¥–∞—ë—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è (git-branch –∏–ª–∏ tag).
6.	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
o	–í—Å–µ –∫–ª—é—á–∏ –∏ –ø–∞—Ä–æ–ª–∏ —à–∏—Ñ—Ä—É—é—Ç—Å—è.
o	–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Å–µ–∫—Ä–µ—Ç–∞–º–∏.
o	–ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–º –ø—Ä–æ–µ–∫—Ç–∞.
________________________________________
–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
‚Ä¢	–ë–æ—Ç –≤—Å—Ç—Ä–æ–µ–Ω –ø—Ä—è–º–æ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å SmartSell.
‚Ä¢	–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ–∫–Ω–æ —á–∞—Ç–∞, –≥–¥–µ –±–æ—Ç –∑–∞–¥–∞—ë—Ç —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã:
¬´–ö–∞–∫—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å?¬ª, ¬´–ö—É–¥–∞ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –∫–Ω–æ–ø–∫—É?¬ª, ¬´–ù—É–∂–Ω–æ –ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î?¬ª.
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞
‚Ä¢	–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç AI-–º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥–æ—Ç–æ–≤—ã–π –∫–æ–¥.
‚Ä¢	–î–ª—è backend –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∫–æ–¥ –Ω–∞ FastAPI (endpoints –≤ app/routers, —Å–µ—Ä–≤–∏—Å—ã –≤ app/services).
‚Ä¢	–î–ª—è frontend —Å–æ–∑–¥–∞—é—Ç—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã React/MUI.
‚Ä¢	–ö–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞ (app + frontend).
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∏—à–µ—Ç unit-—Ç–µ—Å—Ç—ã (pytest –¥–ª—è FastAPI, React Testing Library –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞).
‚Ä¢	–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ø–ª–æ—è—Ç—Å—è –Ω–∞ staging (–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞).
‚Ä¢	–ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚Äî –±–æ—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ.
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
‚Ä¢	–ù–∏—á–µ–≥–æ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –±–µ–∑ —è–≤–Ω–æ–≥–æ –æ–¥–æ–±—Ä–µ–Ω–∏—è.
‚Ä¢	–ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∫—Ä–∞—Ç–∫–∏–π –æ—Ç—á—ë—Ç:
o	—á—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è;
o	–∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã;
o	–¥–ª—è —á–µ–≥–æ –Ω—É–∂–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è.
‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç:
o	–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ;
o	–æ—Ç–∫–ª–æ–Ω–∏—Ç—å –∏ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø—Ä–∞–≤–∫–∏;
o	–∑–∞–¥–∞—Ç—å —É—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã.
5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–í—Å–µ API-–∫–ª—é—á–∏ (Kaspi, TipTop Pay, Cloudinary, Mobizon) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
‚Ä¢	Webhooks –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ (–ø–æ provider_invoice_id).
‚Ä¢	–ü–µ—Ä–µ–¥ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–µ–ª–∞–µ—Ç—Å—è git-commit –∏ git-tag.
________________________________________
–ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞
1.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç –≤ —á–∞—Ç: ¬´–î–æ–±–∞–≤—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞¬ª.
2.	–ë–æ—Ç —É—Ç–æ—á–Ω—è–µ—Ç: ¬´–•–æ—Ç–∏—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ Cloudinary?¬ª ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç ¬´–î–∞¬ª.
3.	–ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥:
o	backend: –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç FastAPI POST /api/products/{id}/image;
o	—Å–µ—Ä–≤–∏—Å cloudinary_service.py –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏;
o	–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è Pydantic-—Å—Ö–µ–º–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ (image_url);
o	frontend: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å –∫–Ω–æ–ø–∫–æ–π ¬´–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ¬ª.
4.	–ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏—Ñ—Ñ: ¬´–î–æ–±–∞–≤–ª–µ–Ω—ã 3 —Ñ–∞–π–ª–∞, –∏–∑–º–µ–Ω—ë–Ω 1, –¥–æ–±–∞–≤–ª–µ–Ω–æ 50 —Å—Ç—Ä–æ–∫¬ª.
5.	–ë–æ—Ç –ø–∏—à–µ—Ç –æ—Ç—á—ë—Ç:
o	–§—É–Ω–∫—Ü–∏—è: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ;
o	–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Cloudinary;
o	–ó–∞—á–µ–º: —á—Ç–æ–±—ã –ø—Ä–æ–¥–∞–≤—Ü—ã –º–æ–≥–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è;
o	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Cloudinary, —Å—Å—ã–ª–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î.
6.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª.
7.	–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω–µ–¥—Ä—è—é—Ç—Å—è –≤ –æ—Å–Ω–æ–≤–Ω—É—é –≤–µ—Ç–∫—É.

–ß–∞—Å—Ç—å 2/20 ‚Äî –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ SmartSell
–¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å –æ–±–ª–∞—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É SmartSell –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–Ω–ª–∞–π–Ω-—Ç–æ—Ä–≥–æ–≤–ª–∏, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:
‚Ä¢	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏;
‚Ä¢	–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏ –∏ –ø–ª–∞—Ç—ë–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏;
‚Ä¢	–∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –æ—Ç—á—ë—Ç–Ω–æ—Å—Ç—å;
‚Ä¢	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏ –∏ —Ä–æ–ª—è–º–∏;
‚Ä¢	–≥–∏–±–∫–∏–π –±–∏–ª–ª–∏–Ω–≥ –∏ —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã;
‚Ä¢	–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Ä–∞—Å—Å—ã–ª–∫–∏.
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ SaaS-–º–æ–¥–µ–ª–∏ (–ø–æ–¥–ø–∏—Å–∫–∏), –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
________________________________________
–ú–æ–¥—É–ª–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
2.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚Ä¢	–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
‚Ä¢	–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ SMS-–∫–æ–¥ (OTP) –æ—Ç —Å–µ—Ä–≤–∏—Å–∞ Mobizon.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π ‚Äî —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ —Ö—ç—à–µ–π (bcrypt).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ (–ø–æ BIN/store_id).
‚Ä¢	JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è API:
o	access token (–∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏);
o	refresh token (–¥–æ–ª—å—à–µ, —Ö—Ä–∞–Ω–∏—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ).
________________________________________
2.2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤ (CRUD).
‚Ä¢	–ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ Excel (xlsx).
‚Ä¢	–§–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Cloudinary.
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–º–ø–∏–Ω–≥ —Ü–µ–Ω ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω—ã –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ ¬´–º–∏–Ω–∏–º—É–º‚Äì–º–∞–∫—Å–∏–º—É–º¬ª –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–µ–¥–∑–∞–∫–∞–∑–æ–≤ (–¥–æ 30 –¥–Ω–µ–π).
‚Ä¢	–ò—Å–∫–ª—é—á–µ–Ω–∏–µ ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤¬ª –∏–∑ –¥–µ–º–ø–∏–Ω–≥–∞ (—á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω–∫—É—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –Ω–∏–º–∏).
________________________________________
2.3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏
‚Ä¢	–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–∫–∞–∑–æ–≤ —Å Kaspi API.
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –≤ SmartSell.
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω, –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ, –≤—ã–ø–æ–ª–Ω–µ–Ω, –æ—Ç–º–µ–Ω—ë–Ω).
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –≤ —Ñ–æ—Ä–º–∞—Ç–µ PDF.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –≤ –æ–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç.
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ WhatsApp –∏–ª–∏ Email.
________________________________________
2.4. –°–∫–ª–∞–¥—ã –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–æ–≤: –∞–¥—Ä–µ—Å, –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã.
‚Ä¢	–ü—Ä–∏–≤—è–∑–∫–∞ –æ—Å—Ç–∞—Ç–∫–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤ –∫ —Å–∫–ª–∞–¥–∞–º.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏.
‚Ä¢	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–≥–∏–∫–æ–π Kaspi (—Å–∞–º–æ–≤—ã–≤–æ–∑, –æ—Ç–≥—Ä—É–∑–∫–∞ —Å–æ —Å–∫–ª–∞–¥–∞).
‚Ä¢	–û—Ç—á—ë—Ç –ø–æ –æ—Å—Ç–∞—Ç–∫–∞–º (—Å—É–º–º–∞—Ä–Ω—ã–π –∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Å–∫–ª–∞–¥—É).
________________________________________
2.5. –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ —Ä–æ–ª–∏
‚Ä¢	–î–≤–∞ —É—Ä–æ–≤–Ω—è: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏.
‚Ä¢	–£ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –≥–∏–±–∫–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
o	—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω;
o	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏;
o	—Ä–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏;
o	–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
‚Ä¢	–í–µ–¥–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤: –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–∑–Ω–∞—á–∞—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ (–≥–∞–ª–æ—á–∫–∞–º–∏).
________________________________________
2.6. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
‚Ä¢	–ì—Ä–∞—Ñ–∏–∫–∏: –ø—Ä–æ–¥–∞–∂–∏, –≤—ã—Ä—É—á–∫–∞, –æ—Å—Ç–∞—Ç–∫–∏.
‚Ä¢	–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤:
o	–Ω–æ–≤—ã–π;
o	–ø–æ—Å—Ç–æ—è–Ω–Ω—ã–π;
o	VIP.
‚Ä¢	–û—Ç—á—ë—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ç–æ–≤–∞—Ä–∞–º (—Ç–æ–ø-–ø—Ä–æ–¥–∞–∂–∏).
‚Ä¢	–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ Excel –∏–ª–∏ PDF.
________________________________________
2.7. –ë–∏–ª–ª–∏–Ω–≥ –∏ —Ç–∞—Ä–∏—Ñ—ã
‚Ä¢	–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã:
o	Start (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª);
o	Pro (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª);
o	Business (–≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ).
‚Ä¢	–û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞ —á–µ—Ä–µ–∑ TipTop Pay.
‚Ä¢	–°–∫–∏–¥–∫–∏ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞ 3, 6 –∏–ª–∏ 12 –º–µ—Å—è—Ü–µ–≤.
‚Ä¢	–ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞).
‚Ä¢	–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∞—Ä–∏—Ñ–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–ª–∏ —Ä–∞—Å—Å—ã–ª–æ–∫).
________________________________________
2.8. –†–∞—Å—Å—ã–ª–∫–∏
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ —á–µ—Ä–µ–∑:
o	WhatsApp (–±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç);
o	Email;
o	Telegram.
‚Ä¢	–õ–∏–º–∏—Ç –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É: –¥–æ 800 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –±–∞–∑—ã: —Ä–∞—Å—Å—ã–ª–∫–∞ —Ç–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ –∫–ª–∏–µ–Ω—Ç–æ–≤.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å —à–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞:
o	—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ 22:00‚Äì08:00;
o	–≤—Ä–µ–º—è —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (–æ—Ç 1 –º–∏–Ω—É—Ç—ã –¥–æ 12 —á–∞—Å–æ–≤).
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å—Å—ã–ª–æ–∫, —É—á—ë—Ç –æ—à–∏–±–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏.
________________________________________
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏
‚Ä¢	–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –≤–Ω—É—Ç—Ä–∏ app/ (FastAPI routers).
‚Ä¢	–ú–æ–¥—É–ª–∏ —Å–≤—è–∑–∞–Ω—ã —á–µ—Ä–µ–∑ –æ–±—â—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (PostgreSQL).
‚Ä¢	–í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ REST API.
‚Ä¢	–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤ –±—É–¥—É—â–µ–º –≤—ã–Ω–µ—Å—Ç–∏ –º–æ–¥—É–ª–∏ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã.

–ß–∞—Å—Ç—å 3/20 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç—ë–∂–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã TipTop Pay
–¶–µ–ª—å
–û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã SmartSell –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏—ë–º–∞ –æ–Ω–ª–∞–π–Ω-–ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ TipTop Pay, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π:
‚Ä¢	–ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫–∞—Ä—Ç–∞–º –∏ –∫–æ—à–µ–ª—å–∫–∞–º;
‚Ä¢	–≤–æ–∑–≤—Ä–∞—Ç–æ–≤ –∏ –æ—Ç–º–µ–Ω;
‚Ä¢	–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ–∫–æ–≤;
‚Ä¢	—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å—Ç–∞—Ç—É—Å–µ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ webhook;
‚Ä¢	–±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è API-–∫–ª—é—á–µ–π.
________________________________________
–û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏
1.	–í—Å—Ç—Ä–æ–∏—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã–π –≤–∏–¥–∂–µ—Ç TipTop Pay –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã –∑–∞–∫–∞–∑–∞).
2.	–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è:
o	—Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞;
o	–∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞;
o	–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è/–æ—Ç–º–µ–Ω—ã/–≤–æ–∑–≤—Ä–∞—Ç–∞;
o	–ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
3.	–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å webhooks –æ—Ç TipTop Pay –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ –≤ SmartSell.
4.	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏—Å–∫–∞–ª—å–Ω—ã–µ —á–µ–∫–∏ (—á–µ—Ä–µ–∑ API TipTop Pay).
5.	–®–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏ —Ö—Ä–∞–Ω–∏—Ç—å –∫–ª—é—á–∏ API —Ç–æ–ª—å–∫–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ.
________________________________________
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
‚Ä¢	–§–æ—Ä–º–∞ –æ–ø–ª–∞—Ç—ã —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞.
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –≤–∏–¥–∂–µ—Ç TipTop Pay, –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã–π —á–µ—Ä–µ–∑ JavaScript SDK.
‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã ‚Üí –¥–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –≤ TipTop Pay.
‚Ä¢	SmartSell –ø–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—É—Å–ø–µ—à–Ω–æ/–æ—à–∏–±–∫–∞), –Ω–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç.
________________________________________
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞ backend (FastAPI)
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (app/core/config.py)
TIPTOP_API_URL = "https://api.tippay.kz"
TIPTOP_API_KEY = os.getenv("TIPTOP_API_KEY")
TIPTOP_API_SECRET = os.getenv("TIPTOP_API_SECRET")
–ü—Ä–∏–º–µ—Ä —Å–µ—Ä–≤–∏—Å–∞ (app/services/tiptop.py)
import httpx
from app.core.config import TIPTOP_API_URL, TIPTOP_API_KEY, TIPTOP_API_SECRET

async def create_payment(order_id: int, amount: float, currency="KZT"):
    async with httpx.AsyncClient() as client:
        response = await client.post(
            f"{TIPTOP_API_URL}/payments",
            headers={"Authorization": f"Bearer {TIPTOP_API_KEY}"},
            json={
                "order_id": order_id,
                "amount": amount,
                "currency": currency,
                "callback_url": "https://smartsell.kz/api/webhooks/tiptop"
            }
        )
        return response.json()
________________________________________
Webhooks
‚Ä¢	–¢–æ—á–∫–∞ –ø—Ä–∏—ë–º–∞: POST /api/webhooks/tiptop
‚Ä¢	–°–æ–±—ã—Ç–∏—è:
o	payment_success ‚Äî –∑–∞–∫–∞–∑ –ø–æ–º–µ—á–∞–µ—Ç—Å—è –∫–∞–∫ –æ–ø–ª–∞—á–µ–Ω–Ω—ã–π;
o	payment_fail ‚Äî –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è –∏–ª–∏ –æ–∂–∏–¥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø–ª–∞—Ç—ã;
o	payment_refund ‚Äî –≤ –∑–∞–∫–∞–∑–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å ¬´–≤–æ–∑–≤—Ä–∞—Ç¬ª.
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
o	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ —Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É –∫–ª—é—á—É.
o	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ webhook-–≤—ã–∑–æ–≤–∞.
o	–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: –µ—Å–ª–∏ –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–∏—à–ª–æ –¥–≤–∞–∂–¥—ã ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑.
________________________________________
–§–∏—Å–∫–∞–ª—å–Ω—ã–µ —á–µ–∫–∏
‚Ä¢	–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —á–µ–∫.
‚Ä¢	–î–∞–Ω–Ω—ã–µ —á–µ–∫–∞ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ TipTop Pay –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
‚Ä¢	–ß–µ–∫ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö SmartSell —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∑–∞–∫–∞–∑—É.
‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–∫–∞—á–∞—Ç—å —á–µ–∫ –≤ PDF.
________________________________________
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚Ä¢	–í—Å–µ API-–∫–ª—é—á–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã TipTop Pay —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ .env –∏–ª–∏ –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–µ–∫—Ä–µ—Ç–æ–≤.
‚Ä¢	–ü–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∫–ª—é—á–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ pydantic.BaseSettings.
‚Ä¢	–î–æ—Å—Ç—É–ø –∫ –∫–ª—é—á–∞–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–æ–º.
‚Ä¢	–û—à–∏–±–∫–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–∫–∞—Ä—Ç—ã, CVV) –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
________________________________________
–°—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç—ã
1.	–ö–ª–∏–µ–Ω—Ç –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑ –≤ SmartSell.
2.	–ù–∞–∂–∏–º–∞–µ—Ç ¬´–û–ø–ª–∞—Ç–∏—Ç—å¬ª ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤–∏–¥–∂–µ—Ç TipTop Pay.
3.	–í–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã.
4.	TipTop Pay –ø—Ä–æ–≤–æ–¥–∏—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –Ω–∞ SmartSell.
5.	SmartSell –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞: ¬´–û–ø–ª–∞—á–µ–Ω¬ª –∏–ª–∏ ¬´–û—à–∏–±–∫–∞¬ª.
6.	–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —á–µ–∫.
7.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (WhatsApp/Email/Telegram).

–ß–∞—Å—Ç—å 4/20 ‚Äî –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (—Å—Ç–µ–∫ –∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è)
4.1. Frontend
–§—Ä–µ–π–º–≤–æ—Ä–∫: React (SPA)
UI-–±–∏–±–ª–∏–æ—Ç–µ–∫–∞: Material UI (MUI)
–ì—Ä–∞—Ñ–∏–∫–∏: Recharts –∏–ª–∏ Chart.js (react-chartjs-2)
–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è: React Router
–°–æ—Å—Ç–æ—è–Ω–∏–µ: Context API / Redux Toolkit (–ø–æ –º–∞—Å—à—Ç–∞–±—É)
HTTP-–∫–ª–∏–µ–Ω—Ç: axios (—Å –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–∞–º–∏ –¥–ª—è JWT)
–°–±–æ—Ä–∫–∞: Vite (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) –∏–ª–∏ CRA (–µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
i18n (–æ–ø—Ü.): react-i18next
–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–∞–∫—Ç–∏–∫–∏:
‚Ä¢	–ï–¥–∏–Ω—ã–π axios-–∏–Ω—Å—Ç–∞–Ω—Å —Å –±–∞–∑–æ–≤—ã–º baseURL=/api –∏ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–æ–º, –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–º Authorization: Bearer <token> –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (localStorage –ª–∏–±–æ –∑–∞—â–∏—â—ë–Ω–Ω–∞—è cookie; –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è HttpOnly cookie + SameSite).
‚Ä¢	UI –≤ MUI: —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞, —Ç–∞–±–ª–∏—Ü—ã (DataGrid), Dialog/Drawer –¥–ª—è –º–æ–¥–∞–ª—å–Ω—ã—Ö —Ñ–æ—Ä–º, Snackbar –¥–ª—è –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π, Skeleton –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏.
‚Ä¢	–ú–∞—Ä—à—Ä—É—Ç—ã: –ø—É–±–ª–∏—á–Ω—ã–µ (/login) –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ (/products, /orders, /analytics, /settings). –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∑–∞—â–∏—â–∞—Ç—å HOC/–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º <PrivateRoute> (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞/—Ä–æ–ª–∏).
‚Ä¢	–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º: React Hook Form + Zod/Yup; –º–∞—Å–∫–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, react-input-mask).
‚Ä¢	–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: –≤–∏–¥–∂–µ—Ç Cloudinary (direct upload) –∏–ª–∏ POST –Ω–∞ –Ω–∞—à API —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ Cloudinary —Å–µ—Ä–≤–∏—Å–æ–º (—Å–º. –±—ç–∫–µ–Ω–¥).
________________________________________
4.2. Backend
–§—Ä–µ–π–º–≤–æ—Ä–∫: FastAPI (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, uvicorn/gunicorn+uvicornworkers)
–Ø–∑—ã–∫: Python 3.11+
ORM: SQLAlchemy 2.x (+ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π)
–°—Ö–µ–º—ã/–≤–∞–ª–∏–¥–∞—Ü–∏—è: Pydantic v2
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: JWT (python-jose –∏–ª–∏ fastapi-jwt-auth), OTP-–≤—Ö–æ–¥ —á–µ—Ä–µ–∑ Mobizon
HTTP-–∫–ª–∏–µ–Ω—Ç: httpx (async) –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
–¢–∞—Å–∫-–æ—á–µ—Ä–µ–¥—å (–æ–ø—Ü.): RQ/Celery/Arq (–¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫, —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–æ–ø—Ü.): APScheduler (–ø—É–ª–ª–∏–Ω–≥ Kaspi, —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏)
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ app/:
app/
  main.py                # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
  core/                  # –∫–æ–Ω—Ñ–∏–≥, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, deps, init –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    config.py
    security.py
    logging.py
  models/                # SQLAlchemy –º–æ–¥–µ–ª–∏
  schemas/               # Pydantic (request/response DTO)
  routers/               # —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã: auth, products, orders, payments, analytics, ...
  services/              # –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (kaspi, tiptop, cloudinary, mobizon)
  repositories/          # —Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (–æ–ø—Ü.)
  utils/                 # —É—Ç–∏–ª–∏—Ç—ã (OTP, PDF, Excel, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, ...)
  workers/               # —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞–Ω–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ FastAPI:
‚Ä¢	–ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–∞—è OpenAPI-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (/docs, /redoc) –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤.
‚Ä¢	Depends(...) –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Å–µ—Å—Å–∏–∏ –ë–î, —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ä–æ–ª–µ–π).
‚Ä¢	–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (async def) –∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (httpx).
–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–±—ç–∫–µ–Ω–¥):
‚Ä¢	JWT —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º TTL, refresh-–º–µ—Ö–∞–Ω–∏–∑–º –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
‚Ä¢	–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (re-OTP) –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –∫–ª—é—á–µ–π, —ç–∫—Å–ø–æ—Ä—Ç –º–∞—Å—Å–∏–≤–æ–≤ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
‚Ä¢	Rate limiting –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö (/auth/*, /payments/*, webhooks) ‚Äî —á–µ—Ä–µ–∑ middleware/–ø—Ä–æ–∫—Å–∏/Nginx + Redis-—Å—á—ë—Ç—á–∏–∫–∏.
‚Ä¢	CORS –ø–æ allowlist –¥–æ–º–µ–Ω–æ–≤.
________________________________________
4.3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
–°–£–ë–î: PostgreSQL
–ú–∏–≥—Ä–∞—Ü–∏–∏: Alembic (–≤–µ—Ä—Å–∏–∏, –æ—Ç–∫–∞—Ç—ã)
–ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚Ä¢	–ë–∞–∑–æ–≤—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏: User, Company/Store (–µ—Å–ª–∏ –º—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–∞—è –º–æ–¥–µ–ª—å), Product, Order, OrderItem, Warehouse, ProductStock, Payment, Campaign (—Ä–∞—Å—Å—ã–ª–∫–∏), AuditLog.
‚Ä¢	–°–≤—è–∑–∏: Order 1‚Äî* OrderItem, Product 1‚Äî* OrderItem, Product *‚Äî* Warehouse —á–µ—Ä–µ–∑ ProductStock.
‚Ä¢	–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ —á–∞—Å—Ç—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º (–¥–∞—Ç—ã, —Å—Ç–∞—Ç—É—Å, SKU, phone, external_id).
‚Ä¢	–ñ—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ (AuditLog): –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –¥–µ–π—Å—Ç–≤–∏–µ, —Å—É—â–Ω–æ—Å—Ç—å, –¥–æ/–ø–æ—Å–ª–µ, –≤—Ä–µ–º—è.
–ü—Ä–∞–∫—Ç–∏–∫–∏:
‚Ä¢	–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤: —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ + —Å–ø–∏—Å–∞–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ + –∑–∞–ø–∏—Å—å –ø–ª–∞—Ç–µ–∂–∞ ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–µ.
‚Ä¢	–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π –∏ webhooks (provider_invoice_id, event_id).
‚Ä¢	–û—Ç–¥–µ–ª—å–Ω—ã–µ read-replicas (–æ–ø—Ü.) –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫–∏.
________________________________________
4.4. –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–µ–ø–ª–æ–π
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: Docker –¥–ª—è app (FastAPI), frontend, postgres
–ó–∞–ø—É—Å–∫ (dev/staging/prod): Docker Compose (—Å—Ç–∞—Ä—Ç) / Kubernetes (–º–∞—Å—à—Ç–∞–±)
WSGI/ASGI: uvicorn standalone –∏–ª–∏ gunicorn + uvicorn.workers.UvicornWorker
–û–±—Ä–∞—Ç–Ω—ã–π –ø—Ä–æ–∫—Å–∏: Nginx/Caddy (TLS, gzip, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏, –ª–∏–º–∏—Ç—ã)
TLS: Let‚Äôs Encrypt/ACM
–°–µ–∫—Ä–µ—Ç—ã: –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è / Secret Manager (–Ω–∏–∫–∞–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏)
–ü—Ä–∏–º–µ—Ä docker-compose.yml (—É–∫—Ä—É–ø–Ω—ë–Ω–Ω–æ):
version: "3.9"
services:
  db:
    image: postgres:16
    environment:
      POSTGRES_DB: smartsell
      POSTGRES_USER: smartsell
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
    volumes: [ "pgdata:/var/lib/postgresql/data" ]
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U smartsell -d smartsell"]
      interval: 10s
      timeout: 5s
      retries: 5

  app:
    build: ./app
    environment:
      DATABASE_URL: postgresql+psycopg://smartsell:${POSTGRES_PASSWORD}@db:5432/smartsell
      SECRET_KEY: ${SECRET_KEY}
      MOBIZON_API_KEY: ${MOBIZON_API_KEY}
      CLOUDINARY_URL: ${CLOUDINARY_URL}
      TIPTOP_API_KEY: ${TIPTOP_API_KEY}
      TIPTOP_API_SECRET: ${TIPTOP_API_SECRET}
    depends_on: [ db ]
    ports: [ "8000:8000" ]
    command: >
      uvicorn app.main:app
      --host 0.0.0.0 --port 8000
      --proxy-headers --forwarded-allow-ips='*'

  frontend:
    build: ./frontend
    ports: [ "3000:80" ]
    depends_on: [ app ]

volumes:
  pgdata:
________________________________________
4.5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã)
4.5.1. Kaspi API
‚Ä¢	–ü—É–ª–ª–∏–Ω–≥ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –ø–æ –æ–∫–Ω–∞–º –≤—Ä–µ–º–µ–Ω–∏/—Å—Ç–∞—Ç—É—Å—É.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML/CSV-—Ñ–∏–¥–∞ –∫–∞—Ç–∞–ª–æ–≥–∞; —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –ø–æ –ø—É–±–ª–∏—á–Ω–æ–º—É URL –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º.
‚Ä¢	–¢–∞–π–º–∞—É—Ç—ã, —Ä–µ—Ç—Ä–∞–∏, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤, –º–µ—Ç—Ä–∏–∫–∏.
4.5.2. TipTop Pay
‚Ä¢	–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞ (create), –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞/–≤–æ–∑–≤—Ä–∞—Ç, —Å—Ç–∞—Ç—É—Å.
‚Ä¢	–ü—Ä–∏—ë–º webhook (–ø–æ–¥–ø–∏—Å—å/—Å–µ–∫—Ä–µ—Ç, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å).
‚Ä¢	–ê–≤—Ç–æ-—Ñ–∏—Å–∫–∞–ª–∏–∑–∞—Ü–∏—è —á–µ–∫–æ–≤ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ), —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –Ω–∞ —á–µ–∫–∏.
4.5.3. Cloudinary
‚Ä¢	Direct upload (–≤–∏–¥–∂–µ—Ç) –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∞–ø–ª–æ–∞–¥.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ secure_url –∏ public_id; —É–¥–∞–ª–µ–Ω–∏—è/—Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ API.
4.5.4. Mobizon (OTP)
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∫–æ–¥–æ–≤, TTL 300 —Å–µ–∫.
‚Ä¢	–ê–Ω—Ç–∏—Å–ø–∞–º/Rate-limit –ø–æ –Ω–æ–º–µ—Ä—É/IP, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–æ–∫.
4.5.5. –ü–æ—á—Ç–∞/–º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã
‚Ä¢	Email (SMTP/SendGrid), WhatsApp/Telegram –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
‚Ä¢	–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á –∏ –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º (–æ–∫–Ω–æ 22:00‚Äì08:00, —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–µ).
________________________________________
4.6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è
‚Ä¢	–ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è API-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: FastAPI /docs (Swagger UI) –∏ /redoc.
‚Ä¢	–°—Ç–∏–ª—å –∫–æ–¥–∞: ruff/flake8 + black (—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ), isort.
‚Ä¢	–ö–æ–º–º–∏—Ç—ã: Conventional Commits; —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –≤–µ—Ä—Å–∏–∏ –¥–ª—è —Ä–µ–ª–∏–∑–æ–≤.
‚Ä¢	–î–∏–∞–≥—Ä–∞–º–º—ã: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞/ERD –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (/docs/).
________________________________________
4.7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∫–∞—á–µ—Å—Ç–≤–æ
‚Ä¢	Unit/Integration tests: pytest, httpx.AsyncClient –¥–ª—è API.
‚Ä¢	–ü–æ–∫—Ä—ã—Ç–∏–µ: –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥—É–ª–∏ ‚Äî auth, payments/webhooks, orders, products import.
‚Ä¢	E2E (–æ–ø—Ü.): Playwright/Cypress –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
‚Ä¢	–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑: mypy (–ø–æ –º–µ—Ä–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ç–∞–π–ø–∏–Ω–≥–æ–≤), ruff.
________________________________________
4.8. CI/CD
CI (GitHub Actions):
‚Ä¢	–õ–∏–Ω—Ç–µ—Ä—ã/—Ç–∏–ø—ã ‚Üí —Ç–µ—Å—Ç—ã ‚Üí —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–æ–≤ ‚Üí –ø—É—à –≤ registry.
‚Ä¢	–ü—Ä–æ–≥–æ–Ω –º–∏–≥—Ä–∞—Ü–∏–π Alembic –Ω–∞ staging.
‚Ä¢	–ü—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–µ smoke-—Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è.
CD:
‚Ä¢	Staging —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
‚Ä¢	–†—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (manual approval) –Ω–∞ –ø—Ä–æ–¥.
‚Ä¢	Git-—Ç–µ–≥–∏ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º; –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞.
________________________________________
4.9. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
‚Ä¢	–õ–æ–≥–∏: JSON-—Ñ–æ—Ä–º–∞—Ç, —É—Ä–æ–≤–Ω–∏ INFO/ERROR/AUDIT (–∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤).
‚Ä¢	–ú–µ—Ç—Ä–∏–∫–∏: Prometheus (RPS, latency p95/p99, –æ—à–∏–±–∫–∏, –æ—á–µ—Ä–µ–¥—å —Ä–∞—Å—Å—ã–ª–æ–∫, –ø—É–ª –ë–î).
‚Ä¢	–ê–ª–µ—Ä—Ç—ã: –Ω–∞–≥—Ä—É–∑–∫–∏ CPU/RAM, —Ä–æ—Å—Ç 5xx, –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –æ—á–µ—Ä–µ–¥–µ–π, –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è –≤–Ω–µ—à–Ω–∏—Ö API.
‚Ä¢	–ë—ç–∫–∞–ø—ã: –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Å–Ω–µ–ø—à–æ—Ç—ã –ë–î (—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ), —Ö—Ä–∞–Ω–µ–Ω–∏–µ 7‚Äì30 –¥–Ω–µ–π, —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è.
________________________________________
4.10. –ù–µ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (—Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏)
‚Ä¢	–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: —Ü–µ–ª–µ–≤–æ–π p95 < 300 –º—Å –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö API –ø—Ä–∏ –∑–∞—è–≤–ª–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ; –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–æ—Ä–∫–µ—Ä—ã –∏ —Ä–µ–ø–ª–∏–∫–∏ –ë–î.
‚Ä¢	–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, healthchecks, readiness/liveness-–ø—Ä–æ–±—ã.
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö, —Å—Ç—Ä–æ–≥–∏–µ CORS, –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤ webhook-–æ–≤.

–ß–∞—Å—Ç—å 5/20 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
5.1. –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ SmartSell –æ–±—è–∑–∞–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∑–∞—â–∏—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å:
‚Ä¢	–∑–∞—â–∏—Ç—É –æ—Ç —É—Ç–µ—á–µ–∫ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏;
‚Ä¢	–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –∞—Ç–∞–∫ (SQL Injection, XSS, CSRF, brute-force, replay-–∞—Ç–∞–∫–∏);
‚Ä¢	–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –∏ –∫–ª—é—á–µ–π;
‚Ä¢	–∑–∞—â–∏—Ç—É –∫–∞–Ω–∞–ª–æ–≤ —Å–≤—è–∑–∏ (TLS);
‚Ä¢	–≤–µ–¥–µ–Ω–∏–µ –∂—É—Ä–Ω–∞–ª–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∞—É–¥–∏—Ç–∞;
‚Ä¢	–æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
________________________________________
5.2. –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –∏ —Å–µ–∫—Ä–µ—Ç–æ–≤
‚Ä¢	–í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –≤–∏–¥–µ —Ö—ç—à–µ–π:
o	–∞–ª–≥–æ—Ä–∏—Ç–º: bcrypt (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è cost=12+) –∏–ª–∏ argon2id;
o	—Å–æ–ª–∏ —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä–æ–ª—è;
o	–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è.
‚Ä¢	API-–∫–ª—é—á–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã (Kaspi, TipTop Pay, Cloudinary, Mobizon):
o	—Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ .env –∏–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–µ–∫—Ä–µ—Ç–æ–≤;
o	–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π;
o	–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Pydantic Settings (app/core/config.py).
‚Ä¢	–í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∫–ª—é—á–∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é Fernet AES256).
________________________________________
5.3. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è JWT-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
o	access token (–∂–∏–∑–Ω—å: 15‚Äì60 –º–∏–Ω);
o	refresh token (–∂–∏–∑–Ω—å: 7‚Äì30 –¥–Ω–µ–π).
‚Ä¢	–ü—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ OTP (Mobizon):
o	–∫–æ–¥ –¥–ª–∏–Ω–æ–π 6 —Ü–∏—Ñ—Ä, TTL = 5 –º–∏–Ω—É—Ç;
o	–Ω–µ –±–æ–ª–µ–µ 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è;
o	–∞–Ω—Ç–∏—Å–ø–∞–º: –Ω–µ –±–æ–ª–µ–µ 5 SMS/—á–∞—Å –¥–ª—è –æ–¥–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞, ‚â§10/–¥–µ–Ω—å/IP.
‚Ä¢	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
o	—Ä–æ–ª—å (admin, manager, analyst, storekeeper) –≤–∫–ª—é—á–µ–Ω–∞ –≤ payload JWT;
o	–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ Depends –≤ FastAPI.
________________________________________
5.4. –ó–∞—â–∏—Ç–∞ API
‚Ä¢	CORS: —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã (–±–µ–ª—ã–π —Å–ø–∏—Å–æ–∫).
‚Ä¢	Rate limiting: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/IP (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Redis –∏–ª–∏ Nginx).
‚Ä¢	–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
o	–≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Pydantic-—Å—Ö–µ–º—ã;
o	–∑–∞–ø—Ä–µ—Ç –Ω–∞ ¬´—Å—ã—Ä–æ–π SQL¬ª, —Ç–æ–ª—å–∫–æ ORM.
‚Ä¢	–ó–∞—â–∏—Ç–∞ –æ—Ç CSRF: –¥–ª—è API —Å cookies ‚Äî SameSite=Strict, HttpOnly, Secure.
‚Ä¢	–ó–∞—â–∏—Ç–∞ –æ—Ç XSS: —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞, Content-Security-Policy (CSP).
________________________________________
5.5. Webhooks (Kaspi, TipTop Pay)
‚Ä¢	–ö–∞–∂–¥—ã–π webhook –∏–º–µ–µ—Ç:
o	–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –ø–æ–¥–ø–∏—Å—å (HMAC) –∏–ª–∏ —Å–µ–∫—Ä–µ—Ç;
o	–ø—Ä–æ–≤–µ—Ä–∫—É –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏ –∑–∞–ø—Ä–æ—Å–∞ (TTL ‚â§ 5 –º–∏–Ω—É—Ç);
o	–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–∫–∞–∂–¥—ã–π provider_invoice_id –∏–ª–∏ event_id –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑).
‚Ä¢	–í —Å–ª—É—á–∞–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–∏ webhook ‚Äî –æ–ø–µ—Ä–∞—Ü–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è (–ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ ¬´duplicate¬ª).
________________________________________
5.6. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—É–¥–∏—Ç
‚Ä¢	–í–µ—Å—Ç–∏ –∂—É—Ä–Ω–∞–ª –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
o	–≤—Ö–æ–¥—ã/–≤—ã—Ö–æ–¥—ã;
o	—Å–æ–∑–¥–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤;
o	—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω;
o	—ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö;
o	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏.
‚Ä¢	–õ–æ–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ audit_log:
o	user_id;
o	action;
o	entity_type;
o	entity_id;
o	old_value;
o	new_value;
o	timestamp.
‚Ä¢	–°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ (–æ—à–∏–±–∫–∏, –ø–∞–¥–µ–Ω–∏—è, webhooks) –ø–∏—à—É—Ç—Å—è –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ (–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Prometheus + ELK/Graylog).
________________________________________
5.7. –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
‚Ä¢	–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î (PostgreSQL dump + —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ).
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤: –º–∏–Ω–∏–º—É–º 7‚Äì30 –¥–Ω–µ–π.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∑–∞—â–∏—â—ë–Ω–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, s3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π storage).
‚Ä¢	–†–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è (1 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é).
________________________________________
5.8. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π
–î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:
‚Ä¢	–ø–ª–∞—Ç–µ–∂–∏ (TipTop Pay) –∏ –∑–∞–∫–∞–∑—ã –∏–º–µ—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π idempotency_key;
‚Ä¢	–ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å —Ç–µ–º –∂–µ –∫–ª—é—á–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç;
‚Ä¢	—ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è:
o	–ø–ª–∞—Ç–µ–∂–µ–π;
o	webhooks;
o	–æ–ø–µ—Ä–∞—Ü–∏–π –∏–º–ø–æ—Ä—Ç–∞/—ç–∫—Å–ø–æ—Ä—Ç–∞;
o	—Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤.
________________________________________
5.9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚Ä¢	–í React-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:
o	—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –≤ HttpOnly cookies (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ);
o	Content Security Policy (CSP): —Ä–∞–∑—Ä–µ—à–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã;
o	–∑–∞—â–∏—Ç–∞ –æ—Ç XSS ‚Äî –≤—Å–µ –≤–≤–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ —ç–∫—Ä–∞–Ω–∏—Ä—É—é—Ç—Å—è;
o	–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ eval –∏ inline-—Å–∫—Ä–∏–ø—Ç–æ–≤.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–≤:
o	–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º;
o	–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ UI –∏ API.
________________________________________
5.10. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É
‚Ä¢	–°–æ–±–ª—é–¥–µ–Ω–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ó–∞–∫–æ–Ω –†–ö –æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö).
‚Ä¢	–í—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω—ã, –∑–∞–∫–∞–∑—ã) —Å—á–∏—Ç–∞—é—Ç—Å—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏ –ø–æ–¥–ª–µ–∂–∞—Ç –∑–∞—â–∏—Ç–µ.
‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
________________________________________
üëâ –≠—Ç–æ –±—ã–ª–∞ –ø–æ–ª–Ω–∞—è –ß–∞—Å—Ç—å 5/20 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å.
–î–∞–ª—å—à–µ –ø–æ–π–¥—ë—Ç –ß–∞—Å—Ç—å 6/20 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∑–∞–ø—É—Å–∫, CI/CD).
–•–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è —Å—Ä–∞–∑—É –≤—ã–¥–∞–ª –µ—ë?
–û—Ç–ª–∏—á–Ω–æ üëç –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º. –ù–∏–∂–µ –ø–æ–ª–Ω–∞—è –ß–∞—Å—Ç—å 6/20 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å —É—á—ë—Ç–æ–º –≤—Å–µ—Ö –∑–∞–º–µ–Ω (FastAPI, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ app/).
________________________________________
–ß–∞—Å—Ç—å 6/20 ‚Äî –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
6.1. –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ SmartSell —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
‚Ä¢	Frontend (React + MUI) ‚Äî SPA-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤.
‚Ä¢	Backend (FastAPI) ‚Äî REST API –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π.
‚Ä¢	–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö, —Ç–æ–≤–∞—Ä–∞—Ö, –∑–∞–∫–∞–∑–∞—Ö, –ø–ª–∞—Ç–µ–∂–∞—Ö.
‚Ä¢	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Äî –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (Kaspi API, Cloudinary, Mobizon, TipTop Pay).
‚Ä¢	–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Äî Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è, CI/CD —á–µ—Ä–µ–∑ GitHub Actions, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
________________________________________
6.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
SmartSell/
‚îú‚îÄ‚îÄ app/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.py            # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
‚îÇ   ‚îú‚îÄ‚îÄ core/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.py
‚îÇ   ‚îú‚îÄ‚îÄ models/            # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouse.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payment.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas/           # Pydantic-—Å—Ö–µ–º—ã (DTO)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ payment.py
‚îÇ   ‚îú‚îÄ‚îÄ routers/           # –ú–∞—Ä—à—Ä—É—Ç—ã FastAPI (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payments.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouses.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ analytics.py
‚îÇ   ‚îú‚îÄ‚îÄ services/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kaspi_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tiptop_service.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cloudinary_service.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ mobizon_service.py
‚îÇ   ‚îú‚îÄ‚îÄ utils/             # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ otp.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pdf.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ excel.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ idempotency.py
‚îÇ   ‚îî‚îÄ‚îÄ workers/           # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (—Ä–∞—Å—Å—ã–ª–∫–∏, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
‚îÇ       ‚îî‚îÄ‚îÄ tasks.py
‚îú‚îÄ‚îÄ frontend/              # React + MUI (SPA)
‚îú‚îÄ‚îÄ alembic/               # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
________________________________________
6.3. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
Backend (FastAPI)
–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ:
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
–ó–∞–ø—É—Å–∫ –≤ Docker:
docker-compose up --build
Frontend (React)
–ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ:
npm install
npm run dev
________________________________________
6.4. CI/CD (GitHub Actions)
‚Ä¢	–¢—Ä–∏–≥–≥–µ—Ä—ã:
o	push –≤ –≤–µ—Ç–∫–∏ main –∏ develop;
o	pull request;
o	—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (workflow_dispatch).
‚Ä¢	–®–∞–≥–∏:
1.	–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
2.	–ü—Ä–æ–≥–æ–Ω –ª–∏–Ω—Ç–µ—Ä–æ–≤ (black, ruff, isort).
3.	–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ (pytest, httpx.AsyncClient).
4.	–°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–æ–≤ (app, frontend).
5.	–ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ Docker Registry.
6.	–î–µ–ø–ª–æ–π –Ω–∞ staging-—Å–µ—Ä–≤–µ—Ä.
7.	Smoke-—Ç–µ—Å—Ç—ã.
8.	(–æ–ø—Ü.) —Ä—É—á–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ –ø—Ä–æ–¥.
________________________________________
6.5. –û–∫—Ä—É–∂–µ–Ω–∏—è
‚Ä¢	Dev (–ª–æ–∫–∞–ª—å–Ω–æ–µ):
o	.env.dev, –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î.
o	Uvicorn + reload.
o	Mock-–∫–ª—é—á–∏ API.
‚Ä¢	Staging:
o	–±–ª–∏–∑–∫–æ–µ –∫ –±–æ–µ–≤–æ–º—É –æ–∫—Ä—É–∂–µ–Ω–∏–µ.
o	—Ç–µ—Å—Ç–æ–≤—ã–µ –∫–ª—é—á–∏ Kaspi, Cloudinary, TipTop Pay.
o	–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–Ω–æ–º.
‚Ä¢	Prod:
o	–º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (Docker Swarm –∏–ª–∏ Kubernetes).
o	—Ä–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ API.
o	–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥.
________________________________________
6.6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏
‚Ä¢	Kaspi API ‚Äî –ø—É–ª–ª–∏–Ω–≥ –∑–∞–∫–∞–∑–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤, –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ñ–∏–¥–æ–≤.
‚Ä¢	TipTop Pay ‚Äî –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π, webhooks.
‚Ä¢	Cloudinary ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.
‚Ä¢	Mobizon ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.
–í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ app/services/ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–∏.
________________________________________
6.7. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
‚Ä¢	–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å: –∫–∞–∂–¥—ã–π –±–ª–æ–∫ (—Ç–æ–≤–∞—Ä—ã, –∑–∞–∫–∞–∑—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ä–∞—Å—Å—ã–ª–∫–∏) –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ —Å–≤–æ—ë–º –º–æ–¥—É–ª–µ.
‚Ä¢	–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —è–¥—Ä–∞.
‚Ä¢	–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å: –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ backend –∏–ª–∏ frontend.
‚Ä¢	–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å: –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–∏ —É–¥–æ–±–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—Ç—å unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏.
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: —á—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –∏ –∑–æ–Ω –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.

–ß–∞—Å—Ç—å 7/20 ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è backend (FastAPI)
7.1. –û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è
Backend —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ –±–∞–∑–µ FastAPI, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è:
‚Ä¢	REST API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã;
‚Ä¢	–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ (async/await) –¥–ª—è –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏;
‚Ä¢	–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Swagger UI –∏ Redoc);
‚Ä¢	—Å—Ç—Ä–æ–≥—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –∏ –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Pydantic;
‚Ä¢	–ø–æ–¥–¥–µ—Ä–∂–∫—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Depends;
‚Ä¢	–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ API (Kaspi, TipTop Pay, Cloudinary, Mobizon).
________________________________________
7.2. –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (app/main.py)
from fastapi import FastAPI
from app.routers import auth, products, orders, payments, warehouses, analytics

app = FastAPI(
    title="SmartSell API",
    version="1.0.0",
    description="–û–±–ª–∞—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–Ω–ª–∞–π–Ω-—Ç–æ—Ä–≥–æ–≤–ª–∏"
)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
app.include_router(auth.router, prefix="/api/auth", tags=["auth"])
app.include_router(products.router, prefix="/api/products", tags=["products"])
app.include_router(orders.router, prefix="/api/orders", tags=["orders"])
app.include_router(payments.router, prefix="/api/payments", tags=["payments"])
app.include_router(warehouses.router, prefix="/api/warehouses", tags=["warehouses"])
app.include_router(analytics.router, prefix="/api/analytics", tags=["analytics"])
________________________________________
7.3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (app/core/config.py)
from pydantic_settings import BaseSettings

class Settings(BaseSettings):
    DATABASE_URL: str
    SECRET_KEY: str
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30
    REFRESH_TOKEN_EXPIRE_DAYS: int = 7

    MOBIZON_API_KEY: str
    CLOUDINARY_URL: str
    TIPTOP_API_KEY: str
    TIPTOP_API_SECRET: str

    class Config:
        env_file = ".env"

settings = Settings()
________________________________________
7.4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (app/core/db.py)
from sqlalchemy.ext.asyncio import create_async_engine, AsyncSession
from sqlalchemy.orm import sessionmaker

from app.core.config import settings

engine = create_async_engine(settings.DATABASE_URL, echo=False, future=True)

async_session = sessionmaker(
    engine, class_=AsyncSession, expire_on_commit=False
)

# Dependency –¥–ª—è FastAPI
async def get_db():
    async with async_session() as session:
        yield session
________________________________________
7.5. –ü—Ä–∏–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–∞ (app/routers/products.py)
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.ext.asyncio import AsyncSession
from app.schemas.product import ProductCreate, ProductOut
from app.models.product import Product
from app.core.db import get_db

router = APIRouter()

@router.post("/", response_model=ProductOut)
async def create_product(product: ProductCreate, db: AsyncSession = Depends(get_db)):
    db_product = Product(**product.dict())
    db.add(db_product)
    await db.commit()
    await db.refresh(db_product)
    return db_product
________________________________________
7.6. Middleware
‚Ä¢	CORS Middleware ‚Äî —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã (React SPA).
‚Ä¢	Logging Middleware ‚Äî –∑–∞–ø–∏—Å—å –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ.
‚Ä¢	Error Handling Middleware ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
from fastapi.middleware.cors import CORSMiddleware

origins = ["https://smartsell.kz", "http://localhost:3000"]

app.add_middleware(
    CORSMiddleware,
    allow_origins=origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
________________________________________
7.7. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ä–æ–ª–∏
‚Ä¢	–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT.
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ (Depends(get_current_user) + –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –º–∞—Ä—à—Ä—É—Ç–∞–º –ø–æ —Ä–æ–ª—è–º:
o	admin ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø;
o	manager ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏/–∑–∞–∫–∞–∑–∞–º–∏;
o	storekeeper ‚Äî —Å–∫–ª–∞–¥;
o	analyst ‚Äî —Ç–æ–ª—å–∫–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.
________________________________________
7.8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backend
Pytest + httpx.AsyncClient –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ API.
–ü—Ä–∏–º–µ—Ä:
import pytest
from httpx import AsyncClient
from app.main import app

@pytest.mark.asyncio
async def test_read_products():
    async with AsyncClient(app=app, base_url="http://test") as ac:
        response = await ac.get("/api/products/")
    assert response.status_code == 200
________________________________________
7.9. –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ FastAPI –¥–ª—è SmartSell
‚Ä¢	–í—ã—Å–æ–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã (–±–ª–∏–∑–∫–æ –∫ Node.js –∏ Go).
‚Ä¢	–ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Swagger –∏ Redoc.
‚Ä¢	–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
‚Ä¢	–õ—ë–≥–∫–æ—Å—Ç—å –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è (Uvicorn + Gunicorn).
‚Ä¢	–£–¥–æ–±–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ middleware.
________________________________________
üëâ –≠—Ç–æ –±—ã–ª–∞ –ø–æ–ª–Ω–∞—è –ß–∞—Å—Ç—å 7/20 ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è backend (FastAPI).
–°–ª–µ–¥—É—é—â–∞—è –±—É–¥–µ—Ç –ß–∞—Å—Ç—å 8/20 ‚Äî –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy + Pydantic).
–•–æ—Ç–∏—Ç–µ, —è —Å—Ä–∞–∑—É –≤—ã–¥–∞–º –µ—ë?
–•–æ—Ä–æ—à–æ üëç –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º. –ù–∏–∂–µ –ø–æ–ª–Ω–∞—è –ß–∞—Å—Ç—å 7/20 ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è backend (FastAPI, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –º–∞—Ä—à—Ä—É—Ç—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).
________________________________________
–ß–∞—Å—Ç—å 7/20 ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è backend (FastAPI)
7.1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã
Backend —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ FastAPI –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
‚Ä¢	REST API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤;
‚Ä¢	–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é (JWT + OTP);
‚Ä¢	–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å —Ç–æ–≤–∞—Ä–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏, –ø–ª–∞—Ç–µ–∂–∞–º–∏, —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏;
‚Ä¢	–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Kaspi, Cloudinary, TipTop Pay, Mobizon);
‚Ä¢	–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API (Swagger/Redoc);
‚Ä¢	–æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
________________________________________
7.2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
–§–∞–π–ª app/core/config.py:
import os
from pydantic import BaseSettings

class Settings(BaseSettings):
    APP_NAME: str = "SmartSell"
    APP_VERSION: str = "1.0.0"

    DATABASE_URL: str
    SECRET_KEY: str
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 30

    MOBIZON_API_KEY: str
    CLOUDINARY_URL: str
    TIPTOP_API_KEY: str
    TIPTOP_API_SECRET: str

    class Config:
        env_file = ".env"

settings = Settings()
________________________________________
7.3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI
–§–∞–π–ª app/main.py:
from fastapi import FastAPI
from app.routers import auth, products, orders, payments, warehouses, analytics
from app.core.config import settings

app = FastAPI(
    title=settings.APP_NAME,
    version=settings.APP_VERSION,
    docs_url="/docs",
    redoc_url="/redoc"
)

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
app.include_router(auth.router, prefix="/api/auth", tags=["auth"])
app.include_router(products.router, prefix="/api/products", tags=["products"])
app.include_router(orders.router, prefix="/api/orders", tags=["orders"])
app.include_router(payments.router, prefix="/api/payments", tags=["payments"])
app.include_router(warehouses.router, prefix="/api/warehouses", tags=["warehouses"])
app.include_router(analytics.router, prefix="/api/analytics", tags=["analytics"])
________________________________________
7.4. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
–§–∞–π–ª app/core/db.py:
from sqlalchemy.ext.asyncio import AsyncSession, create_async_engine
from sqlalchemy.orm import sessionmaker
from app.core.config import settings

engine = create_async_engine(settings.DATABASE_URL, future=True, echo=False)

SessionLocal = sessionmaker(
    autocommit=False,
    autoflush=False,
    bind=engine,
    class_=AsyncSession
)

async def get_db():
    async with SessionLocal() as session:
        yield session
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä (asyncpg).
‚Ä¢	–î–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ë–î –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å Depends(get_db) –≤ FastAPI.
________________________________________
7.5. –ú–∞—Ä—à—Ä—É—Ç—ã (routers)
–ú–∞—Ä—à—Ä—É—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º:
‚Ä¢	auth.py ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥ –ø–æ OTP, JWT-—Ç–æ–∫–µ–Ω—ã.
‚Ä¢	products.py ‚Äî CRUD —Ç–æ–≤–∞—Ä–æ–≤, –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç Excel, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ (Cloudinary).
‚Ä¢	orders.py ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kaspi API.
‚Ä¢	payments.py ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π, –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhooks TipTop Pay.
‚Ä¢	warehouses.py ‚Äî —Å–∫–ª–∞–¥—ã, –æ—Å—Ç–∞—Ç–∫–∏, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è.
‚Ä¢	analytics.py ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã, –æ—Ç—á—ë—Ç—ã.
–ü—Ä–∏–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–∞ (app/routers/products.py):
from fastapi import APIRouter, Depends, HTTPException
from sqlalchemy.ext.asyncio import AsyncSession
from app.schemas.product import ProductCreate, ProductRead
from app.models.product import Product
from app.core.db import get_db

router = APIRouter()

@router.post("/", response_model=ProductRead)
async def create_product(product: ProductCreate, db: AsyncSession = Depends(get_db)):
    new_product = Product(**product.dict())
    db.add(new_product)
    await db.commit()
    await db.refresh(new_product)
    return new_product
________________________________________
7.6. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Depends)
FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º Depends –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
‚Ä¢	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ë–î (get_db).
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (get_current_user).
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ (get_current_admin).
‚Ä¢	–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ (KaspiService, TipTopService –∏ —Ç.–¥.).
–ü—Ä–∏–º–µ—Ä –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
from fastapi import Depends, HTTPException, status
from fastapi.security import OAuth2PasswordBearer
from jose import jwt, JWTError
from app.core.config import settings

oauth2_scheme = OAuth2PasswordBearer(tokenUrl="/api/auth/login")

def get_current_user(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, settings.SECRET_KEY, algorithms=["HS256"])
        return payload
    except JWTError:
        raise HTTPException(status_code=status.HTTP_401_UNAUTHORIZED, detail="Invalid token")
________________________________________
7.7. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚Ä¢	–í—Å–µ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
‚Ä¢	–î–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π FastAPI —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç JSON-–æ—Ç–≤–µ—Ç.
‚Ä¢	–î–ª—è –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–æ–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPException.
‚Ä¢	–û—à–∏–±–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (Kaspi, TipTop, Cloudinary) –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏.
________________________________________
7.8. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
‚Ä¢	Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É /docs.
‚Ä¢	Redoc –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É /redoc.
‚Ä¢	Pydantic-—Å—Ö–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ OpenAPI –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
________________________________________
7.9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ backend
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è pytest + httpx.AsyncClient.
‚Ä¢	–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–∞—è (SQLite in-memory –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π PostgreSQL).
‚Ä¢	–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:
o	–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è;
o	CRUD —Ç–æ–≤–∞—Ä–æ–≤;
o	–ø–ª–∞—Ç–µ–∂–∏ (mock TipTop Pay);
o	webhooks;
o	–æ—Ç—á—ë—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.

–ß–∞—Å—Ç—å 8/20 ‚Äî –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy + Pydantic)
8.1. –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢	–°–£–ë–î: PostgreSQL.
‚Ä¢	ORM: SQLAlchemy 2.x (declarative, async).
‚Ä¢	–°—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏/–æ—Ç–≤–µ—Ç–æ–≤: Pydantic v2.
‚Ä¢	–ú–∏–≥—Ä–∞—Ü–∏–∏: Alembic.
‚Ä¢	–ï–¥–∏–Ω—ã–µ –ø–æ–ª—è –∞—É–¥–∏—Ç–∞: id, created_at, updated_at, deleted_at (soft-delete —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–æ).
‚Ä¢	–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: –∏–º–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü –≤ snake_case, –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –≤–∏–¥–∞ <entity>_id.
‚Ä¢	–ò–Ω–¥–µ–∫—Å—ã: –Ω–∞ –ø–æ–ª—è –ø–æ–∏—Å–∫–∞/—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (–¥–∞—Ç–∞, —Å—Ç–∞—Ç—É—Å, –∞—Ä—Ç–∏–∫—É–ª, —Ç–µ–ª–µ—Ñ–æ–Ω, –≤–Ω–µ—à–Ω–∏–µ id).
‚Ä¢	–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π/–ø–ª–∞—Ç–µ–∂–µ–π (provider_invoice_id, event_id).
‚Ä¢	–ú—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è): —á–µ—Ä–µ–∑ company_id/store_id –≤ –∫–ª—é—á–µ–≤—ã—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö.
–ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –∞—É–¥–∏—Ç–∞:
# app/models/base.py
import sqlalchemy as sa
from sqlalchemy.orm import DeclarativeBase, declared_attr
from datetime import datetime, timezone

class Base(DeclarativeBase):
    @declared_attr.directive
    def __tablename__(cls) -> str:
        return cls.__name__.lower()

    id = sa.Column(sa.BigInteger, primary_key=True, index=True)
    created_at = sa.Column(sa.DateTime(timezone=True), default=lambda: datetime.now(timezone.utc), nullable=False)
    updated_at = sa.Column(sa.DateTime(timezone=True), default=lambda: datetime.now(timezone.utc), onupdate=lambda: datetime.now(timezone.utc), nullable=False)
    deleted_at = sa.Column(sa.DateTime(timezone=True), nullable=True, index=True)
________________________________________
8.2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏
8.2.1. Company (–∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä / –º–∞–≥–∞–∑–∏–Ω)
# app/models/company.py
import sqlalchemy as sa
from sqlalchemy.orm import relationship
from app.models.base import Base

class Company(Base):
    __tablename__ = "companies"

    name = sa.Column(sa.String(255), nullable=False, index=True)
    bin_iin = sa.Column(sa.String(32), nullable=True, unique=True)  # –ë–ò–ù/–ò–ò–ù
    phone = sa.Column(sa.String(32), nullable=True)
    email = sa.Column(sa.String(255), nullable=True)
    is_active = sa.Column(sa.Boolean, default=True, nullable=False)

    users = relationship("User", back_populates="company", lazy="selectin")
–ò–Ω–¥–µ–∫—Å—ã: (bin_iin UNIQUE), (name).
8.2.2. User
# app/models/user.py
import sqlalchemy as sa
from sqlalchemy.orm import relationship
from app.models.base import Base

class UserRole(str):
    ADMIN = "admin"
    MANAGER = "manager"
    STOREKEEPER = "storekeeper"
    ANALYST = "analyst"

class User(Base):
    __tablename__ = "users"

    company_id = sa.Column(sa.ForeignKey("companies.id", ondelete="CASCADE"), nullable=True, index=True)
    phone = sa.Column(sa.String(32), unique=True, nullable=False, index=True)
    email = sa.Column(sa.String(255), unique=True, nullable=True)
    hashed_password = sa.Column(sa.String(255), nullable=True)  # –ø—Ä–∏ OTP –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ
    role = sa.Column(sa.Enum(UserRole, name="user_role"), default=UserRole.MANAGER, nullable=False)
    is_active = sa.Column(sa.Boolean, default=True, nullable=False)

    company = relationship("Company", back_populates="users", lazy="joined")
–ò–Ω–¥–µ–∫—Å—ã: (phone UNIQUE), (email UNIQUE, NULLS NOT DISTINCT –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ PG14+ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è).
8.2.3. OTP –ø–æ–ø—ã—Ç–∫–∏
# app/models/otp.py
import sqlalchemy as sa
from app.models.base import Base

class OtpAttempt(Base):
    __tablename__ = "otp_attempts"

    phone = sa.Column(sa.String(32), nullable=False, index=True)
    code_hash = sa.Column(sa.String(255), nullable=False)
    expires_at = sa.Column(sa.DateTime(timezone=True), nullable=False)
    attempts_left = sa.Column(sa.Integer, default=5, nullable=False)
    sent_count_hour = sa.Column(sa.Integer, default=0, nullable=False)
    sent_count_day = sa.Column(sa.Integer, default=0, nullable=False)
–ò–Ω–¥–µ–∫—Å—ã: (phone, expires_at).
________________________________________
8.3. –ö–∞—Ç–∞–ª–æ–≥, —Å–∫–ª–∞–¥—ã –∏ –æ—Å—Ç–∞—Ç–∫–∏
8.3.1. Product
# app/models/product.py
import sqlalchemy as sa
from sqlalchemy.orm import relationship
from app.models.base import Base

class Product(Base):
    __tablename__ = "products"

    company_id = sa.Column(sa.ForeignKey("companies.id", ondelete="CASCADE"), nullable=False, index=True)
    sku = sa.Column(sa.String(64), nullable=False, index=True)     # –∞—Ä—Ç–∏–∫—É–ª
    name = sa.Column(sa.String(255), nullable=False, index=True)
    description = sa.Column(sa.Text, nullable=True)
    price = sa.Column(sa.Numeric(14, 2), nullable=False, index=True)
    min_price = sa.Column(sa.Numeric(14, 2), nullable=True)
    max_price = sa.Column(sa.Numeric(14, 2), nullable=True)
    image_url = sa.Column(sa.String(1024), nullable=True)
    image_public_id = sa.Column(sa.String(255), nullable=True)  # –¥–ª—è Cloudinary
    is_active = sa.Column(sa.Boolean, default=True, nullable=False)

    __table_args__ = (
        sa.UniqueConstraint("company_id", "sku", name="uq_product_company_sku"),
    )

    stocks = relationship("ProductStock", back_populates="product", lazy="selectin")
–ò–Ω–¥–µ–∫—Å—ã: (company_id, sku UNIQUE), (name), (price).
8.3.2. Warehouse –∏ –∑–∞–ø–∞—Å—ã
# app/models/warehouse.py
import sqlalchemy as sa
from sqlalchemy.orm import relationship
from app.models.base import Base

class Warehouse(Base):
    __tablename__ = "warehouses"

    company_id = sa.Column(sa.ForeignKey("companies.id", ondelete="CASCADE"), nullable=False, index=True)
    name = sa.Column(sa.String(255), nullable=False)
    address = sa.Column(sa.String(512), nullable=True)
    phone = sa.Column(sa.String(32), nullable=True)
    schedule = sa.Column(sa.String(255), nullable=True)
    is_active = sa.Column(sa.Boolean, default=True, nullable=False)

    stocks = relationship("ProductStock", back_populates="warehouse", lazy="selectin")

class ProductStock(Base):
    __tablename__ = "product_stocks"

    product_id = sa.Column(sa.ForeignKey("products.id", ondelete="CASCADE"), nullable=False, index=True)
    warehouse_id = sa.Column(sa.ForeignKey("warehouses.id", ondelete="CASCADE"), nullable=False, index=True)
    qty = sa.Column(sa.Integer, nullable=False, default=0, server_default="0")

    __table_args__ = (
        sa.UniqueConstraint("product_id", "warehouse_id", name="uq_product_warehouse"),
    )

    product = relationship("Product", back_populates="stocks", lazy="joined")
    warehouse = relationship("Warehouse", back_populates="stocks", lazy="joined")
–ò–Ω–¥–µ–∫—Å—ã: (product_id, warehouse_id UNIQUE).
________________________________________
8.4. –ó–∞–∫–∞–∑—ã –∏ –ø–ª–∞—Ç–µ–∂–∏
8.4.1. Order –∏ OrderItem
# app/models/order.py
import sqlalchemy as sa
from sqlalchemy.orm import relationship
from app.models.base import Base

class OrderStatus(str):
    PENDING = "pending"
    CONFIRMED = "confirmed"
    PAID = "paid"
    SHIPPED = "shipped"
    COMPLETED = "completed"
    CANCELED = "canceled"
    REFUNDED = "refunded"

class Order(Base):
    __tablename__ = "orders"

    company_id = sa.Column(sa.ForeignKey("companies.id", ondelete="CASCADE"), nullable=False, index=True)
    external_id = sa.Column(sa.String(128), nullable=True, index=True)  # id –∏–∑ Kaspi/–¥—Ä.
    customer_phone = sa.Column(sa.String(32), nullable=True, index=True)
    customer_name = sa.Column(sa.String(255), nullable=True)
    status = sa.Column(sa.Enum(OrderStatus, name="order_status"), default=OrderStatus.PENDING, nullable=False, index=True)
    total_amount = sa.Column(sa.Numeric(14, 2), nullable=False)
    currency = sa.Column(sa.String(8), default="KZT", nullable=False)

    items = relationship("OrderItem", back_populates="order", lazy="selectin", cascade="all, delete-orphan")

class OrderItem(Base):
    __tablename__ = "order_items"

    order_id = sa.Column(sa.ForeignKey("orders.id", ondelete="CASCADE"), nullable=False, index=True)
    product_id = sa.Column(sa.ForeignKey("products.id", ondelete="RESTRICT"), nullable=False, index=True)
    name = sa.Column(sa.String(255), nullable=False)
    price = sa.Column(sa.Numeric(14, 2), nullable=False)
    qty = sa.Column(sa.Integer, nullable=False)

    order = relationship("Order", back_populates="items", lazy="joined")
–ò–Ω–¥–µ–∫—Å—ã: (company_id), (status), (external_id).
8.4.2. Payments
# app/models/payment.py
import sqlalchemy as sa
from app.models.base import Base

class PaymentStatus(str):
    NEW = "new"
    SUCCESS = "success"
    FAILED = "failed"
    REFUND = "refund"

class Payment(Base):
    __tablename__ = "payments"

    order_id = sa.Column(sa.ForeignKey("orders.id", ondelete="CASCADE"), nullable=False, index=True)
    amount = sa.Column(sa.Numeric(14, 2), nullable=False)
    currency = sa.Column(sa.String(8), default="KZT", nullable=False)
    provider = sa.Column(sa.String(64), nullable=False, default="tiptop")
    provider_invoice_id = sa.Column(sa.String(128), nullable=False, unique=True)  # –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
    status = sa.Column(sa.Enum(PaymentStatus, name="payment_status"), default=PaymentStatus.NEW, nullable=False, index=True)
    receipt_url = sa.Column(sa.String(1024), nullable=True)  # —Å—Å—ã–ª–∫–∞ –Ω–∞ —á–µ–∫
–ò–Ω–¥–µ–∫—Å—ã: (provider_invoice_id UNIQUE), (order_id), (status).
________________________________________
8.5. –†–∞—Å—Å—ã–ª–∫–∏ –∏ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
# app/models/campaign.py
import sqlalchemy as sa
from app.models.base import Base

class Channel(str):
    WA = "wa"
    EMAIL = "email"
    TG = "tg"

class CampaignStatus(str):
    DRAFT = "draft"
    SCHEDULED = "scheduled"
    RUNNING = "running"
    DONE = "done"
    FAILED = "failed"

class Campaign(Base):
    __tablename__ = "campaigns"

    company_id = sa.Column(sa.ForeignKey("companies.id", ondelete="CASCADE"), nullable=False, index=True)
    channel = sa.Column(sa.Enum(Channel, name="campaign_channel"), nullable=False)
    title = sa.Column(sa.String(255), nullable=True)
    template = sa.Column(sa.Text, nullable=False)       # —Ç–µ–∫—Å—Ç/—à–∞–±–ª–æ–Ω
    segment = sa.Column(sa.Text, nullable=True)         # JSON-—É—Å–ª–æ–≤–∏—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
    scheduled_at = sa.Column(sa.DateTime(timezone=True), nullable=True, index=True)
    status = sa.Column(sa.Enum(CampaignStatus, name="campaign_status"), default=CampaignStatus.DRAFT, nullable=False, index=True)
    daily_limit = sa.Column(sa.Integer, nullable=True, default=800)
–õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫ (–ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –¥–æ—Å—Ç–∞–≤–∫–∏):
# app/models/campaign_log.py
import sqlalchemy as sa
from app.models.base import Base

class CampaignLog(Base):
    __tablename__ = "campaign_logs"

    campaign_id = sa.Column(sa.ForeignKey("campaigns.id", ondelete="CASCADE"), nullable=False, index=True)
    contact = sa.Column(sa.String(255), nullable=False)   # —Ç–µ–ª–µ—Ñ–æ–Ω/email/@user
    status = sa.Column(sa.String(32), nullable=False)     # sent/failed/delivered/read/...
    error = sa.Column(sa.String(512), nullable=True)
________________________________________
8.6. –ê—É–¥–∏—Ç –∏ —Å–æ–±—ã—Ç–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
8.6.1. AuditLog
# app/models/audit.py
import sqlalchemy as sa
from app.models.base import Base

class AuditLog(Base):
    __tablename__ = "audit_log"

    user_id = sa.Column(sa.ForeignKey("users.id", ondelete="SET NULL"), nullable=True, index=True)
    action = sa.Column(sa.String(128), nullable=False)            # created/updated/deleted/import/export/login/...
    entity_type = sa.Column(sa.String(64), nullable=False)        # product/order/payment/...
    entity_id = sa.Column(sa.BigInteger, nullable=True)
    old_value = sa.Column(sa.Text, nullable=True)                 # JSON (—Å—Ç—Ä–æ–∫–æ–π)
    new_value = sa.Column(sa.Text, nullable=True)
    ip = sa.Column(sa.String(64), nullable=True)
    user_agent = sa.Column(sa.String(255), nullable=True)
–ò–Ω–¥–µ–∫—Å—ã: (user_id), (entity_type, entity_id), (action).
8.6.2. WebhookEvent (–¥–ª—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)
# app/models/webhook_event.py
import sqlalchemy as sa
from app.models.base import Base

class WebhookEvent(Base):
    __tablename__ = "webhook_events"

    provider = sa.Column(sa.String(64), nullable=False)            # tiptop/kaspi/...
    event_id = sa.Column(sa.String(128), nullable=False, unique=True)
    payload = sa.Column(sa.Text, nullable=False)                   # –∏—Å—Ö–æ–¥–Ω—ã–π JSON
    processed = sa.Column(sa.Boolean, default=False, nullable=False)
    processed_at = sa.Column(sa.DateTime(timezone=True), nullable=True)
–ò–Ω–¥–µ–∫—Å: (event_id UNIQUE).
________________________________________
8.7. Pydantic-—Å—Ö–µ–º—ã (DTO)
–ü—Ä–∏–º–µ—Ä—ã –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ö–µ–º (request/response):
# app/schemas/product.py
from pydantic import BaseModel, Field, condecimal
from typing import Optional

class ProductBase(BaseModel):
    sku: str = Field(min_length=1, max_length=64)
    name: str = Field(min_length=1, max_length=255)
    description: Optional[str] = None
    price: condecimal(max_digits=14, decimal_places=2)
    min_price: Optional[condecimal(max_digits=14, decimal_places=2)] = None
    max_price: Optional[condecimal(max_digits=14, decimal_places=2)] = None

class ProductCreate(ProductBase):
    pass

class ProductUpdate(BaseModel):
    name: Optional[str] = None
    description: Optional[str] = None
    price: Optional[condecimal(max_digits=14, decimal_places=2)] = None
    min_price: Optional[condecimal(max_digits=14, decimal_places=2)] = None
    max_price: Optional[condecimal(max_digits=14, decimal_places=2)] = None

class ProductOut(ProductBase):
    id: int
    image_url: Optional[str] = None
    is_active: bool

    model_config = {"from_attributes": True}
# app/schemas/order.py
from pydantic import BaseModel, Field, condecimal
from typing import List

class OrderItemIn(BaseModel):
    product_id: int
    name: str
    price: condecimal(max_digits=14, decimal_places=2)
    qty: int = Field(ge=1)

class OrderCreate(BaseModel):
    customer_phone: str | None = None
    customer_name: str | None = None
    items: List[OrderItemIn]

class OrderOut(BaseModel):
    id: int
    status: str
    total_amount: condecimal(max_digits=14, decimal_places=2)
    currency: str
    items: List[OrderItemIn]

    model_config = {"from_attributes": True}
# app/schemas/payment.py
from pydantic import BaseModel, condecimal

class PaymentCreate(BaseModel):
    order_id: int
    amount: condecimal(max_digits=14, decimal_places=2)
    currency: str = "KZT"

class PaymentOut(BaseModel):
    id: int
    provider_invoice_id: str
    status: str
    receipt_url: str | None = None

    model_config = {"from_attributes": True}
________________________________________
8.8. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	Product.price –¥–æ–ª–∂–µ–Ω —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—É, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω min_price/max_price:
min_price <= price <= max_price. –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –≤ Pydantic-—Å—Ö–µ–º–µ –∏/–∏–ª–∏ –≤ —Å–µ—Ä–≤–∏—Å–µ.
‚Ä¢	Order.total_amount ‚Äî –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏–∑ OrderItem (–Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–∞), –Ω–µ –¥–æ–≤–µ—Ä—è—Ç—å –≤—Ö–æ–¥—è—â–µ–º—É –∑–Ω–∞—á–µ–Ω–∏—é.
‚Ä¢	–£–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ OrderItem ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω–æ (RESTRICT) –∏–ª–∏ –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ deleted_at.
‚Ä¢	ProductStock.qty ‚Äî –Ω–µ–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —Ü–µ–ª–æ–µ; –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –º–µ–∂–¥—É —Å–∫–ª–∞–¥–∞–º–∏ ‚Äî –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
‚Ä¢	Payment.provider_invoice_id ‚Äî —É–Ω–∏–∫–∞–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –∫–ª—é—á.
‚Ä¢	Campaign.daily_limit ‚Äî —Å–æ–±–ª—é–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–∞—Å—Å—ã–ª–∫–∏; –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º (22:00‚Äì08:00) —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –≤–æ—Ä–∫–µ—Ä–∞—Ö.
________________________________________
8.9. Alembic: –≤–µ—Ä—Å–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä –Ω–∞—á–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:
alembic init alembic
alembic.ini: —É–∫–∞–∑–∞—Ç—å sqlalchemy.url –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å env-–∫–æ–Ω—Ñ–∏–≥.
alembic/env.py (—Ñ—Ä–∞–≥–º–µ–Ω—Ç):
from logging.config import fileConfig
from sqlalchemy import pool
from sqlalchemy.engine import Connection
from sqlalchemy import create_engine
from alembic import context
from app.models.base import Base  # –∏–º–ø–æ—Ä—Ç –º–µ—Ç–∞–¥–∞—Ç—ã
from app.models import user, company, product, warehouse, order, payment, campaign, campaign_log, otp, audit, webhook_event

config = context.config
if config.config_file_name is not None:
    fileConfig(config.config_file_name)

target_metadata = Base.metadata

def run_migrations_offline():
    context.configure(url=config.get_main_option("sqlalchemy.url"), target_metadata=target_metadata, literal_binds=True)
    with context.begin_transaction():
        context.run_migrations()

def run_migrations_online():
    connectable = create_engine(config.get_main_option("sqlalchemy.url"), poolclass=pool.NullPool)
    with connectable.connect() as connection:
        context.configure(connection=connection, target_metadata=target_metadata)
        with context.begin_transaction():
            context.run_migrations()

if context.is_offline_mode():
    run_migrations_offline()
else:
    run_migrations_online()
–ü—Ä–∏–º–µ—Ä —Ä–µ–≤–∏–∑–∏–∏:
alembic revision -m "init schema"
alembic upgrade head
–í —Ä–µ–≤–∏–∑–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—à–µ, —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏.
________________________________________
8.10. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º:
‚Ä¢	users(phone), users(email).
‚Ä¢	products(company_id, sku) UNIQUE, products(name), products(price).
‚Ä¢	orders(company_id), orders(status), orders(external_id), orders(created_at).
‚Ä¢	payments(provider_invoice_id) UNIQUE, payments(status).
‚Ä¢	campaigns(company_id, scheduled_at, status).
‚Ä¢	audit_log(entity_type, entity_id).
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å partially indexed –ø–æ–ª—è –ø—Ä–∏ soft-delete: –∏–Ω–¥–µ–∫—Å—ã –≤–∏–¥–∞ WHERE deleted_at IS NULL –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –≤—ã–±–æ—Ä–æ–∫.
________________________________________
8.11. –ú—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–∞)
‚Ä¢	–í—Å–µ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ company_id.
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–∏—Å–æ–≤/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –≤—Å–µ–≥–¥–∞ —É—á–∏—Ç—ã–≤–∞—é—Ç company_id —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
‚Ä¢	–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (SKU –∏ –¥—Ä.) –∑–∞–¥–∞—é—Ç—Å—è –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏.
________________________________________
8.12. –ü–æ–ª–∏—Ç–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
‚Ä¢	–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é: soft-delete ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ deleted_at, —Å–∫—Ä—ã—Ç–∏–µ –∏–∑ –≤—ã–±–æ—Ä–æ–∫.
‚Ä¢	–ñ—ë—Å—Ç–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü (otp_attempts, webhook_events) –ø–æ —Ä–µ—Ç–µ–Ω—à–Ω-–ø–µ—Ä–∏–æ–¥—É.
________________________________________
8.13. –ö–æ–Ω–≤–µ–Ω—Ü–∏–∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚Ä¢	–í—Å–µ API-–æ—Ç–≤–µ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç Pydantic-—Å—Ö–µ–º—ã —Å model_config = {"from_attributes": True}.
‚Ä¢	–î–µ–Ω–µ–∂–Ω—ã–µ –ø–æ–ª—è ‚Äî Decimal/condecimal, –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –ª–æ–∫–∞–ª–∏ KZT.
‚Ä¢	–î–∞—Ç—ã ‚Äî ISO8601 (UTC).
________________________________________
8.14. –ü—Ä–æ–≤–µ—Ä–∫–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞: –æ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Üí –≤—Å—Ç–∞–≤–∫–∞ Order –∏ OrderItems, –ø–µ—Ä–µ—Å—á—ë—Ç —Å—É–º–º—ã, —Ä–µ–∑–µ—Ä–≤ –æ—Å—Ç–∞—Ç–∫–æ–≤.
‚Ä¢	–û–±—Ä–∞–±–æ—Ç–∫–∞ webhook –ø–ª–∞—Ç–µ–∂–∞: –æ–¥–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ ‚Üí –∞–ø–¥–µ–π—Ç Payment –∏ Order.status.
‚Ä¢	–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∑–∞–ø–∞—Å–æ–≤: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Å—Ç—Ä–æ–∫ –≤ product_stocks (SELECT FOR UPDATE).
________________________________________
8.15. –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å
‚Ä¢	–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π: –Ω–æ–≤–∞—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –≤ Channel, –ª–æ–≥–∏–∫–∞ –≤ –≤–æ—Ä–∫–µ—Ä–∞—Ö, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º.
‚Ä¢	–ù–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑–æ–≤/–ø–ª–∞—Ç–µ–∂–µ–π: —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ENUM –∏ –º–∏–≥—Ä–∞—Ü–∏—è Alembic (–≤ PG ENUM –º–æ–∂–Ω–æ ALTER TYPE ADD VALUE).
‚Ä¢	–ù–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ integration_credentials (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π –Ω–∞ –∫–æ–º–ø–∞–Ω–∏—é).

–ß–∞—Å—Ç—å 9/20 ‚Äî –†–µ–∞–ª–∏–∑–∞—Ü–∏—è frontend (React + MUI)
9.1. –û–±—â–∏–µ –ø–æ–ª–æ–∂–µ–Ω–∏—è
Frontend —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ SPA –Ω–∞ React —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Material UI (MUI).
–û—Å–Ω–æ–≤–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
‚Ä¢	–ß—ë—Ç–∫–∞—è –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Å—Ç—Ä–∞–Ω–∏—Ü—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ).
‚Ä¢	–ï–¥–∏–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç (axios) —Å –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä–∞–º–∏ —Ç–æ–∫–µ–Ω–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫.
‚Ä¢	–†–æ—É—Ç–∏–Ω–≥ (React Router) —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–æ–ª–µ–π.
‚Ä¢	–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã (React Hook Form + Zod/Yup), —Ç–∞–±–ª–∏—Ü—ã (MUI DataGrid).
‚Ä¢	–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî i18n (react-i18next).
‚Ä¢	–°–±–æ—Ä–∫–∞: Vite (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ .env-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.
________________________________________
9.2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ frontend/
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.jsx              # –∫–æ—Ä–Ω–µ–≤–æ–π —Ä–æ—É—Ç–∏–Ω–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ store.ts                # (–æ–ø—Ü.) Redux Toolkit store
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppLayout.jsx       # –≤–µ—Ä—Ö–Ω–∏–π –±–∞—Ä, –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é, –∫–æ–Ω—Ç–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ NavItems.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ forms/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TextFieldControl.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SelectControl.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tables/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataTable.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProductGrid.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ feedback/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SnackbarProvider.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ConfirmDialog.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ImageUploader.jsx
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.jsx         # —Å–µ—Å—Å–∏—è, —Ç–æ–∫–µ–Ω—ã, —Ä–æ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usePagination.js
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OtpVerify.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dashboard/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dashboard.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Products/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductsList.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductForm.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ImportExport.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Orders/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrdersList.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ OrderView.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Warehouses/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WarehousesList.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MoveStock.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Analytics/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnalyticsPage.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Billing/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Plans.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PaymentsHistory.jsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Campaigns/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CampaignsList.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CampaignForm.jsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Settings/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Settings.jsx
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js                  # axios instance + –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ orders.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouses.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.service.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ billing.service.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ campaigns.service.js
‚îÇ   ‚îú‚îÄ‚îÄ theme/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ muiTheme.js
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ formatters.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ guards.jsx              # PrivateRoute / RoleGuard
‚îÇ   ‚îú‚îÄ‚îÄ i18n/                       # (–æ–ø—Ü.) –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ main.jsx
‚îÇ   ‚îî‚îÄ‚îÄ App.jsx
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ vite.config.ts
________________________________________
9.3. –†–æ—É—Ç–∏–Ω–≥ –∏ –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤
React Router –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã:
‚Ä¢	–ü—É–±–ª–∏—á–Ω—ã–µ: /login, /otp (–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è).
‚Ä¢	–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ: /dashboard, /products, /orders, /analytics, /billing, /campaigns, /warehouses, /settings.
–ü—Ä–∏–º–µ—Ä guards.jsx
import { Navigate } from "react-router-dom";
import { useAuth } from "../hooks/useAuth";

export function PrivateRoute({ children }) {
  const { isAuthenticated } = useAuth();
  return isAuthenticated ? children : <Navigate to="/login" replace />;
}

export function RoleGuard({ roles = [], children }) {
  const { user } = useAuth();
  if (!user) return <Navigate to="/login" replace />;
  return roles.includes(user.role) ? children : <Navigate to="/dashboard" replace />;
}
–ü—Ä–∏–º–µ—Ä routes.jsx
import { createBrowserRouter } from "react-router-dom";
import AppLayout from "../components/layout/AppLayout";
import Login from "../pages/Auth/Login";
import OtpVerify from "../pages/Auth/OtpVerify";
import Dashboard from "../pages/Dashboard/Dashboard";
import ProductsList from "../pages/Products/ProductsList";
import OrdersList from "../pages/Orders/OrdersList";
import AnalyticsPage from "../pages/Analytics/AnalyticsPage";
import { PrivateRoute, RoleGuard } from "../utils/guards";

export const router = createBrowserRouter([
  { path: "/login", element: <Login /> },
  { path: "/otp", element: <OtpVerify /> },
  {
    path: "/",
    element: (
      <PrivateRoute>
        <AppLayout />
      </PrivateRoute>
    ),
    children: [
      { path: "dashboard", element: <Dashboard /> },
      {
        path: "products",
        element: (
          <RoleGuard roles={["admin", "manager"]}>
            <ProductsList />
          </RoleGuard>
        )
      },
      { path: "orders", element: <OrdersList /> },
      { path: "analytics", element: <AnalyticsPage /> },
      // ...–¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    ]
  }
]);
________________________________________
9.4. –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
AuthContext
‚Ä¢	–•—Ä–∞–Ω–∏—Ç user, accessToken (–æ–ø—Ü. ‚Äî refreshToken), –º–µ—Ç–æ–¥—ã login, verifyOtp, logout.
‚Ä¢	–°–Ω–∏–º–∞–µ—Ç/—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ localStorage –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HttpOnly cookie –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ axios –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä –Ω–µ —á–∏—Ç–∞–µ—Ç localStorage, –∞ –ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–∞ cookie-based auth).
import { createContext, useContext, useState, useEffect } from "react";
import { authService } from "../services/auth.service";

const AuthCtx = createContext(null);
export const useAuth = () => useContext(AuthCtx);

export function AuthProvider({ children }) {
  const [user, setUser] = useState(null);
  const [accessToken, setToken] = useState(null);

  useEffect(() => {
    const t = localStorage.getItem("accessToken");
    if (t) setToken(t);
    const u = localStorage.getItem("user");
    if (u) setUser(JSON.parse(u));
  }, []);

  const login = async (phone) => authService.login(phone); // –æ—Ç–ø—Ä–∞–≤–∫–∞ OTP
  const verifyOtp = async (phone, code) => {
    const { token, user } = await authService.verifyOtp(phone, code);
    setToken(token);
    setUser(user);
    localStorage.setItem("accessToken", token);
    localStorage.setItem("user", JSON.stringify(user));
  };
  const logout = () => {
    setUser(null);
    setToken(null);
    localStorage.removeItem("accessToken");
    localStorage.removeItem("user");
  };

  return (
    <AuthCtx.Provider value={{ user, accessToken, isAuthenticated: !!accessToken, login, verifyOtp, logout }}>
      {children}
    </AuthCtx.Provider>
  );
}
________________________________________
9.5. HTTP-–∫–ª–∏–µ–Ω—Ç (axios) –∏ –∏–Ω—Ç–µ—Ä—Ü–µ–ø—Ç–æ—Ä—ã
–ï–¥–∏–Ω—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –≤ services/api.js:
import axios from "axios";

const API_URL = import.meta.env.VITE_API_URL || "http://localhost:8000/api";

export const api = axios.create({
  baseURL: API_URL,
  withCredentials: false // –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º HttpOnly cookie ‚Äî true
});

api.interceptors.request.use((config) => {
  const token = localStorage.getItem("accessToken");
  if (token) config.headers.Authorization = `Bearer ${token}`;
  return config;
});

api.interceptors.response.use(
  (res) => res,
  (err) => {
    // —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 401/403/5xx
    if (err.response?.status === 401) {
      // –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login
    }
    return Promise.reject(err);
  }
);
________________________________________
9.6. –°–µ—Ä–≤–∏—Å–Ω—ã–µ –º–æ–¥—É–ª–∏
–ü—Ä–∏–º–µ—Ä—ã:
// auth.service.js
import { api } from "./api";

export const authService = {
  login: (phone) => api.post("/auth/login", { phone }),
  verifyOtp: (phone, code) => api.post("/auth/verify", { phone, code }).then(r => r.data),
  refresh: () => api.post("/auth/refresh")
};

// products.service.js
export const productsService = {
  list: (params) => api.get("/products", { params }).then(r => r.data),
  create: (payload) => api.post("/products", payload).then(r => r.data),
  update: (id, payload) => api.patch(`/products/${id}`, payload).then(r => r.data),
  remove: (id) => api.delete(`/products/${id}`),
  uploadImage: (id, file) => {
    const form = new FormData();
    form.append("file", file);
    return api.post(`/products/${id}/image`, form).then(r => r.data);
  },
  importExcel: (file) => {
    const form = new FormData();
    form.append("file", file);
    return api.post("/products/import", form);
  },
  exportExcel: () => api.get("/products/export", { responseType: "blob" })
};
________________________________________
9.7. –§–æ—Ä–º—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ UX-–ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚Ä¢	React Hook Form –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º–∞–º–∏.
‚Ä¢	Zod –∏–ª–∏ Yup –¥–ª—è —Å—Ö–µ–º –≤–∞–ª–∏–¥–∞—Ü–∏–∏.
‚Ä¢	–ü–æ–ª—è —Ñ–æ—Ä–º –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (TextFieldControl, SelectControl) —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π RHF.
‚Ä¢	–ï–¥–∏–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ConfirmDialog –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π (—É–¥–∞–ª–µ–Ω–∏–µ, –≤–∞–∂–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏).
‚Ä¢	–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ SnackbarProvider.
// TextFieldControl.jsx (–ø—Ä–∏–º–µ—Ä)
import { Controller } from "react-hook-form";
import { TextField } from "@mui/material";

export default function TextFieldControl({ name, control, label, ...rest }) {
  return (
    <Controller
      name={name}
      control={control}
      render={({ field, fieldState }) => (
        <TextField
          {...field}
          label={label}
          error={!!fieldState.error}
          helperText={fieldState.error?.message}
          fullWidth
          {...rest}
        />
      )}
    />
  );
}
________________________________________
9.8. –¢–∞–±–ª–∏—Ü—ã –∏ –≥—Ä–∏–¥—ã (MUI DataGrid)
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
‚Ä¢	–ü–∞–≥–∏–Ω–∞—Ü–∏—è (—Å–µ—Ä–≤–µ—Ä–Ω–∞—è), —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞, —Ñ–∏–ª—å—Ç—Ä—ã.
‚Ä¢	–ü–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (page, pageSize, sort, filters).
‚Ä¢	–ú–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (bulk): —É–¥–∞–ª–∏—Ç—å, –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å.
‚Ä¢	–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
// ProductsList.jsx (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)
import { DataGrid } from "@mui/x-data-grid";
import { useEffect, useState } from "react";
import { productsService } from "../../services/products.service";

export default function ProductsList() {
  const [rows, setRows] = useState([]);
  const [pagination, setPagination] = useState({ page: 0, pageSize: 25, rowCount: 0 });
  const [loading, setLoading] = useState(false);

  const load = async () => {
    setLoading(true);
    const data = await productsService.list({ page: pagination.page + 1, page_size: pagination.pageSize });
    setRows(data.items);
    setPagination((p) => ({ ...p, rowCount: data.total }));
    setLoading(false);
  };

  useEffect(() => { load(); }, [pagination.page, pagination.pageSize]);

  const columns = [
    { field: "sku", headerName: "SKU", flex: 1 },
    { field: "name", headerName: "–ù–∞–∑–≤–∞–Ω–∏–µ", flex: 2 },
    { field: "price", headerName: "–¶–µ–Ω–∞", flex: 1, valueFormatter: (v) => `${v.value} ‚Ç∏` },
    { field: "stock", headerName: "–û—Å—Ç–∞—Ç–æ–∫", flex: 1 },
  ];

  return (
    <DataGrid
      rows={rows}
      columns={columns}
      loading={loading}
      paginationMode="server"
      paginationModel={pagination}
      onPaginationModelChange={setPagination}
      disableRowSelectionOnClick
      autoHeight
    />
  );
}
________________________________________
9.9. –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (Cloudinary)
–î–≤–∞ –ø–æ–¥—Ö–æ–¥–∞:
1.	Direct Upload —á–µ—Ä–µ–∑ –≤–∏–¥–∂–µ—Ç Cloudinary ‚Üí –≤–µ—Ä–Ω—É—Ç—å secure_url –∏ public_id; –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏—Ö –≤ API SmartSell –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ø—Ä–æ–¥—É–∫—Ç–µ.
2.	–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ –Ω–∞—à /products/{id}/image ‚Üí —Å–µ—Ä–≤–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ Cloudinary –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç.
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç ImageUploader.jsx –¥–æ–ª–∂–µ–Ω:
‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä;
‚Ä¢	–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–æ—Ä–º–∞—Ç/—Ä–∞–∑–º–µ—Ä;
‚Ä¢	–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å;
‚Ä¢	–≤–æ–∑–≤—Ä–∞—â–∞—Ç—å secure_url –Ω–∞–≤–µ—Ä—Ö –≤ —Ñ–æ—Ä–º—É.
________________________________________
9.10. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
‚Ä¢	–ì—Ä–∞—Ñ–∏–∫–∏ –ø—Ä–æ–¥–∞–∂/–≤—ã—Ä—É—á–∫–∏/–æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ Recharts –∏–ª–∏ react-chartjs-2.
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã –ø–µ—Ä–∏–æ–¥–∞ (–¥–∞—Ç–∞-–ø–∏–∫–µ—Ä—ã), –±—ã—Å—Ç—Ä—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã: 7/30/90 –¥–Ω–µ–π.
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (CSV/XLSX/PDF) ‚Äî —á–µ—Ä–µ–∑ API.
// AnalyticsPage.jsx (–æ—á–µ–Ω—å —É–∫—Ä—É–ø–Ω—ë–Ω–Ω–æ)
import { Line } from "react-chartjs-2";
export default function AnalyticsPage() {
  const data = { labels: ["–ü–Ω","–í—Ç","–°—Ä"], datasets: [{ label: "–í—ã—Ä—É—á–∫–∞", data: [100000, 120000, 90000] }] };
  return <Line data={data} />;
}
________________________________________
9.11. –ë–∏–ª–ª–∏–Ω–≥ –∏ –ø–ª–∞—Ç–µ–∂–∏ (TipTop Pay)
‚Ä¢	–°—Ç—Ä–∞–Ω–∏—Ü–∞ Plans: –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ (Start/Pro/Business), –∫–Ω–æ–ø–∫–∞ ¬´–û–ø–ª–∞—Ç–∏—Ç—å¬ª.
‚Ä¢	–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ‚Üí –≤—ã–∑–æ–≤ backend /payments/create ‚Üí –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤–∏–¥–∂–µ—Ç–∞ TipTop Pay.
‚Ä¢	–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤: —É—Å–ø–µ—à–Ω—ã–π –ø–ª–∞—Ç—ë–∂ ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏.
________________________________________
9.12. –†–∞—Å—Å—ã–ª–∫–∏ (Campaigns)
‚Ä¢	–°–ø–∏—Å–æ–∫ –∫–∞–º–ø–∞–Ω–∏–π, —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: –∫–∞–Ω–∞–ª (WA/Email/TG), —Ç–µ–∫—Å—Ç/—à–∞–±–ª–æ–Ω, —Å–µ–≥–º–µ–Ω—Ç (JSON-—É—Å–ª–æ–≤–∏—è), –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç 800, –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º (22:00‚Äì08:00).
‚Ä¢	–õ–æ–≥–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫: —Ç–∞–±–ª–∏—Ü–∞ –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º (—Å—Ç–∞—Ç—É—Å, –æ—à–∏–±–∫–∞, –≤—Ä–µ–º—è).
________________________________________
9.13. –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (a11y) –∏ UX-–¥–µ—Ç–∞–ª–∏
‚Ä¢	–ö–æ–Ω—Ç—Ä–∞—Å—Ç—ã –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–æ–≤ (MUI Theme).
‚Ä¢	–ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã: tabIndex, aria-* –∞—Ç—Ä–∏–±—É—Ç—ã.
‚Ä¢	–°–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ (Skeleton), –ø—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –æ—à–∏–±–∫–∏ —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.
‚Ä¢	–ï–¥–∏–Ω—ã–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑—Ä—É—à–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
________________________________________
9.14. –¢–µ–º–∞ –∏ —Å—Ç–∏–ª–∏
–ï–¥–∏–Ω—ã–π MUI Theme:
‚Ä¢	–ü–∞–ª–∏—Ç—Ä–∞ (light/dark).
‚Ä¢	–¢–∏–ø–æ–≥—Ä–∞—Ñ–∏–∫–∞ (–∑–∞–≥–æ–ª–æ–≤–∫–∏/—Ç–µ–∫—Å—Ç).
‚Ä¢	–†–∞–∑–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –æ—Ç—Å—Ç—É–ø—ã.
‚Ä¢	–ö–∞—Å—Ç–æ–º–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–Ω–æ–ø–æ–∫ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–û–ø–ª–∞—Ç–∏—Ç—å¬ª, ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª, ¬´–£–¥–∞–ª–∏—Ç—å¬ª).
// muiTheme.js
import { createTheme } from "@mui/material/styles";
export const theme = createTheme({
  palette: { mode: "light", primary: { main: "#1976d2" } },
  components: { MuiButton: { defaultProps: { variant: "contained" } } }
});
________________________________________
9.15. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏–π (Vite)
‚Ä¢	.env —Ñ–∞–π–ª—ã:
o	.env.development ‚Äî VITE_API_URL=http://localhost:8000/api
o	.env.production ‚Äî VITE_API_URL=https://api.smartsell.kz/api
–°–µ–∫—Ä–µ—Ç—ã –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (–æ–Ω –ø—É–±–ª–∏—á–µ–Ω). –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
________________________________________
9.16. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞: –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ HttpOnly cookie (–µ—Å–ª–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –ø–æ–ª–∏—Ç–∏–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞); –∏–Ω–∞—á–µ localStorage —Å –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ—Å—Ç—å—é.
‚Ä¢	CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø—Ä–æ–∫—Å–∏ (Nginx/Caddy).
‚Ä¢	–ó–∞–ø—Ä–µ—Ç inline-—Å–∫—Ä–∏–ø—Ç–æ–≤, eval.
‚Ä¢	–ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª—å.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º —á–µ—Ä–µ–∑ Guards + –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ API.
________________________________________
9.17. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ —Ç–µ—Å—Ç—ã (Jest + React Testing Library).
‚Ä¢	Integration: –º–æ–∫ –æ—Å–∏/axios, –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ñ–æ—Ä–º —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏.
‚Ä¢	E2E: Playwright/Cypress ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (–ª–æ–≥–∏–Ω, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –æ–ø–ª–∞—Ç–∞, —Ä–∞—Å—Å—ã–ª–∫–∞).
________________________________________
9.18. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚Ä¢	–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (lazy load —Å—Ç—Ä–∞–Ω–∏—Ü).
‚Ä¢	–ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂—ë–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (React.memo, useMemo, useCallback).
‚Ä¢	–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü.
‚Ä¢	–ö—ç—à –∑–∞–ø—Ä–æ—Å–æ–≤ (–æ–ø—Ü. ‚Äî React Query/TanStack Query).
________________________________________
9.19. –°–±–æ—Ä–∫–∞ –∏ –¥–µ–ø–ª–æ–π
‚Ä¢	–°–±–æ—Ä–∫–∞ vite build ‚Üí –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã).
‚Ä¢	–†–∞–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ Nginx/Caddy (gzip/brotli).
‚Ä¢	–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–∫—Å–∏ /api ‚Üí app:8000.
‚Ä¢	–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–æ–≤; –∫–µ—à-–±–∞—Å—Ç–µ—Ä (hash –≤ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–æ–≤).
________________________________________
9.20. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è
‚Ä¢	–ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫ (ErrorBoundary) –¥–ª—è UI.
‚Ä¢	–õ–æ–≥–∏ —Ñ—Ä–æ–Ω—Ç–∞ (Sentry/–∞–Ω–∞–ª–æ–≥–∏) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.
‚Ä¢	–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Web Vitals) ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ.

–ß–∞—Å—Ç—å 10/20 ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ OTP (Mobizon), –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
10.1. –¶–µ–ª–∏ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
‚Ä¢	–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º OTP (—á–µ—Ä–µ–∑ Mobizon).
‚Ä¢	–î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø–æ—Ç–æ–∫:
1.	–∑–∞–ø—Ä–æ—Å –∫–æ–¥–∞ (OTP) ‚Üí SMS;
2.	–≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ ‚Üí –≤—ã–¥–∞—á–∞ JWT (access[, refresh]).
‚Ä¢	–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ä–æ–ª—è–º–∏ (admin, manager, storekeeper, analyst) –∏ –º—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å—é (–æ–ø—Ü. company_id).
‚Ä¢	–ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π: rate-limit, –∞–Ω—Ç–∏-–±—Ä—É—Ç—Ñ–æ—Ä—Å, TTL –∫–æ–¥–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫.
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ: –ø–∞—Ä–æ–ª–µ–π (–µ—Å–ª–∏ –µ—Å—Ç—å), OTP-–∫–æ–¥–æ–≤ (–≤ –≤–∏–¥–µ hash), —Ç–æ–∫–µ–Ω–æ–≤ (–º–∏–Ω–∏–º—É–º –≤ –ø–∞–º—è—Ç–∏, –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å).
‚Ä¢	–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (re-OTP) –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Å–º–µ–Ω–∞ –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤ –∏ —Ç.–ø.).
________________________________________
10.2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ—Ç–æ–∫–∏ (UX)
–ü–æ—Ç–æ–∫ A: –ø–µ—Ä–≤–∏—á–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
1.	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–ª–µ—Ñ–æ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Login.
2.	–ù–∞–∂–∏–º–∞–µ—Ç ¬´–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥¬ª ‚Üí —Ñ—Ä–æ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç POST /api/auth/login.
3.	–ü–æ–ª—É—á–∞–µ—Ç SMS —Å 6-–∑–Ω–∞—á–Ω—ã–º –∫–æ–¥–æ–º. –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –∏ —Ç–∞–π–º–µ—Ä (5 –º–∏–Ω—É—Ç).
4.	–í–≤–æ–¥–∏—Ç –∫–æ–¥ ‚Üí POST /api/auth/verify.
5.	–ü—Ä–∏ —É—Å–ø–µ—Ö–µ ‚Äî –ø–æ–ª—É—á–∞–µ—Ç access (–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ refresh) —Ç–æ–∫–µ–Ω, –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ä–æ–ª—å.
6.	–†–µ–¥–∏—Ä–µ–∫—Ç –≤ /dashboard.
–ü–æ—Ç–æ–∫ B: –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—Ö–æ–¥
‚Ä¢	–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ, –Ω–æ –±–µ–∑ –≤–≤–æ–¥–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π ‚Äî —Ç–æ–ª—å–∫–æ —Ç–µ–ª–µ—Ñ–æ–Ω ‚Üí –∫–æ–¥ ‚Üí –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è.
–ü–æ—Ç–æ–∫ C: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (re-OTP)
‚Ä¢	–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ ¬´—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö¬ª –¥–µ–π—Å—Ç–≤–∏–π (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π, —ç–∫—Å–ø–æ—Ä—Ç –±–∞–∑—ã) —Ñ—Ä–æ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç /api/auth/reverify (–∏–ª–∏ —Ç–æ—Ç –∂–µ /verify —Å –∏–Ω—ã–º purpose), –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∫–æ–¥.
________________________________________
10.3. API (FastAPI, app/routers/auth.py)
10.3.1. POST /api/auth/login ‚Äî –∑–∞–ø—Ä–æ—Å OTP
–ó–∞–ø—Ä–æ—Å
{ "phone": "+77001234567", "purpose": "login" }
‚Ä¢	purpose ‚àà {login, reverify, change_sensitive_settings} ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é login.
–õ–æ–≥–∏–∫–∞
‚Ä¢	–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (E.164).
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ rate-limit: ‚â§ 5 SMS/—á–∞—Å –Ω–∞ –Ω–æ–º–µ—Ä, ‚â§ 10/—Å—É—Ç–∫–∏/IP.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞, TTL=300 —Å–µ–∫.
‚Ä¢	–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ hash –∫–æ–¥–∞ (bcrypt/argon2id) –≤ otp_attempts, + —Å—á—ë—Ç—á–∏–∫–∏ –ø–æ–ø—ã—Ç–æ–∫/–æ—Ç–ø—Ä–∞–≤–æ–∫.
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Mobizon (—Å–º. ¬ß10.6).
‚Ä¢	–û—Ç–≤–µ—Ç –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π (–Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—Ç—å, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å).
–û—Ç–≤–µ—Ç
{ "status": "ok", "ttl": 300 }
10.3.2. POST /api/auth/verify ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∏ –≤—ã–¥–∞—á–∞ JWT
–ó–∞–ø—Ä–æ—Å
{ "phone": "+77001234567", "code": "123456", "purpose": "login" }
–õ–æ–≥–∏–∫–∞
‚Ä¢	–ù–∞–π—Ç–∏ –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–ø–∏—Å—å –≤ otp_attempts –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ purpose —Å expires_at > now().
‚Ä¢	–°—Ä–∞–≤–Ω–∏—Ç—å code —Å code_hash.
‚Ä¢	–£–º–µ–Ω—å—à–∏—Ç—å attempts_left; –ø—Ä–∏ 0 ‚Üí –±–ª–æ–∫ –¥–æ –∫–æ–Ω—Ü–∞ TTL.
‚Ä¢	–ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫:
o	–°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è/–ø—Ä–∏–≤—è–∑–∞—Ç—å –∫ company_id, –µ—Å–ª–∏ –Ω–æ–≤—ã–π (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å).
o	–í—ã–¥–∞—Ç—å JWT: access (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 –º–∏–Ω), –æ–ø—Ü. refresh (7‚Äì30 –¥–Ω–µ–π).
o	–û—á–∏—Å—Ç–∏—Ç—å/–ø–æ–º–µ—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—É—é –∑–∞–ø–∏—Å—å OTP.
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ audit_log (—Ç–∏–ø login).
–û—Ç–≤–µ—Ç
{
  "access_token": "<JWT>",
  "token_type": "bearer",
  "expires_in": 1800,
  "user": {
    "id": 123,
    "phone": "+77001234567",
    "role": "manager",
    "company_id": 45
  }
}
10.3.3. POST /api/auth/refresh ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access –ø–æ refresh (–æ–ø—Ü.)
–ó–∞–ø—Ä–æ—Å
{ "refresh_token": "<JWT_REFRESH>" }
–û—Ç–≤–µ—Ç
{ "access_token": "<JWT>", "token_type": "bearer", "expires_in": 1800 }
10.3.4. POST /api/auth/logout ‚Äî –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è refresh (–æ–ø—Ü.)
‚Ä¢	–ß—ë—Ä–Ω—ã–π —Å–ø–∏—Å–æ–∫/—Ä–æ—Ç–∞—Ü–∏—è refresh-—Ç–æ–∫–µ–Ω–æ–≤.
‚Ä¢	–î–ª—è cookie-—Å—Ö–µ–º—ã ‚Äî –∑–∞—á–∏—â–∞–µ—Ç cookie.
________________________________________
10.4. –ú–æ–¥–µ–ª–∏ –ë–î (–∞–∫—Ü–µ–Ω—Ç—ã)
10.4.1. otp_attempts
–ü–æ–ª—è:
‚Ä¢	phone (string, idx),
‚Ä¢	purpose (string),
‚Ä¢	code_hash,
‚Ä¢	expires_at (tz),
‚Ä¢	attempts_left (int, default=5),
‚Ä¢	sent_count_hour (int), sent_count_day (int),
‚Ä¢	created_at, updated_at.
–ò–Ω–¥–µ–∫—Å—ã: (phone, purpose, expires_at).
10.4.2. users
–ü–æ–ª—è: phone (UNIQUE), email (UNIQUE, nullable), role (enum), company_id (nullable), is_active (bool), created_at, ‚Ä¶
10.4.3. audit_log
–§–∏–∫—Å–∏—Ä—É–µ—Ç login, verify, reverify, IP, user-agent, user_id.
________________________________________
10.5. –°—Ö–µ–º—ã (Pydantic, app/schemas/auth.py)
from pydantic import BaseModel, Field

class LoginRequest(BaseModel):
    phone: str = Field(min_length=5, max_length=32)
    purpose: str | None = "login"

class VerifyRequest(BaseModel):
    phone: str
    code: str = Field(min_length=4, max_length=8)
    purpose: str | None = "login"

class TokenResponse(BaseModel):
    access_token: str
    token_type: str = "bearer"
    expires_in: int
    user: dict
________________________________________
10.6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Mobizon (OTP) (app/services/mobizon_service.py)
‚Ä¢	HTTP-–∫–ª–∏–µ–Ω—Ç: httpx.AsyncClient (—Ç–∞–π–º–∞—É—Ç, —Ä–µ—Ç—Ä–∞–∏).
‚Ä¢	–®–∞–±–ª–æ–Ω —Ç–µ–∫—Å—Ç–∞: ¬´–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è SmartSell: 123456. –î–µ–π—Å—Ç–≤—É–µ—Ç 5 –º–∏–Ω—É—Ç.¬ª
‚Ä¢	–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è: RU/KZ (–æ–ø—Ü.).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–∞/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –æ—Ç–ø—Ä–∞–≤–∫–∏, –Ω–µ —Ç–µ–∫—Å—Ç–∞ –∫–æ–¥–∞.
async def send_otp(phone: str, text: str) -> dict:
    payload = {"recipient": phone, "text": text, "from": "SmartSell"}
    # –í—ã–∑–æ–≤ Mobizon API (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞); –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å json
________________________________________
10.7. –ê–Ω—Ç–∏—Å–ø–∞–º –∏ –∑–∞—â–∏—Ç–∞
‚Ä¢	Rate-limit:
o	–Ω–∞ POST /auth/login: ‚â§ 1 –∑–∞–ø—Ä–æ—Å / 30 —Å–µ–∫ –Ω–∞ –Ω–æ–º–µ—Ä; ‚â§ 5 SMS/—á–∞—Å; ‚â§ 10/—Å—É—Ç–∫–∏/IP.
o	–Ω–∞ POST /auth/verify: ‚â§ 10 –ø–æ–ø—ã—Ç–æ–∫ –Ω–∞ –æ–¥–Ω–æ –æ–∫–Ω–æ TTL; –ø–æ—Å–ª–µ ‚Äî –±–ª–æ–∫ –¥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
‚Ä¢	TTL: 300 —Å–µ–∫ (5 –º–∏–Ω), –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ.
‚Ä¢	Hash –∫–æ–¥–∞: —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ code_hash, –≤ –æ—Ç–≤–µ—Ç–∞—Ö –Ω–µ —Å–≤–µ—Ç–∏—Ç—å –¥–µ—Ç–∞–ª–∏.
‚Ä¢	IP-–∫–æ–Ω—Ç—Ä–æ–ª—å: —Ö—Ä–∞–Ω–∏—Ç—å ip/user-agent –≤ otp_attempts –¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π.
‚Ä¢	–ö–∞–ø—á–∞ (–æ–ø—Ü.) –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö —Å –æ–¥–Ω–æ–≥–æ IP/—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞.
________________________________________
10.8. JWT –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (app/core/security.py)
‚Ä¢	–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: python-jose –∏–ª–∏ fastapi-jwt-auth.
‚Ä¢	–ê–ª–≥–æ—Ä–∏—Ç–º: HS256 (–¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã) –∏–ª–∏ RS256 (–∫–ª—é—á–µ–≤–∞—è –ø–∞—Ä–∞).
‚Ä¢	–ö–ª–µ–π–º—ã:
o	sub = user_id,
o	role,
o	company_id (–µ—Å–ª–∏ –º—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å),
o	exp ‚Äî —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏.
‚Ä¢	Access: 15‚Äì60 –º–∏–Ω; Refresh: 7‚Äì30 –¥–Ω–µ–π.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ:
o	–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ: HttpOnly, Secure, SameSite cookies (—Å–µ—Ä–≤–µ—Ä –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç Set-Cookie);
o	–¥–æ–ø—É—Å—Ç–∏–º–æ: localStorage (–ø–æ–Ω–∏–∂–µ–Ω–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å; –Ω—É–∂–Ω—ã CSP, –∑–∞—â–∏—Ç–∞ –æ—Ç XSS).
–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI
from fastapi import Depends, HTTPException
from jose import jwt, JWTError

def get_current_user(...):
    # –∏–∑–≤–ª–µ—á—å –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å access –∏–∑ Authorization: Bearer
    # –ø–æ–¥–Ω—è—Ç—å 401 –ø—Ä–∏ –æ—à–∏–±–∫–µ, 403 –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –ø—Ä–∞–≤
________________________________________
10.9. –§—Ä–æ–Ω—Ç–µ–Ω–¥: —ç–∫—Ä–∞–Ω—ã –∏ UX-–¥–µ—Ç–∞–ª–∏
10.9.1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ Login
‚Ä¢	–ü–æ–ª–µ phone —Å –º–∞—Å–∫–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, +7 (700) 123-45-67).
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥¬ª ‚Üí –≤—ã–∑–æ–≤ authService.login(phone).
‚Ä¢	–î–∏–∑–µ–π–±–ª –∫–Ω–æ–ø–∫–∏ –Ω–∞ 30 —Å–µ–∫ (–ª–æ–∫–∞–ª—å–Ω—ã–π rate-limit), –ø–æ–∫–∞–∑–∞—Ç—å —Ç–∞–π–º–µ—Ä –¥–æ –ø–æ–≤—Ç–æ—Ä–∞.
‚Ä¢	–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: ¬´–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ¬ª, ¬´–ù–µ–≤–µ—Ä–Ω—ã–π –Ω–æ–º–µ—Ä¬ª.
10.9.2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ OtpVerify
‚Ä¢	–ü–æ–ª–µ –≤–≤–æ–¥–∞ 6-–∑–Ω–∞—á–Ω–æ–≥–æ –∫–æ–¥–∞ (–æ–¥–∏–Ω input –∏–ª–∏ 6 —è—á–µ–µ–∫).
‚Ä¢	–¢–∞–π–º–µ—Ä ¬´–ö–æ–¥ –¥–µ–π—Å—Ç–≤—É–µ—Ç: 04:59¬ª; –∫–Ω–æ–ø–∫–∞ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –ø–æ–≤—Ç–æ—Ä–Ω–æ¬ª ‚Äî –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ—Å–ª–µ 60 —Å–µ–∫.
‚Ä¢	–ü—Ä–∏ –≤–≤–æ–¥–µ ‚Üí authService.verifyOtp(phone, code); —É—Å–ø–µ—Ö ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã/–ø—Ä–æ—Ñ–∏–ª—å, —Ä–µ–¥–∏—Ä–µ–∫—Ç.
10.9.3. –û–±—â–µ–µ
‚Ä¢	–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è; –ª–æ–∫–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –º–∞—Å–∫–µ.
‚Ä¢	–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö ‚Äî –±–µ–∑ —É—Ç–µ—á–∫–∏ –Ω–∞–ª–∏—á–∏—è/–æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ (¬´–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –µ—Å–ª–∏ –Ω–æ–º–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω¬ª ‚Äî –æ–±—Å—É–∂–¥–∞–µ–º–æ; –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–æ–ø—É—Å—Ç–∏–º –ø—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç, —Ç–∞–∫ –∫–∞–∫ B2B).
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–í—ã–π—Ç–∏¬ª ‚Äî –æ—á–∏—â–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login.
________________________________________
10.10. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ (–±—ç–∫–µ–Ω–¥, —É–∫—Ä—É–ø–Ω—ë–Ω–Ω–æ)
# app/routers/auth.py
from fastapi import APIRouter, Depends, HTTPException
from app.schemas.auth import LoginRequest, VerifyRequest, TokenResponse
from app.services.mobizon_service import send_otp
from app.core.security import create_access_token, create_refresh_token
from app.core.db import get_db
from sqlalchemy.ext.asyncio import AsyncSession
from datetime import datetime, timedelta, timezone
from app.models.otp import OtpAttempt
from app.models.user import User

router = APIRouter()

@router.post("/login")
async def login(payload: LoginRequest, db: AsyncSession = Depends(get_db)):
    phone = normalize_phone(payload.phone)
    # rate-limit checks...
    code = generate_otp()
    code_hash = hash_code(code)
    expires = datetime.now(timezone.utc) + timedelta(minutes=5)

    attempt = OtpAttempt(phone=phone, code_hash=code_hash, expires_at=expires, attempts_left=5)
    db.add(attempt)
    await db.commit()

    await send_otp(phone, f"–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è SmartSell: {code}. –î–µ–π—Å—Ç–≤—É–µ—Ç 5 –º–∏–Ω—É—Ç.")
    return {"status": "ok", "ttl": 300}

@router.post("/verify", response_model=TokenResponse)
async def verify(payload: VerifyRequest, db: AsyncSession = Depends(get_db)):
    phone = normalize_phone(payload.phone)
    attempt = await find_active_attempt(db, phone)
    if not attempt or attempt.expires_at < datetime.now(timezone.utc):
        raise HTTPException(400, "–ö–æ–¥ –∏—Å—Ç—ë–∫ –∏–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω")

    if not verify_code(payload.code, attempt.code_hash):
        await decrement_attempts(db, attempt)
        raise HTTPException(400, "–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥")

    user = await get_or_create_user(db, phone)
    access = create_access_token({"sub": str(user.id), "role": user.role, "company_id": user.company_id})
    refresh = create_refresh_token({"sub": str(user.id)})

    await mark_attempt_used(db, attempt)

    return {
        "access_token": access,
        "token_type": "bearer",
        "expires_in": 1800,
        "user": {"id": user.id, "phone": user.phone, "role": user.role, "company_id": user.company_id}
    }
________________________________________
10.11. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –∞—É–¥–∏—Ç
‚Ä¢	–í—Å–µ 4xx/5xx –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ JSON —Å –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–º ID (trace id).
‚Ä¢	–ê—É–¥–∏—Ç: —É—Å–ø–µ—à–Ω—ã–µ –∏ –Ω–µ—É—Å–ø–µ—à–Ω—ã–µ –≤—Ö–æ–¥—ã, re-OTP, —Å–º–µ–Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫.
‚Ä¢	–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –Ω–æ–º–µ—Ä–∞ –ø–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—é –ª–∏–º–∏—Ç–æ–≤ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ audit_log.
________________________________________
10.12. –ü–æ–ª–∏—Ç–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∏ —Å–±—Ä–æ—Å–∞
‚Ä¢	–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞: —Ä–∞–∑—Ä–µ—à–∏—Ç—å –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑–∞ –≤ 60 —Å–µ–∫, –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–±—â–µ–≥–æ –ª–∏–º–∏—Ç–∞/—á–∞—Å/—Å—É—Ç–∫–∏.
‚Ä¢	–°–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–æ–≤:
o	sent_count_hour ‚Äî –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç;
o	sent_count_day ‚Äî –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞;
o	–æ—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –∑–∞–ø–∏—Å–µ–π otp_attempts job-–æ–º (–∫—Ä–æ–Ω/–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫).
________________________________________
10.13. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–¥–∞, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, rate-limit –ª–æ–≥–∏–∫–∏.
‚Ä¢	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API:
o	–Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (login ‚Üí verify);
o	–Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥;
o	–∏—Å—Ç–µ–∫—à–∏–π –∫–æ–¥;
o	–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤;
o	–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞;
o	–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (re-OTP).
‚Ä¢	–ú–æ–∫–∏ Mobizon-API (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã/–æ—à–∏–±–∫–∏).
________________________________________
10.14. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
‚Ä¢	–ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏ –Ω–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ OTP-–∫–æ–¥—ã.
‚Ä¢	–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ ‚Äî –≤–∫–ª—é—á—ë–Ω TLS (HTTPS) –Ω–∞ –≤—Å—ë–º –ø—É—Ç–∏.
‚Ä¢	–°–µ–∫—Ä–µ—Ç—ã Mobizon, JWT-–∫–ª—é—á–∏ ‚Äî —Ç–æ–ª—å–∫–æ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è/–º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–µ–∫—Ä–µ—Ç–æ–≤.
‚Ä¢	–£–¥–∞–ª–µ–Ω–∏–µ/–∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ó–∞–∫–æ–Ω –†–ö –æ –ü–î).

–ß–∞—Å—Ç—å 11/20 ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –º–µ–¥–∏–∞
11.1. –¶–µ–ª–∏ –∏ –æ—Ö–≤–∞—Ç
–ú–æ–¥—É–ª—å –∫–∞—Ç–∞–ª–æ–≥–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ç–æ–≤–∞—Ä–∞:
‚Ä¢	CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Ç–æ–≤–∞—Ä–∞–º–∏;
‚Ä¢	—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) —á–µ—Ä–µ–∑ Cloudinary;
‚Ä¢	–∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ Excel (xlsx);
‚Ä¢	–±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è (–º–∏–Ω/–º–∞–∫—Å, –¥–µ–º–ø–∏–Ω–≥);
‚Ä¢	–ø—Ä–µ–¥–∑–∞–∫–∞–∑—ã (–¥–æ 30 –¥–Ω–µ–π);
‚Ä¢	–∏—Å–∫–ª—é—á–µ–Ω–∏–µ ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤¬ª –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–π —Ü–µ–Ω;
‚Ä¢	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –≤ —Å–≤—è–∑–∫–µ —Å–æ —Å–∫–ª–∞–¥–∞–º–∏ (—Å–º. –ß–∞—Å—Ç—å 14/20).
________________________________________
11.2. –°—É—â–Ω–æ—Å—Ç–∏ –∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
11.2.1. Product (—Å–º. –ß–∞—Å—Ç—å 8/20)
–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:
‚Ä¢	company_id ‚Äî –∞—Ä–µ–Ω–¥–∞—Ç–æ—Ä (–µ—Å–ª–∏ –º—É–ª—å—Ç–∏-–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å);
‚Ä¢	sku ‚Äî –∞—Ä—Ç–∏–∫—É–ª (—É–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏);
‚Ä¢	name, description;
‚Ä¢	price, min_price, max_price (Decimal, 14,2);
‚Ä¢	image_url, image_public_id (Cloudinary);
‚Ä¢	is_active (bool);
‚Ä¢	—Å–≤—è–∑–∏: ProductStock (–æ—Å—Ç–∞—Ç–∫–∏ –ø–æ —Å–∫–ª–∞–¥–∞–º), OrderItem (–∏—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–¥–∞–∂).
–ü—Ä–∞–≤–∏–ª–∞:
‚Ä¢	–ï—Å–ª–∏ –∑–∞–¥–∞–Ω—ã min_price/max_price, —Ç–æ –≤—Å–µ–≥–¥–∞ min_price ‚â§ price ‚â§ max_price.
‚Ä¢	–ò–∑–º–µ–Ω–µ–Ω–∏–µ sku –¥–æ–ø—É—Å—Ç–∏–º–æ, –µ—Å–ª–∏ –Ω–µ –Ω–∞—Ä—É—à–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å.
‚Ä¢	–£–¥–∞–ª–µ–Ω–∏–µ: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é soft-delete —á–µ—Ä–µ–∑ deleted_at.
11.2.2. FriendlyStoreRule (–æ–ø—Ü., –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞)
–ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö¬ª –º–∞–≥–∞–∑–∏–Ω–æ–≤/–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏/–¥–µ–º–ø–∏–Ω–≥–µ.
–ü–æ–ª—è: company_id, external_store_id (–∏–ª–∏ URL/—Ä–µ–≥—ç–∫—Å–ø), comment.
________________________________________
11.3. API (FastAPI, app/routers/products.py)
–ü—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ: /api/products
11.3.1. –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
GET /api/products
‚Ä¢	–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: page (1..), page_size (‚â§100), query (–ø–æ–∏—Å–∫ –ø–æ sku|name), is_active, –¥–∏–∞–ø–∞–∑–æ–Ω—ã price_from/price_to, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ sort (name.asc, price.desc, created_at.desc –∏ —Ç.–ø.).
‚Ä¢	–û—Ç–≤–µ—Ç:
{
  "items": [ { "id":1, "sku":"A-100", "name":"–¢–æ–≤–∞—Ä", "price": 1000.00, "image_url": "...", "is_active": true } ],
  "total": 523,
  "page": 1,
  "page_size": 25
}
11.3.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
POST /api/products
‚Ä¢	–í—Ö–æ–¥: ProductCreate (—Å–º. –ß–∞—Å—Ç—å 8/20).
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∏:
o	—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å sku –≤ —Ä–∞–º–∫–∞—Ö company_id;
o	–≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ü–µ–Ω (–¥–∏–∞–ø–∞–∑–æ–Ω);
o	–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ (–æ–±—Ä–µ–∑–∫–∞ –ø—Ä–æ–±–µ–ª–æ–≤, –ª–∏–º–∏—Ç—ã –¥–ª–∏–Ω—ã).
‚Ä¢	–û—Ç–≤–µ—Ç: ProductOut.
11.3.3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
GET /api/products/{id}
‚Ä¢	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Ç–æ–≤–∞—Ä–∞, –≤–∫–ª—é—á–∞—è min/max/price, image_url, –æ—Å—Ç–∞—Ç–∫–∏ (–æ–ø—Ü. —Å —Ñ–ª–∞–≥–æ–º include_stocks=true).
11.3.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (—á–∞—Å—Ç–∏—á–Ω–æ–µ)
PATCH /api/products/{id}
‚Ä¢	–í—Ö–æ–¥: ProductUpdate.
‚Ä¢	–õ–æ–≥–∏–∫–∞: —á–∞—Å—Ç–∏—á–Ω—ã–π –∞–ø–¥–µ–π—Ç; –ø–µ—Ä–µ—Å—á—ë—Ç/–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω; –∞—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.
‚Ä¢	–û—Ç–≤–µ—Ç: ProductOut.
11.3.5. –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
DELETE /api/products/{id}
‚Ä¢	–°—Ç–∞–≤–∏—Ç deleted_at –∏ is_active=false.
‚Ä¢	–ï—Å–ª–∏ –µ—Å—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ OrderItem, —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–æ (—Ç–æ–ª—å–∫–æ soft-delete).
11.3.6. –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
POST /api/products/bulk
‚Ä¢	–û–ø–µ—Ä–∞—Ü–∏–∏: –º–∞—Å—Å–æ–≤–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω (–ø—Ä–æ—Ü–µ–Ω—Ç–æ–º/–∞–±—Å–æ–ª—é—Ç–Ω–æ), –ø–µ—Ä–µ–Ω–æ—Å –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å –º–æ–¥—É–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚â§1000 id).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ audit_log —Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ id.
________________________________________
11.4. –ú–µ–¥–∏–∞: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Cloudinary
11.4.1. –ü–æ–¥—Ö–æ–¥—ã –∫ –∑–∞–≥—Ä—É–∑–∫–µ
1.	Direct Upload (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
o	–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ ‚Äî –≤–∏–¥–∂–µ—Ç Cloudinary; —Ñ–∞–π–ª –ø–æ–ø–∞–¥–∞–µ—Ç –ø—Ä—è–º–æ –≤ Cloudinary.
o	–í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è secure_url –∏ public_id.
o	–§—Ä–æ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç PATCH /api/products/{id} —Å —ç—Ç–∏–º–∏ –ø–æ–ª—è–º–∏.
o	–ü–ª—é—Å—ã: –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –Ω–∞—à app, –±—ã—Å—Ç—Ä–µ–µ, –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.
2.	–ß–µ—Ä–µ–∑ –Ω–∞—à —Å–µ—Ä–≤–µ—Ä (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞):
o	POST /api/products/{id}/image —Å multipart/form-data.
o	app/services/cloudinary_service.py –∑–∞–ª–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ Cloudinary.
o	–°–æ—Ö—Ä–∞–Ω—è–µ–º secure_url, public_id –≤ Product.
11.4.2. –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚Ä¢	POST /api/products/{id}/image
o	–í—Ö–æ–¥: —Ñ–∞–π–ª (file), –æ–ø—Ü. folder (–ø–æ –∫–æ–º–ø–∞–Ω–∏–∏/—Å—Ä–µ–¥–µ).
o	–ü—Ä–æ–≤–µ—Ä–∫–∏: —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ (jpg/png/webp), —Ä–∞–∑–º–µ—Ä ‚â§ 5 –ú–ë, —Ç–∏–ø image/*.
o	–û—Ç–≤–µ—Ç:
‚Ä¢	{ "image_url": "https://res.cloudinary.com/.../image.jpg", "image_public_id": "smartsell/abc123" }
‚Ä¢	DELETE /api/products/{id}/image
o	–£–¥–∞–ª—è–µ—Ç –∏–∑ Cloudinary –ø–æ public_id, –æ–±–Ω—É–ª—è–µ—Ç –ø–æ–ª—è –≤ Product.
o	–í —Å–ª—É—á–∞–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Cloudinary ‚Äî –º—è–≥–∫–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è (–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É, –¥–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–∏—Ç—å).
11.4.3. –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –º–∏–Ω–∏–∞—Ç—é—Ä—ã
‚Ä¢	–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudinary URL-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–Ω—ã—Ö –ø—Ä–µ–≤—å—é (w=300,h=300,c=fill,q=auto).
‚Ä¢	–û—Ä–∏–≥–∏–Ω–∞–ª —Ö—Ä–∞–Ω–∏—Ç—å –±–µ–∑ –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–∞ ‚Äî —Ä–µ–∑–∞–π–∑–∏—Ç—å —á–µ—Ä–µ–∑ CDN).
________________________________________
11.5. –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç Excel
11.5.1. –≠–∫—Å–ø–æ—Ä—Ç
GET /api/products/export
‚Ä¢	–ü–∞—Ä–∞–º–µ—Ç—Ä—ã: —Ç–µ –∂–µ —Ñ–∏–ª—å—Ç—Ä—ã, —á—Ç–æ –∏ –≤ —Å–ø–∏—Å–∫–µ (query, is_active, –¥–∏–∞–ø–∞–∑–æ–Ω—ã —Ü–µ–Ω).
‚Ä¢	–í—ã—Ö–æ–¥: —Ñ–∞–π–ª .xlsx —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
o	SKU, Name, Description, Price, MinPrice, MaxPrice, ImageURL, IsActive, CreatedAt, UpdatedAt.
‚Ä¢	–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
o	–õ–æ–∫–∞–ª—å —á–∏—Å–µ–ª ‚Äî —Ç–æ—á–∫–∞ –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏.
o	–ö–æ–¥–∏—Ä–æ–≤–∫–∞ ‚Äî UTF-8.
o	–î–∞—Ç–∞/–≤—Ä–µ–º—è ‚Äî ISO 8601 (UTC) –∏–ª–∏ –ª–æ–∫–∞–ª—å –ø—Ä–æ–µ–∫—Ç–∞ (—Å —É–∫–∞–∑–∞–Ω–∏–µ–º —Ç–∞–π–º-–∑–æ–Ω—ã).
11.5.2. –ò–º–ø–æ—Ä—Ç
POST /api/products/import (multipart, file)
‚Ä¢	–û–∂–∏–¥–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç: xlsx —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏ –≤—ã—à–µ (–ø–æ—Ä—è–¥–æ–∫ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ–Ω, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º).
‚Ä¢	–†–µ–∂–∏–º: upsert –ø–æ SKU –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö company_id.
‚Ä¢	–ü—Ä–∞–≤–∏–ª–∞:
o	–ü—É—Å—Ç—ã–µ SKU ‚Äî —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.
o	Price –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω; –µ—Å–ª–∏ MinPrice/MaxPrice –∑–∞–¥–∞–Ω—ã, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª.
o	ImageURL –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Cloudinary –æ—Ç–¥–µ–ª—å–Ω–æ).
o	IsActive –ø—É—Å—Ç–æ ‚Üí –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true.
‚Ä¢	–û—à–∏–±–∫–∏:
o	–§–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞ –Ω–µ xlsx ‚Üí 400.
o	–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è ‚Üí –≤–µ—Ä–Ω—É—Ç—å JSON —Å –º–∞—Å—Å–∏–≤–æ–º —Å—Ç—Ä–æ–∫-–æ—à–∏–±–æ–∫ (—Å—Ç—Ä–æ–∫–∞, –∫–æ–ª–æ–Ω–∫–∞, –ø—Ä–∏—á–∏–Ω–∞).
‚Ä¢	–†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  "inserted": 120,
  "updated": 85,
  "skipped": 7,
  "errors": [
    { "row": 15, "column": "Price", "message": "Value must be >= 0" }
  ]
}
11.5.3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚Ä¢	–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞: —á–∏—Ç–∞—Ç—å xlsx –ø–∞—Ä—Ç–∏—è–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, openpyxl –∏–ª–∏ pandas –≤ —á–∞–Ω–∫–∞—Ö).
‚Ä¢	–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äî –ø–æ –±–∞—Ç—á–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 500 —Å—Ç—Ä–æ–∫).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚â§ 10 –ú–ë) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚â§ 50 000).
________________________________________
11.6. –î–µ–º–ø–∏–Ω–≥ —Ü–µ–Ω –∏ ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã¬ª
11.6.1. –°–±–æ—Ä —Ü–µ–Ω –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ (–≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç—É—Ä)
‚Ä¢	–ò—Å—Ç–æ—á–Ω–∏–∫: Kaspi/–¥—Ä—É–≥–∏–µ –ø–ª–æ—â–∞–¥–∫–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ API –∏–ª–∏ –≤—ã–≥—Ä—É–∑–∫–∞).
‚Ä¢	–ü–∞–π–ø–ª–∞–π–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–µ–Ω –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü—É competitor_prices:
o	company_id, sku/external_sku, store_id|store_url, price, currency, fetched_at.
‚Ä¢	–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ (company_id, sku, fetched_at desc).
11.6.2. –ò—Å–∫–ª—é—á–µ–Ω–∏—è (¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã¬ª)
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ friendly_store_rules: —Å–ø–∏—Å–æ–∫ store_id|url_pattern, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–∫–ª—é—á–∞—Ç—å –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.
‚Ä¢	–ü—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –¥–µ–º–ø–∏–Ω–≥–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ –∑–∞–ø–∏—Å–∏.
11.6.3. –†–∞—Å—á—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–π —Ü–µ–Ω—ã
‚Ä¢	–ü—Ä–∞–≤–∏–ª–æ: target_price = max(min_price || 0, min(competitor_min_price - delta, max_price || INF)).
‚Ä¢	delta ‚Äî —à–∞–≥ —Å–Ω–∏–∂–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1‚Äì50 ‚Ç∏ –∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç).
‚Ä¢	–ï—Å–ª–∏ competitor_min_price –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ‚Üí –Ω–µ –º–µ–Ω—è—Ç—å price.
‚Ä¢	–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –æ–ø—É—Å–∫–∞—Ç—å —Ü–µ–Ω—É –Ω–∏–∂–µ min_price.
‚Ä¢	–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–¥–Ω–∏–º–∞—Ç—å –≤—ã—à–µ max_price (–µ—Å–ª–∏ –∑–∞–¥–∞–Ω).
11.6.4. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω
‚Ä¢	–†—É—á–Ω–æ–π/–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º (—Ñ–ª–∞–≥ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏).
‚Ä¢	–ü—Ä–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º: –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π job (APScheduler), –∫–æ—Ç–æ—Ä—ã–π:
o	–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç target_price,
o	–ø—Ä–∏–º–µ–Ω—è–µ—Ç price —Ç–æ–≤–∞—Ä–∞–º, –≥–¥–µ price != target_price, –ª–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è (–∞—É–¥–∏—Ç),
o	–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ –±–æ–ª–µ–µ 2 —Ä–∞–∑/—Å—É—Ç–∫–∏ –ø–æ SKU).
‚Ä¢	–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∞—É–¥–∏—Ç (–∫—Ç–æ/–∫–æ–≥–¥–∞/—á—Ç–æ, —Å—Ç–∞—Ä–æ–µ/–Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ).
________________________________________
11.7. –ü—Ä–µ–¥–∑–∞–∫–∞–∑—ã (pre-orders)
11.7.1. –õ–æ–≥–∏–∫–∞
‚Ä¢	–î–ª—è —Ç–æ–≤–∞—Ä–∞ –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –ø—Ä–µ–¥–∑–∞–∫–∞–∑–∞ –Ω–∞ —Å—Ä–æ–∫ –Ω–µ –±–æ–ª–µ–µ 30 –¥–Ω–µ–π.
‚Ä¢	–ü–æ–ª—è (–≤ Product –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ product_preorders):
o	is_preorder_enabled (bool),
o	preorder_until (datetime, tz),
o	–æ–ø—Ü. preorder_deposit (Decimal) ‚Äî —Å—É–º–º–∞ –ø—Ä–µ–¥–æ–ø–ª–∞—Ç—ã,
o	–æ–ø—Ü. preorder_note ‚Äî —Ç–µ–∫—Å—Ç —É—Å–ª–æ–≤–∏—è.
11.7.2. –ü—Ä–æ–≤–µ—Ä–∫–∏
‚Ä¢	preorder_until > now() –∏ ‚â§ now()+30d.
‚Ä¢	–ï—Å–ª–∏ preorder_deposit –∑–∞–¥–∞–Ω ‚Äî 0 ‚â§ deposit ‚â§ price.
‚Ä¢	–ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ –≤ –ø–µ—Ä–∏–æ–¥ –ø—Ä–µ–¥–∑–∞–∫–∞–∑–∞:
o	–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ–ø–ª–∞—Ç–∞ ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–ª–∞—Ç—ë–∂ –Ω–∞ –¥–µ–ø–æ–∑–∏—Ç;
o	–æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω—É–ª–µ–≤—ã–º–∏ (—Ä–µ–∑–µ—Ä–≤ –ø—Ä–µ–¥–∑–∞–∫–∞–∑–∞ –ª–æ–≥–∏—á–µ—Å–∫–∏ –æ—Ç–¥–µ–ª—ë–Ω –æ—Ç ProductStock).
11.7.3. UX
‚Ä¢	–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ —Ç–æ–≤–∞—Ä –ø–æ–º–µ—á–∞–µ—Ç—Å—è ¬´–ü—Ä–µ–¥–∑–∞–∫–∞–∑ –¥–æ <–¥–∞—Ç–∞>¬ª.
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–ü—Ä–µ–¥–∑–∞–∫–∞–∑–∞—Ç—å¬ª; –ø–æ–¥—Å–∫–∞–∑–∫–∞ –æ–± —É—Å–ª–æ–≤–∏—è—Ö (–¥–µ–ø–æ–∑–∏—Ç, —Å—Ä–æ–∫ –æ—Ç–≥—Ä—É–∑–∫–∏).
‚Ä¢	–í –∑–∞–∫–∞–∑–µ —Å—Ç–∞—Ç—É—Å ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, confirmed –¥–æ –¥–∞—Ç—ã –æ—Ç–≥—Ä—É–∑–∫–∏; –ø—Ä–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –≤ –æ–±—ã—á–Ω—ã–π —Ñ–ª–æ—É.
________________________________________
11.8. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	SKU ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, —É–Ω–∏–∫–∞–ª–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö company_id; –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã ‚â§ 64.
‚Ä¢	name ‚Äî –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, ‚â§ 255 —Å–∏–º–≤–æ–ª–æ–≤.
‚Ä¢	price ‚Äî ‚â• 0; –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã min_price/max_price, —Ç–æ min_price ‚â§ price ‚â§ max_price.
‚Ä¢	–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ jpg|jpeg|png|webp, —Ä–∞–∑–º–µ—Ä ‚â§ 5 –ú–ë.
‚Ä¢	–ò–º–ø–æ—Ä—Ç:
o	–ø—Ä–æ–ø—É—Å–∫ —Å—Ç—Ä–æ–∫ —Å –ø—É—Å—Ç—ã–º SKU –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º Price;
o	–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —á–∏—Å–µ–ª/—Å—Ç—Ä–æ–∫;
o	–ª–æ–≥ –æ—à–∏–±–æ–∫ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ.
‚Ä¢	–ü—Ä–µ–¥–∑–∞–∫–∞–∑—ã ‚Äî —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—Ç—å –ª–∏–º–∏—Ç 30 –¥–Ω–µ–π.
‚Ä¢	–î–µ–º–ø–∏–Ω–≥ ‚Äî —É—á–∏—Ç—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è; –Ω–µ –æ–ø—É—Å–∫–∞—Ç—å –Ω–∏–∂–µ min_price.
________________________________________
11.9. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
‚Ä¢	400 Bad Request: –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç —Ñ–∞–π–ª–∞, –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω.
‚Ä¢	401 Unauthorized: –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç/–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JWT.
‚Ä¢	403 Forbidden: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ (—Ä–æ–ª—å).
‚Ä¢	404 Not Found: —Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω/—É–¥–∞–ª—ë–Ω.
‚Ä¢	409 Conflict: —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å SKU –Ω–∞—Ä—É—à–µ–Ω–∞.
‚Ä¢	413 Payload Too Large: –ø—Ä–µ–≤—ã—à–µ–Ω —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/Excel.
‚Ä¢	422 Unprocessable Entity: –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ Pydantic.
‚Ä¢	500 Internal Server Error: –æ–±—â–∏–π —Å–±–æ–π (–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å c correlation id).
________________________________________
11.10. –ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞: created/updated/deleted/image_uploaded/image_deleted/price_changed/bulk_updated/import/export.
‚Ä¢	–ü–æ–ª—è old_value/new_value –≤ audit_log —Ö—Ä–∞–Ω–∏—Ç—å –≤ JSON (—Å—Ç—Ä–æ–∫–∞).
‚Ä¢	–î–ª—è –∏–º–ø–æ—Ä—Ç–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–≤–æ–¥–Ω—ã–π –ª–æ–≥ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –≤—Å—Ç–∞–≤–æ–∫/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–π/–æ—à–∏–±–æ–∫.
________________________________________
11.11. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–ò–Ω–¥–µ–∫—Å—ã: products(company_id, sku), products(name), products(price), products(deleted_at NULLS FIRST).
‚Ä¢	–ü–∞–≥–∏–Ω–∞—Ü–∏—è ‚Äî —Ç–æ–ª—å–∫–æ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è; –ª–∏–º–∏—Ç—ã page_size.
‚Ä¢	–ú–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è ‚Äî –±–∞—Ç—á–∞–º–∏; —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ –ø–∞—Ä—Ç–∏—è–º.
‚Ä¢	–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ–ø—Ü.) —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –≤—ã–±–æ—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤) –Ω–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è.
________________________________________
11.12. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–Ω, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫, —Ä–∞–∑–±–æ—Ä Excel, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ¬´–¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤¬ª, —Ä–∞—Å—á—ë—Ç –¥–µ–º–ø–∏–Ω–≥–∞.
‚Ä¢	Integration: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–º–æ–∫–∏ Cloudinary), –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç Excel (–º–∞–ª—ã–µ –∏ —Å—Ä–µ–¥–Ω–∏–µ —Ñ–∞–π–ª—ã), CRUD.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–∏ UI ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ, –∏–º–ø–æ—Ä—Ç —Ñ–∞–π–ª–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–µ.
________________________________________
11.13. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π: —Å–æ–∑–¥–∞–≤–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã –º–æ–≥—É—Ç admin|manager.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –∑–∞–≥—Ä—É–∑–æ–∫ –∏ —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤.
‚Ä¢	–ó–∞—à–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö ‚Äî –æ–ø—Ü. –ø–æ sku).
‚Ä¢	–ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ë–î; —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∏.
‚Ä¢	–ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è ‚Äî –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å product.company_id —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
________________________________________
11.14. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
–°–æ–∑–¥–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
POST /api/products
Authorization: Bearer <token>
Content-Type: application/json

{
  "sku": "SKU-101",
  "name": "–ö–æ—Ñ—Ç–∞ –∂–µ–Ω—Å–∫–∞—è",
  "description": "–•–ª–æ–ø–æ–∫ 100%",
  "price": 14990.00,
  "min_price": 13990.00,
  "max_price": 16990.00
}
–ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä)
POST /api/products/42/image
Authorization: Bearer <token>
Content-Type: multipart/form-data

file=@/path/to/photo.webp
–ò–º–ø–æ—Ä—Ç Excel
POST /api/products/import
Authorization: Bearer <token>
Content-Type: multipart/form-data

file=@/path/to/catalog.xlsx
________________________________________
11.15. –ü—Å–µ–≤–¥–æ–∫–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª—é—á–µ–≤—ã—Ö —á–∞—Å—Ç–µ–π
# app/services/pricing_service.py
async def compute_target_price(product, competitor_prices, delta=10):
    relevant = [p for p in competitor_prices if not is_friendly_store(p.store_id, p.store_url)]
    if not relevant:
        return product.price
    comp_min = min(p.price for p in relevant)
    target = comp_min - delta
    if product.min_price is not None:
        target = max(target, product.min_price)
    if product.max_price is not None:
        target = min(target, product.max_price)
    return round_decimal(target)

# app/routers/products.py (—Ñ—Ä–∞–≥–º–µ–Ω—Ç)
@router.post("/import")
async def import_products(file: UploadFile, db: AsyncSession = Depends(get_db), user=Depends(current_user)):
    if not file.filename.endswith(".xlsx"):
        raise HTTPException(400, "Only .xlsx allowed")
    # parse in chunks, validate, upsert by (company_id, sku)
    # return summary JSON

–ß–∞—Å—Ç—å 12/20 ‚Äî –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kaspi
12.1. –¶–µ–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Kaspi.
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞–º–∏ –∑–∞–∫–∞–∑–æ–≤ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ).
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ XML/CSV-—Ñ–∏–¥–æ–≤.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (—Ä–µ–≥—É–ª—è—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è).
‚Ä¢	–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏: —Ä–µ—Ç—Ä–∞–∏, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
________________________________________
12.2. API Kaspi
Kaspi –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç API –¥–ª—è –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤ (–º–∞–≥–∞–∑–∏–Ω–æ–≤) —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º.
‚Ä¢	–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–æ–≤.
‚Ä¢	–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏.
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ/–≤—ã–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞.
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: API-–∫–ª—é—á –º–∞–≥–∞–∑–∏–Ω–∞ (—Ö—Ä–∞–Ω–∏—Ç—å –≤ integration_credentials –∏–ª–∏ –≤ company).
________________________________________
12.3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
12.3.1. –ú–æ–¥—É–ª–∏ –≤ app/services/kaspi_service.py
‚Ä¢	fetch_orders() ‚Äî –∑–∞–ø—Ä–æ—Å –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º.
‚Ä¢	update_order_status() ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞.
‚Ä¢	generate_feed() ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ XML/CSV –∫–∞—Ç–∞–ª–æ–≥–∞.
‚Ä¢	sync_orders_job() ‚Äî –∑–∞–¥–∞—á–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (–∫–∞–∂–¥—ã–µ 5‚Äì15 –º–∏–Ω).
12.3.2. –¢–∞–±–ª–∏—Ü—ã
‚Ä¢	orders –∏ order_items (—Å–º. –ß–∞—Å—Ç—å 8/20).
‚Ä¢	–î–æ–ø. –ø–æ–ª–µ external_id (id –∏–∑ Kaspi).
‚Ä¢	–ò–Ω–¥–µ–∫—Å—ã (company_id, external_id UNIQUE).
________________________________________
12.4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
–≠–Ω–¥–ø–æ–∏–Ω—Ç
POST /api/kaspi/sync-orders (–¥–ª—è —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞).
–õ–æ–≥–∏–∫–∞:
1.	–î–ª—è –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∞–∫—Ç–∏–≤–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Kaspi:
o	–ü–æ–¥—Ç—è–Ω—É—Ç—å –∫–ª—é—á API –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
o	–í—ã–∑–≤–∞—Ç—å GET /orders?status=new|processing (—á–µ—Ä–µ–∑ httpx).
o	–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–∫–∞–∑–∞:
ÔÇß	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ external_id ‚Äî –µ—Å–ª–∏ –Ω–µ—Ç, —Å–æ–∑–¥–∞—Ç—å.
ÔÇß	–ï—Å–ª–∏ –µ—Å—Ç—å, –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—è (—Å—Ç–∞—Ç—É—Å, —Å—É–º–º–∞, –ø–æ–∑–∏—Ü–∏–∏).
o	–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
–ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
{
  "fetched": 23,
  "created": 17,
  "updated": 6
}
________________________________________
12.5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
–≠–Ω–¥–ø–æ–∏–Ω—Ç
POST /api/orders/{id}/status
–í—Ö–æ–¥:
{ "status": "confirmed" }
–õ–æ–≥–∏–∫–∞:
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ external_id.
‚Ä¢	–í—ã–∑–≤–∞—Ç—å Kaspi API POST /orders/{external_id}/status —Å –Ω–æ–≤—ã–º —Å—Ç–∞—Ç—É—Å–æ–º.
‚Ä¢	–ü—Ä–∏ —É—Å–ø–µ—Ö–µ –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ orders.
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤ audit_log.
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Ç–∞—Ç—É—Å—ã: confirmed, canceled, shipped, completed.
________________________________________
12.6. –≠–∫—Å–ø–æ—Ä—Ç –∫–∞—Ç–∞–ª–æ–≥–∞ (—Ñ–∏–¥)
–≠–Ω–¥–ø–æ–∏–Ω—Ç
GET /api/kaspi/feed.xml –∏–ª–∏ /api/kaspi/feed.csv.
–§–æ—Ä–º–∞—Ç:
‚Ä¢	–ü–æ–ª—è: SKU, Name, Price, Availability, ImageURL, Description, Category.
‚Ä¢	–°–±–æ—Ä –∏–∑ products –∏ product_stocks.
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è
‚Ä¢	–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è (–∫–∞–∂–¥—ã–µ 6‚Äì12 —á–∞—Å–æ–≤) + –ø–æ –∑–∞–ø—Ä–æ—Å—É.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –Ω–∞ –¥–∏—Å–∫–µ/S3.
‚Ä¢	–ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–æ URL (/static/feeds/company_{id}.xml).
–ü—Ä–∏–º–µ—Ä (XML):
<products>
  <product>
    <sku>SKU-1001</sku>
    <name>–°–º–∞—Ä—Ç—Ñ–æ–Ω A1</name>
    <price>149990</price>
    <availability>5</availability>
    <image>https://res.cloudinary.com/.../a1.jpg</image>
    <category>–¢–µ–ª–µ—Ñ–æ–Ω—ã</category>
  </product>
</products>
________________________________________
12.7. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è APScheduler (–∏–ª–∏ Celery beat) –≤ app/workers/tasks.py.
–ó–∞–¥–∞—á–∏:
‚Ä¢	sync_orders_job() ‚Äî –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç:
o	–ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–µ/–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–∞–∫–∞–∑—ã.
o	–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã.
‚Ä¢	generate_feed_job() ‚Äî –∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤:
o	–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∏–¥.
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ç–∞–±–ª–∏—Ü—É job_logs.
________________________________________
12.8. –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ –æ—à–∏–±–∫–∏
‚Ä¢	–†–µ—Ç—Ä–∞–∏: 3 –ø–æ–ø—ã—Ç–∫–∏ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π (1—Å, 5—Å, 30—Å).
‚Ä¢	–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ external_id.
‚Ä¢	–õ–∏–º–∏—Ç—ã: –Ω–µ —á–∞—â–µ 1 –∑–∞–ø—Ä–æ—Å–∞/—Å–µ–∫—É–Ω–¥–∞/–∫–æ–º–ø–∞–Ω–∏—è.
‚Ä¢	–¢–∞–π–º–∞—É—Ç—ã: httpx —Å timeout=10s.
‚Ä¢	–û—à–∏–±–∫–∏:
o	–Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω API ‚Üí —Å—Ç–∞—Ç—É—Å ¬´sync_failed¬ª –≤ job_logs;
o	–Ω–µ–≤–µ—Ä–Ω—ã–π –∫–ª—é—á ‚Üí –ø–æ–º–µ—Ç–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –∫–∞–∫ ¬´disabled¬ª.
________________________________________
12.9. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)
–†–∞–∑–¥–µ–ª ¬´–ó–∞–∫–∞–∑—ã¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: ID, external_id, —Ç–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞, —Å—É–º–º–∞, —Å—Ç–∞—Ç—É—Å.
‚Ä¢	–ö–Ω–æ–ø–∫–∏: ¬´–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å¬ª, ¬´–û—Ç–º–µ–Ω–∏—Ç—å¬ª, ¬´–û—Ç–≥—Ä—É–∑–∏—Ç—å¬ª, ¬´–ó–∞–≤–µ—Ä—à–∏—Ç—å¬ª.
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É (pending, confirmed, canceled, completed).
‚Ä¢	–î–µ—Ç–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞: —Ç–æ–≤–∞—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—É–º–º–∞, –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π.
–†–∞–∑–¥–µ–ª ¬´–§–∏–¥—ã¬ª
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–¥¬ª.
‚Ä¢	–°—Å—ã–ª–∫–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è feed.xml/feed.csv.
‚Ä¢	–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞—Ç—ã –ø–æ—Å–ª–µ–¥–Ω–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
________________________________________
12.10. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–ó–∞–∫–∞–∑—ã –∏–∑ Kaspi –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã –≤—Ä—É—á–Ω—É—é, —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω—ë–Ω —Å—Ç–∞—Ç—É—Å.
‚Ä¢	–ï—Å–ª–∏ –∑–∞–∫–∞–∑ –æ—Ç–º–µ–Ω—ë–Ω –≤ Kaspi ‚Äî —Å—Ç–∞—Ç—É—Å –≤ SmartSell –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
‚Ä¢	–ü—Ä–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É Kaspi.
‚Ä¢	–§–∏–¥ –¥–æ–ª–∂–µ–Ω –≤–∫–ª—é—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (is_active=true).
‚Ä¢	–û—Å—Ç–∞—Ç–∫–∏ = —Å—É–º–º–∞ –ø–æ —Å–∫–ª–∞–¥–∞–º (ProductStock).
________________________________________
12.11. –ê—É–¥–∏—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ (audit_log).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –∑–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (job_logs: —É—Å–ø–µ—à–Ω—ã–µ, –æ—à–∏–±–∫–∏).
‚Ä¢	–ú–µ—Ç—Ä–∏–∫–∏ Prometheus:
o	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤;
o	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏;
o	–≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ Kaspi API.
________________________________________
12.12. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: —Ä–∞–∑–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ Kaspi, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ Order.
‚Ä¢	Integration: –º–æ–∫ API Kaspi, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π: –∑–∞–∫–∞–∑ –ø–æ—è–≤–∏–ª—Å—è –≤ Kaspi ‚Üí —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Üí –∑–∞–∫–∞–∑ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ SmartSell ‚Üí —Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—ë–Ω.

–ß–∞—Å—Ç—å 13/20 ‚Äî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏, –ø–ª–∞—Ç–µ–∂–∞–º–∏ –∏ –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏ (PDF, WhatsApp/Email)
13.1. –¶–µ–ª–∏ –∏ –æ—Ö–≤–∞—Ç
–ú–æ–¥—É–ª—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
‚Ä¢	–ø–æ–ª–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å—ã, –ø–æ–∑–∏—Ü–∏–∏);
‚Ä¢	–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø–ª–∞—Ç–µ–∂–µ–π (–∏–Ω–∏—Ü–∏–∞—Ü–∏—è, –ø—Ä–∏—ë–º webhooks –æ—Ç TipTop Pay, –≤–æ–∑–≤—Ä–∞—Ç—ã, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å);
‚Ä¢	–≥–µ–Ω–µ—Ä–∞—Ü–∏—é –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö (PDF), –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å–∫–ª–µ–π–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö PDF;
‚Ä¢	–æ—Ç–ø—Ä–∞–≤–∫—É –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∏ —á–µ–∫–æ–≤ –ø–æ WhatsApp –∏ Email;
‚Ä¢	–∞—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –∏ –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π.
________________________________________
13.2. –°—É—â–Ω–æ—Å—Ç–∏ –ë–î (–∞–∫—Ü–µ–Ω—Ç—ã)
–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–¥–µ–ª–∏ –∏–∑ –ß–∞—Å—Ç–∏ 8/20: Order, OrderItem, Payment. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
13.2.1. –¢–∞–±–ª–∏—Ü–∞ invoices
–î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ PDF.
# app/models/invoice.py
import sqlalchemy as sa
from app.models.base import Base

class Invoice(Base):
    __tablename__ = "invoices"

    order_id = sa.Column(sa.ForeignKey("orders.id", ondelete="CASCADE"), nullable=False, index=True)
    number = sa.Column(sa.String(64), nullable=False, index=True)  # —á–µ–ª–æ–≤–µ–∫–æ-—á–∏—Ç–∞–µ–º—ã–π –Ω–æ–º–µ—Ä
    pdf_url = sa.Column(sa.String(1024), nullable=True)            # —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç (S3/–¥–∏—Å–∫)
    total_amount = sa.Column(sa.Numeric(14, 2), nullable=False)
    currency = sa.Column(sa.String(8), default="KZT", nullable=False)

    __table_args__ = (sa.UniqueConstraint("order_id", name="uq_invoice_order"),)
13.2.2. –¢–∞–±–ª–∏—Ü–∞ document_blobs (–æ–ø—Ü.)
–ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ö—Ä–∞–Ω–∏—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ/–≤ –ë–î –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
# app/models/document_blob.py
import sqlalchemy as sa
from app.models.base import Base

class DocumentBlob(Base):
    __tablename__ = "document_blobs"
    key = sa.Column(sa.String(128), unique=True, nullable=False)  # –∏–º—è —Ñ–∞–π–ª–∞/–∫–ª—é—á
    content_type = sa.Column(sa.String(64), nullable=False)       # application/pdf
    size = sa.Column(sa.Integer, nullable=False)
    storage = sa.Column(sa.String(32), default="s3", nullable=False)  # s3/local
    url = sa.Column(sa.String(2048), nullable=True)               # presigned/full URL
________________________________________
13.3. –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞–∫–∞–∑–∞
13.3.1. –°—Ç–∞—Ç—É—Å—ã (–ø–æ–≤—Ç–æ—Ä, —Å–º. –ß–∞—Å—Ç—å 8/20)
pending ‚Üí confirmed ‚Üí paid ‚Üí shipped ‚Üí completed
–ü–æ–±–æ—á–Ω—ã–µ –≤–µ—Ç–∫–∏: canceled, refunded.
13.3.2. –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚Ä¢	pending ‚Üí confirmed (–≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∞–≤—Ç–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏);
‚Ä¢	confirmed ‚Üí paid (–ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ webhook –æ–ø–ª–∞—Ç—ã);
‚Ä¢	paid ‚Üí shipped (–æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –æ—Ç–≥—Ä—É–∑–∫–∏/–Ω–∞–∫–ª–∞–¥–Ω–æ–π);
‚Ä¢	shipped ‚Üí completed (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏/–ø–æ–ª—É—á–µ–Ω–∏—è);
‚Ä¢	–æ—Ç–º–µ–Ω–∞ (canceled) –≤–æ–∑–º–æ–∂–Ω–∞ –¥–æ shipped; –≤–æ–∑–≤—Ä–∞—Ç (refunded) ‚Äî —Ç–æ–ª—å–∫–æ –∏–∑ paid –∏–ª–∏ shipped (—á–∞—Å—Ç–∏—á–Ω—ã–π/–ø–æ–ª–Ω—ã–π).
13.3.3. –ü–µ—Ä–µ—Å—á—ë—Ç —Å—É–º–º
–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –≤—Å–µ–≥–¥–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ OrderItem.price * qty –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ services/orders_service.py. –í—Ö–æ–¥—è—â–∏–º –∑–Ω–∞—á–µ–Ω–∏—è–º –æ—Ç —Ñ—Ä–æ–Ω—Ç–∞ –Ω–µ –¥–æ–≤–µ—Ä—è—Ç—å.
________________________________________
13.4. REST API (FastAPI, app/routers/orders.py)
–ë–∞–∑–æ–≤—ã–π –ø—Ä–µ—Ñ–∏–∫—Å: /api/orders.
13.4.1. –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤
GET /api/orders?status=&from=&to=&page=1&page_size=25&query=...
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å—Ç–∞—Ç—É—Å—É, –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç created_at, –∏—Å—Ç–æ—á–Ω–∏–∫—É (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π/Kaspi), —Ç–µ–ª–µ—Ñ–æ–Ω—É –∫–ª–∏–µ–Ω—Ç–∞.
‚Ä¢	–û—Ç–≤–µ—Ç: –ø–∞–≥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ OrderOut —Å –∫—Ä–∞—Ç–∫–∏–º–∏ –ø–æ–ª—è–º–∏ (id, external_id, status, total_amount, created_at).
13.4.2. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞
POST /api/orders
{
  "customer_phone": "+77001234567",
  "customer_name": "–ò–≤–∞–Ω",
  "items": [
    { "product_id": 101, "name": "–¢–æ–≤–∞—Ä", "price": 14990.00, "qty": 2 }
  ]
}
‚Ä¢	–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–ª–∏—á–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤ –¥–æ –æ–ø–ª–∞—Ç—ã).
‚Ä¢	–ü–µ—Ä–µ—Å—á—ë—Ç —Å—É–º–º—ã –∏ –∑–∞–ø–∏—Å—å Order + OrderItem —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ.
‚Ä¢	–û—Ç–≤–µ—Ç: OrderOut —Å id, status=pending.
13.4.3. –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–∞
GET /api/orders/{id}
‚Ä¢	–ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞: –ø–æ–∑–∏—Ü–∏–∏, —Å—É–º–º—ã, –ø–ª–∞—Ç–µ–∂–∏, –Ω–∞–∫–ª–∞–¥–Ω—ã–µ, –∏—Å—Ç–æ—Ä–∏—è –∞—É–¥–∏—Ç–∞ (–æ–ø—Ü.).
13.4.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
POST /api/orders/{id}/status
{ "status": "confirmed" }
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞; –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ audit_log.
13.4.5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π / –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ qty
POST /api/orders/{id}/items / PATCH /api/orders/{id}/items/{itemId}
‚Ä¢	–†–∞–∑—Ä–µ—à–µ–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ –æ–ø–ª–∞—Ç—ã/–æ—Ç–≥—Ä—É–∑–∫–∏.
‚Ä¢	–ü–µ—Ä–µ—Å—á—ë—Ç total_amount –∏ –∞—É–¥–∏—Ç.
13.4.6. –û—Ç–º–µ–Ω–∞ –∑–∞–∫–∞–∑–∞
POST /api/orders/{id}/cancel
‚Ä¢	–£–∫–∞–∑–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã, –∞—É–¥–∏—Ç, –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑–µ—Ä–≤–æ–≤/–æ–ø–ª–∞—Ç—ã (–µ—Å–ª–∏ –±—ã–ª–∞).
________________________________________
13.5. –ü–ª–∞—Ç–µ–∂–∏ (TipTop Pay) ‚Äî app/routers/payments.py
13.5.1. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
POST /api/payments/create
{ "order_id": 123, "amount": 29980.00, "currency": "KZT", "idempotency_key": "order-123-v1" }
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞: –∑–∞–∫–∞–∑ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è; —Å—Ç–∞—Ç—É—Å –¥–æ–ø—É—Å–∫–∞–µ—Ç –æ–ø–ª–∞—Ç—É (pending|confirmed).
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è provider_invoice_id (–∏–ª–∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).
‚Ä¢	–ó–∞–ø–∏—Å—å Payment{status=new} —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º provider_invoice_id (–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å).
‚Ä¢	–í—ã–∑–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ TipTop Pay (services/tiptop_service.py) ‚Üí –≤–µ—Ä–Ω—É—Ç—å —Ñ—Ä–æ–Ω—Ç—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –≤–∏–¥–∂–µ—Ç–∞/—Ä–µ–¥–∏—Ä–µ–∫—Ç–∞.
–û—Ç–≤–µ—Ç
{
  "payment_id": 555,
  "provider_invoice_id": "tt-2025-0001",
  "redirect_url": "https://pay.tippay.kz/...",
  "expires_in": 900
}
13.5.2. Webhook –æ—Ç TipTop Pay
POST /api/webhooks/tiptop
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏/—Å–µ–∫—Ä–µ—Ç–∞, TTL —Å–æ–æ–±—â–µ–Ω–∏—è.
‚Ä¢	–ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–æ provider_invoice_id/event_id: –∑–∞–ø–∏—Å—å/–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ WebhookEvent.
‚Ä¢	–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è:
o	–æ–±–Ω–æ–≤–∏—Ç—å Payment.status ‚Üí success|failed|refund;
o	–ø—Ä–∏ success: Order.status = paid; —Å–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å Invoice (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —á–µ–∫ –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞);
o	–ø—Ä–∏ refund: Order.status = refunded;
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –∞—É–¥–∏—Ç.
–û—Ç–≤–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É: 200 OK —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –Ω–∞—à–µ–π —Å—Ç–æ—Ä–æ–Ω–µ. –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–µ —Å–æ–±—ã—Ç–∏—è ‚Äî 200 OK, –Ω–æ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
13.5.3. –í–æ–∑–≤—Ä–∞—Ç—ã (refunds)
POST /api/payments/{id}/refund
{ "amount": 14990.00, "reason": "–û—Ç–º–µ–Ω–∞ –ø–æ–∑–∏—Ü–∏–∏" }
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞: –≤–æ–∑–≤—Ä–∞—Ç ‚â§ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–π —Å—É–º–º—ã; —Ä–æ–ª—å (admin).
‚Ä¢	–í—ã–∑–æ–≤ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞; –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ Payment –∏ Order (—á–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –º–æ–∂–µ—Ç –Ω–µ –º–µ–Ω—è—Ç—å Order.status –Ω–∞ refunded, —Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–ª–µ refunded_amount –≤ payments –∏–ª–∏ orders).
________________________________________
13.6. –ù–∞–∫–ª–∞–¥–Ω—ã–µ (PDF) ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Å–∫–ª–µ–π–∫–∞
13.6.1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
POST /api/orders/{id}/invoice
‚Ä¢	–§–æ—Ä–º–∏—Ä—É–µ—Ç –Ω–∞–∫–ª–∞–¥–Ω—É—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–∞–≤–∞ –∑–∞–∫–∞–∑–∞.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF (–Ω–∞–ø—Ä–∏–º–µ—Ä, WeasyPrint/ReportLab/wkhtmltopdf) –≤ —Å–µ—Ä–≤–∏—Å–µ utils/pdf.py.
‚Ä¢	–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: INV-{YYYYMMDD}-{order_id}.pdf.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ: –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ S3/—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ; –ø–æ–ª—É—á–µ–Ω–∏–µ pdf_url.
‚Ä¢	–°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å Invoice (—É–Ω–∏–∫–∞–ª—å–Ω–∞—è –Ω–∞ –∑–∞–∫–∞–∑).
–®–∞–±–ª–æ–Ω –≤–∫–ª—é—á–∞–µ—Ç:
‚Ä¢	–†–µ–∫–≤–∏–∑–∏—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏ (BIN/IIN, –∞–¥—Ä–µ—Å, —Ç–µ–ª–µ—Ñ–æ–Ω, e-mail).
‚Ä¢	–î–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞ (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω).
‚Ä¢	–¢–∞–±–ª–∏—á–Ω—É—é —á–∞—Å—Ç—å (–ø–æ–∑–∏—Ü–∏–∏: SKU, –ù–∞–∑–≤–∞–Ω–∏–µ, –ö–æ–ª-–≤–æ, –¶–µ–Ω–∞, –°—É–º–º–∞).
‚Ä¢	–ò—Ç–æ–≥–∏ (—Å—É–º–º–∞ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º, —Å–∫–∏–¥–∫–∏/–¥–æ—Å—Ç–∞–≤–∫–∞, –æ–±—â–∞—è —Å—É–º–º–∞).
‚Ä¢	–ü–æ–¥–ø–∏—Å–∏/–ø–µ—á–∞—Ç–∏ (–æ–ø—Ü.), —à—Ç—Ä–∏—Ö/QR-–∫–æ–¥ —Å –Ω–æ–º–µ—Ä–æ–º –∑–∞–∫–∞–∑–∞.
13.6.2. –°–∫–ª–µ–π–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö PDF
POST /api/invoices/merge
{ "invoice_ids": [10, 11, 12] }
‚Ä¢	–°–µ—Ä–≤–∏—Å utils/pdf.py –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç PDF –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª (PyPDF2/pypdf).
‚Ä¢	–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ: INV-MERGED-{timestamp}.pdf.
‚Ä¢	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç pdf_url –Ω–∞ –æ–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç.
‚Ä¢	–í –∞—É–¥–∏—Ç ‚Äî –∑–∞–ø–∏—Å—å invoices_merged —Å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º –∏—Å—Ö–æ–¥–Ω—ã—Ö –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.
________________________________________
13.7. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –ø–æ WhatsApp/Email
13.7.1. WhatsApp
POST /api/orders/{id}/send/whatsapp
{ "phone": "+77001234567", "invoice_id": 10, "message": "–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É! –í–∞—à–∞ –Ω–∞–∫–ª–∞–¥–Ω–∞—è –≤–æ –≤–ª–æ–∂–µ–Ω–∏–∏." }
‚Ä¢	–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç WA (—á–µ—Ä–µ–∑ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞/–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API).
‚Ä¢	–õ–æ–≥–∏–∫–∞:
o	–ü–æ–ª—É—á–∏—Ç—å pdf_url –Ω–∞–∫–ª–∞–¥–Ω–æ–π; –µ—Å–ª–∏ —Ç—Ä–µ–±—É—é—Ç—Å—è –≤–ª–æ–∂–µ–Ω–∏—è, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–π URL (presigned).
o	–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ —Ñ–∞–π–ª; –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
o	–ó–∞–ø–∏—Å–∞—Ç—å –≤ campaign_logs –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–∞–±–ª–∏—Ü—É message_logs (—Å—Ç–∞—Ç—É—Å –æ—Ç–ø—Ä–∞–≤–∫–∏, –æ—à–∏–±–∫–∞).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –¥–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–º. –ß–∞—Å—Ç—å 17/20), –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º.
13.7.2. Email
POST /api/orders/{id}/send/email
{
  "email": "client@example.com",
  "subject": "–ù–∞–∫–ª–∞–¥–Ω–∞—è –ø–æ –∑–∞–∫–∞–∑—É ‚Ññ123",
  "body": "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í–æ –≤–ª–æ–∂–µ–Ω–∏–∏ –Ω–∞–∫–ª–∞–¥–Ω–∞—è. –°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É.",
  "invoice_id": 10
}
‚Ä¢	SMTP/SendGrid/–∏–Ω–æ–µ.
‚Ä¢	–í–ª–æ–∂–µ–Ω–∏–µ: —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∫–∞–∫ attachment –ª–∏–±–æ –ø—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ (–µ—Å–ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏/–æ—à–∏–±–æ–∫, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ–µ.
________________________________________
13.8. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π
‚Ä¢	–ü–ª–∞—Ç–µ–∂–∏: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π provider_invoice_id (—Å–º. –ß–∞—Å—Ç—å 8/20), –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ create —Å —Ç–µ–º –∂–µ idempotency_key –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–∂–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
‚Ä¢	Webhooks: —Ç–∞–±–ª–∏—Ü–∞ webhook_events (—Å–º. –ß–∞—Å—Ç—å 8/20). –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ ‚Äî –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –ø—Ä–æ–ø—É—Å–∫ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π: –µ—Å–ª–∏ —É –∑–∞–∫–∞–∑–∞ —É–∂–µ –µ—Å—Ç—å Invoice, –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º–µ—é—â—É—é—Å—è, –µ—Å–ª–∏ —Å–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞ –Ω–µ –º–µ–Ω—è–ª—Å—è. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–∞ ‚Äî –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å —Å—É—Ñ—Ñ–∏–∫—Å–æ–º -v2.
________________________________________
13.9. –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–∞ –∑–∞–∫–∞–∑–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω–æ. –î–æ–ø—É—Å—Ç–∏–º —á–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –∏ –¥–æ–±–∞–≤–æ—á–Ω–∞—è –Ω–∞–∫–ª–∞–¥–Ω–∞—è.
‚Ä¢	–û—Ç–º–µ–Ω–∞ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∑–∞–∫–∞–∑–∞ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è paid|shipped|completed.
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ PDF –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (—Ç–µ–ª–µ—Ñ–æ–Ω/email).
‚Ä¢	–†–æ–ª–∏:
o	admin ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø;
o	manager ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤;
o	analyst ‚Äî read-only;
o	storekeeper ‚Äî –æ—Ç–≥—Ä—É–∑–∫–∞, –ø–µ—á–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö.
________________________________________
13.10. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
‚Ä¢	400 Bad Request ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ø—ã—Ç–∫–∞ –æ–ø–ª–∞—Ç–∏—Ç—å –Ω—É–ª–µ–≤–æ–π –∑–∞–∫–∞–∑, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ —Å—Ç–∞—Ç—É—Å–∞.
‚Ä¢	401 Unauthorized ‚Äî –Ω–µ—Ç/–ø—Ä–æ—Å—Ä–æ—á–µ–Ω JWT.
‚Ä¢	403 Forbidden ‚Äî –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ (—Ä–æ–ª—å/–∫–æ–º–ø–∞–Ω–∏—è).
‚Ä¢	404 Not Found ‚Äî –∑–∞–∫–∞–∑/–Ω–∞–∫–ª–∞–¥–Ω–∞—è/–ø–ª–∞—Ç—ë–∂ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
‚Ä¢	409 Conflict ‚Äî –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç, –ø–æ–≤—Ç–æ—Ä webhook, –¥—É–±–ª–∏—Ä—É—é—â–∏–π provider_invoice_id.
‚Ä¢	422 Unprocessable Entity ‚Äî –¥–µ—Ç–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è Pydantic.
‚Ä¢	500 Internal Server Error ‚Äî —Å–±–æ–π (–ª–æ–≥ —Å correlation id).
________________________________________
13.11. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç
‚Ä¢	–ê—É–¥–∏—Ç-—Å–æ–±—ã—Ç–∏—è: order_created, order_status_changed, payment_initiated, payment_succeeded, payment_failed, refund_created, invoice_generated, invoices_merged, invoice_sent_whatsapp, invoice_sent_email, webhook_received.
‚Ä¢	–ú–µ—Ç—Ä–∏–∫–∏:
o	–∫–æ–Ω–≤–µ—Ä—Å–∏—è confirmed ‚Üí paid;
o	—Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç payment_initiated –¥–æ payment_succeeded;
o	–¥–æ–ª—è –≤–æ–∑–≤—Ä–∞—Ç–æ–≤;
o	–æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–æ–∫ WA/Email;
o	–≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ PDF.
________________________________________
13.12. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React + MUI)
13.12.1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ ¬´–ó–∞–∫–∞–∑—ã¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –∑–∞–∫–∞–∑–æ–≤: —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É/–¥–∞—Ç–µ/—Ç–µ–ª–µ—Ñ–æ–Ω—É; –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å/–æ—Ç–º–µ–Ω–∏—Ç—å).
‚Ä¢	–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞:
o	–≤–∫–ª–∞–¥–∫–∏: ¬´–ü–æ–∑–∏—Ü–∏–∏¬ª, ¬´–ü–ª–∞—Ç–µ–∂–∏¬ª, ¬´–ù–∞–∫–ª–∞–¥–Ω—ã–µ¬ª, ¬´–ò—Å—Ç–æ—Ä–∏—è¬ª;
o	–∫–Ω–æ–ø–∫–∏: ¬´–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É¬ª, ¬´–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é¬ª, ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ WhatsApp/Email¬ª;
o	–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ–∫–æ–≤/—Å—Å—ã–ª–æ–∫ –Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
13.12.2. –î–∏–∞–ª–æ–≥ –æ–ø–ª–∞—Ç—ã
‚Ä¢	–ü–æ—Å–ª–µ create ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –≤–∏–¥–∂–µ—Ç TipTop Pay (redirect –∏–ª–∏ iframe/SDK).
‚Ä¢	–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã: ¬´–û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã¬ª, ¬´–£—Å–ø–µ—Ö¬ª, ¬´–û—à–∏–±–∫–∞¬ª; —Å–ª—É—à–∞—Ç—å —Å–æ–±—ã—Ç–∏—è/–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—Ç–∞—Ç—É—Å –ø–æ API (–æ–ø—Ü. polling).
13.12.3. –î–∏–∞–ª–æ–≥ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
‚Ä¢	–í—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞ (WA/Email), –≤–≤–æ–¥ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–∏—Å—å–º–∞/—Å–æ–æ–±—â–µ–Ω–∏—è, –∫–Ω–æ–ø–∫–∞ ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª.
________________________________________
13.13. –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
–ò–Ω–∏—Ü–∏–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–∞
POST /api/payments/create
Authorization: Bearer <token>
Content-Type: application/json

{
  "order_id": 123,
  "amount": 29980.00,
  "currency": "KZT",
  "idempotency_key": "order-123-v1"
}
Webhook –æ–ø–ª–∞—Ç—ã (–æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ‚Üí –∫ –Ω–∞–º)
POST /api/webhooks/tiptop
X-Signature: <hmac>
Content-Type: application/json

{
  "event_id": "evt_001",
  "provider_invoice_id": "tt-2025-0001",
  "status": "success",
  "amount": 29980.00,
  "currency": "KZT"
}
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π
POST /api/orders/123/invoice
Authorization: Bearer <token>
–°–∫–ª–µ–π–∫–∞ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö
POST /api/invoices/merge
Authorization: Bearer <token>
Content-Type: application/json

{ "invoice_ids": [10, 11, 12] }
–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Email
POST /api/orders/123/send/email
Authorization: Bearer <token>
Content-Type: application/json

{
  "email": "client@example.com",
  "subject": "–ù–∞–∫–ª–∞–¥–Ω–∞—è ‚ÑñINV-20250913-123",
  "body": "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! –í–æ –≤–ª–æ–∂–µ–Ω–∏–∏ –≤–∞—à–∞ –Ω–∞–∫–ª–∞–¥–Ω–∞—è.",
  "invoice_id": 10
}
________________________________________
13.14. –ü—Å–µ–≤–¥–æ–∫–æ–¥ –∫–ª—é—á–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
# app/services/payments_service.py
async def handle_tiptop_webhook(payload, db):
    event_id = payload["event_id"]
    if await is_duplicate_event(db, event_id):
        return  # –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å

    payment = await find_payment_by_provider_id(db, payload["provider_invoice_id"])
    if not payment:
        # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî —Å–æ–∑–¥–∞—Ç—å ¬´–ø–æ–¥–≤–∏—Å—à–∏–π¬ª –ø–ª–∞—Ç–µ–∂ –∏ —Å–≤—è–∑–∞—Ç—å –ø–æ order_id –∏–∑ payload
        raise ValueError("Payment not found")

    async with db.begin():
        if payload["status"] == "success":
            payment.status = "success"
            order = await db.get(Order, payment.order_id, with_for_update=True)
            order.status = "paid"
            await ensure_invoice_exists(order, payment)
        elif payload["status"] == "refund":
            payment.status = "refund"
            # –æ–±–Ω–æ–≤–∏—Ç—å order/refunded_amount
        else:
            payment.status = "failed"

        await log_webhook_event(db, event_id, payload)
        await write_audit(db, action="payment_"+payload["status"], entity_type="order", entity_id=payment.order_id)
# app/utils/pdf.py
def generate_invoice_pdf(order: Order) -> bytes:
    # —Ä–µ–Ω–¥–µ—Ä HTML-—à–∞–±–ª–æ–Ω–∞ –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ PDF (weasyprint/wkhtmltopdf)
    # –≤–µ—Ä–Ω—É—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ PDF
________________________________________
13.15. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit:
o	—Ä–∞—Å—á—ë—Ç —Å—É–º–º –∑–∞–∫–∞–∑–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å—Ç–∞—Ç—É—Å–æ–≤;
o	–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–ª–∞—Ç–µ–∂–µ–π/webhooks;
o	–≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF (–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –ø–æ–ª—è).
‚Ä¢	Integration:
o	–ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: —Å–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑ ‚Üí –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂ ‚Üí —Å–º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å webhook ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –∑–∞–∫–∞–∑/–ø–ª–∞—Ç—ë–∂ ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∫–ª–∞–¥–Ω—É—é ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–æ Email/WA (—Å –º–æ–∫–∞–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤).
‚Ä¢	E2E:
o	–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ –¥–æ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∫–ª–∞–¥–Ω–æ–π.
________________________________________
13.16. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –Ω–∞ –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö (Depends + claims).
‚Ä¢	–ù–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç—ë–∂–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞, —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å—ã/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã.
‚Ä¢	–ü–æ–¥–ø–∏—Å—å/—Å–µ–∫—Ä–µ—Ç –∏ TTL –¥–ª—è webhooks; –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤.
‚Ä¢	–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—ã–π –¥–æ—Å—Ç—É–ø; presigned URLs —Å –∫–æ—Ä–æ—Ç–∫–∏–º TTL –¥–ª—è –∑–∞–≥—Ä—É–∑–æ–∫.

–ß–∞—Å—Ç—å 14/20 ‚Äî –°–∫–ª–∞–¥—ã –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞
14.1. –¶–µ–ª–∏ –∏ –æ—Ö–≤–∞—Ç
–ú–æ–¥—É–ª—å —Å–∫–ª–∞–¥–æ–≤ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
‚Ä¢	—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å–∫–ª–∞–¥–∞—Ö;
‚Ä¢	–ø–æ–¥–¥–µ—Ä–∂–∫—É –º—É–ª—å—Ç–∏—Å–∫–ª–∞–¥—Å–∫–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–º–∞–≥–∞–∑–∏–Ω—ã, —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥, —Ñ–∏–ª–∏–∞–ª—ã);
‚Ä¢	–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏—Ö–æ–¥–∞/—Ä–∞—Å—Ö–æ–¥–∞/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è;
‚Ä¢	–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å –∑–∞–∫–∞–∑–∞–º–∏ –∏ –¥–µ–º–ø–∏–Ω–≥–æ–º (–∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –æ—Å—Ç–∞—Ç–∫–∏);
‚Ä¢	—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Kaspi (–æ—Å—Ç–∞—Ç–∫–∏ ‚Üí —Ñ–∏–¥);
‚Ä¢	–æ—Ç—á—ë—Ç—ã –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é –∏ —Ç–µ–∫—É—â–∏–º –æ—Å—Ç–∞—Ç–∫–∞–º.
________________________________________
14.2. –°—É—â–Ω–æ—Å—Ç–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã
14.2.1. warehouses
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	name (—Å—Ç—Ä–æ–∫–∞, —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏)
‚Ä¢	address
‚Ä¢	is_active (bool)
‚Ä¢	created_at, updated_at
14.2.2. product_stocks
‚Ä¢	id
‚Ä¢	product_id
‚Ä¢	warehouse_id
‚Ä¢	qty (–∫–æ–ª-–≤–æ, Decimal(14,3))
‚Ä¢	reserved_qty (–ø–æ–¥ –∑–∞–∫–∞–∑—ã, –æ–∂–∏–¥–∞—é—â–∏–µ –æ–ø–ª–∞—Ç—ã/–æ—Ç–≥—Ä—É–∑–∫–∏)
‚Ä¢	updated_at
–ò–Ω–¥–µ–∫—Å (product_id, warehouse_id) ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π.
14.2.3. stock_movements
–ñ—É—Ä–Ω–∞–ª –æ–ø–µ—Ä–∞—Ü–∏–π (–ø—Ä–∏—Ö–æ–¥, —Ä–∞—Å—Ö–æ–¥, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ).
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	product_id
‚Ä¢	warehouse_from (nullable)
‚Ä¢	warehouse_to (nullable)
‚Ä¢	qty
‚Ä¢	type (in, out, transfer)
‚Ä¢	reason (—Å—Ç—Ä–æ–∫–∞/enum: –∑–∞–∫–∞–∑, –≤–æ–∑–≤—Ä–∞—Ç, –∏–Ω–≤–µ–Ω—Ç–∞—Ä–∏–∑–∞—Ü–∏—è –∏ —Ç.–¥.)
‚Ä¢	created_by
‚Ä¢	created_at
________________________________________
14.3. API (FastAPI, app/routers/warehouses.py)
14.3.1. –°–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤
GET /api/warehouses
‚Ä¢	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–∫–ª–∞–¥—ã –∫–æ–º–ø–∞–Ω–∏–∏.
‚Ä¢	–û—Ç–≤–µ—Ç:
[{ "id":1, "name":"–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Å–∫–ª–∞–¥", "address":"–≥. –ê–ª–º–∞—Ç—ã, —É–ª. ...", "is_active":true }]
14.3.2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫–ª–∞–¥–∞
POST /api/warehouses
{ "name":"–°–∫–ª–∞–¥ 2", "address":"—É–ª. –ê–±–∞—è 10" }
14.3.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫–ª–∞–¥–∞
PATCH /api/warehouses/{id}
14.3.4. –°–ø–∏—Å–æ–∫ –æ—Å—Ç–∞—Ç–∫–æ–≤ –ø–æ —Å–∫–ª–∞–¥—É
GET /api/warehouses/{id}/stocks
‚Ä¢	–û—Ç–≤–µ—Ç: –º–∞—Å—Å–∏–≤ —Ç–æ–≤–∞—Ä–æ–≤ —Å qty –∏ reserved_qty.
14.3.5. –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
POST /api/warehouses/transfer
{ "product_id": 123, "from": 1, "to": 2, "qty": 10 }
‚Ä¢	–£–º–µ–Ω—å—à–∏—Ç—å qty –Ω–∞ —Å–∫–ª–∞–¥–µ-–∏—Å—Ç–æ—á–Ω–∏–∫–µ, —É–≤–µ–ª–∏—á–∏—Ç—å –Ω–∞ —Å–∫–ª–∞–¥–µ-–ø—Ä–∏—ë–º–Ω–∏–∫–µ.
‚Ä¢	–ó–∞–ø–∏—Å–∞—Ç—å –≤ stock_movements.
14.3.6. –ü—Ä–∏—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥
POST /api/warehouses/movement
{ "product_id": 123, "warehouse_id": 1, "qty": 50, "type": "in", "reason": "–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ –æ—Ç –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞" }
________________________________________
14.4. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–û—Å—Ç–∞—Ç–∫–∏ = qty ‚Äì reserved_qty.
‚Ä¢	–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞ ‚Üí —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å qty –Ω–∞ —Å–∫–ª–∞–¥–µ.
‚Ä¢	–ü—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞ ‚Üí —Å–Ω–∏–º–∞—Ç—å —Ä–µ–∑–µ—Ä–≤.
‚Ä¢	–ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –∑–∞–∫–∞–∑–∞ ‚Üí —É–º–µ–Ω—å—à–∞—Ç—å qty (–ø–µ—Ä–µ–≤–æ–¥ –∏–∑ —Ä–µ–∑–µ—Ä–≤–∞ –≤ —Ä–∞—Å—Ö–æ–¥).
‚Ä¢	–ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ ‚Üí —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–∏—Ö–æ–¥.
‚Ä¢	–ü—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ qty –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –Ω–∞ —Å–∫–ª–∞–¥–µ-–∏—Å—Ç–æ—á–Ω–∏–∫–µ.
‚Ä¢	–°–∫–ª–∞–¥ –º–æ–∂–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤—Å–µ –æ—Å—Ç–∞—Ç–∫–∏ = 0.
________________________________________
14.5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kaspi
‚Ä¢	–í —Ñ–∏–¥–µ (—Å–º. –ß–∞—Å—Ç—å 12/20) —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ (availability) = —Å—É–º–º–∞ –ø–æ –∞–∫—Ç–∏–≤–Ω—ã–º —Å–∫–ª–∞–¥–∞–º.
‚Ä¢	–ü—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Kaspi ‚Üí —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å qty –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–∫–ª–∞–¥–µ.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∞–≤–∏–ª: –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–∑–µ—Ä–≤ —Å ¬´–æ—Å–Ω–æ–≤–Ω–æ–≥–æ¬ª —Å–∫–ª–∞–¥–∞, –∏–ª–∏ —Å –±–ª–∏–∂–∞–π—à–µ–≥–æ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É.
________________________________________
14.6. –û—Ç—á—ë—Ç—ã
14.6.1. –¢–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
GET /api/reports/stocks
‚Ä¢	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–æ–¥—É–∫—Ç—É –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –≤ —Ä–µ–∑–µ—Ä–≤–µ, –¥–æ—Å—Ç—É–ø–Ω–æ.
‚Ä¢	–° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å–∫–ª–∞–¥–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
14.6.2. –î–≤–∏–∂–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
GET /api/reports/stock-movements?from=&to=&type=
‚Ä¢	–°–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥.
‚Ä¢	–ê–≥—Ä–µ–≥–∞—Ü–∏—è: –ø—Ä–∏—Ö–æ–¥/—Ä–∞—Å—Ö–æ–¥/–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ.
14.6.3. –¢–æ–ø-–¥–≤–∏–∂–µ–Ω–∏–µ
–û—Ç—á—ë—Ç –ø–æ —Ç–æ–≤–∞—Ä–∞–º —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –æ–±–æ—Ä–æ—Ç–æ–º –∑–∞ –ø–µ—Ä–∏–æ–¥.
________________________________________
14.7. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React + MUI)
14.7.1. –†–∞–∑–¥–µ–ª ¬´–°–∫–ª–∞–¥—ã¬ª
‚Ä¢	–°–ø–∏—Å–æ–∫ —Å–∫–ª–∞–¥–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞), –∫–Ω–æ–ø–∫–∞ ¬´–î–æ–±–∞–≤–∏—Ç—å¬ª.
‚Ä¢	–ö–∞—Ä—Ç–æ—á–∫–∞ —Å–∫–ª–∞–¥–∞ ‚Üí –æ—Å—Ç–∞—Ç–∫–∏.
‚Ä¢	–î–µ–π—Å—Ç–≤–∏—è: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å.
14.7.2. –†–∞–∑–¥–µ–ª ¬´–û—Å—Ç–∞—Ç–∫–∏¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –ø–æ —Ç–æ–≤–∞—Ä–∞–º: SKU, –ù–∞–∑–≤–∞–Ω–∏–µ, –û—Å—Ç–∞—Ç–æ–∫, –†–µ–∑–µ—Ä–≤, –î–æ—Å—Ç—É–ø–Ω–æ.
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å–∫–ª–∞–¥—É, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
‚Ä¢	–ö–Ω–æ–ø–∫–∏: ¬´–ü—Ä–∏—Ö–æ–¥¬ª, ¬´–†–∞—Å—Ö–æ–¥¬ª, ¬´–ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ¬ª.
14.7.3. –†–∞–∑–¥–µ–ª ¬´–û—Ç—á—ë—Ç—ã¬ª
‚Ä¢	–î–∏–∞–≥—Ä–∞–º–º–∞ –¥–≤–∏–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤.
‚Ä¢	–¢–∞–±–ª–∏—Ü—ã –ø–æ –ø—Ä–∏—Ö–æ–¥—É/—Ä–∞—Å—Ö–æ–¥—É –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.
________________________________________
14.8. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
‚Ä¢	400 ‚Äî qty < 0, –ø–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –æ—Å—Ç–∞—Ç–∫–µ.
‚Ä¢	401 ‚Äî –Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞.
‚Ä¢	403 ‚Äî –Ω–µ—Ç –ø—Ä–∞–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–æ–ª—å –Ω–µ storekeeper|admin).
‚Ä¢	404 ‚Äî —Å–∫–ª–∞–¥/—Ç–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω.
‚Ä¢	409 ‚Äî –∫–æ–Ω—Ñ–ª–∏–∫—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (—Ä–µ—à–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π + –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π —Å—Ç—Ä–æ–∫–∏).
________________________________________
14.9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: –ø—Ä–∏—Ö–æ–¥, —Ä–∞—Å—Ö–æ–¥, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ/–æ—Ç–º–µ–Ω–∞ —Ä–µ–∑–µ—Ä–≤–∞.
‚Ä¢	Integration: —Å–≤—è–∑–∫–∞ –∑–∞–∫–∞–∑–∞ ‚Üí —Ä–µ–∑–µ—Ä–≤ ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí —Å–ø–∏—Å–∞–Ω–∏–µ.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ñ–æ—Ä–º–ª—è–µ—Ç –∑–∞–∫–∞–∑, —Ç–æ–≤–∞—Ä —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ—Ç—Å—è, –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –æ—Å—Ç–∞—Ç–æ–∫.
________________________________________
14.10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É–¥–∏—Ç
‚Ä¢	–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞—Ç–∫–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ stock_movements –∏ audit_log.
‚Ä¢	–†–æ–ª–∏:
o	admin ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø;
o	storekeeper ‚Äî –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∫–ª–∞–¥—Å–∫–æ–≥–æ —É—á—ë—Ç–∞;
o	manager ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Å—Ç–∞—Ç–∫–æ–≤, –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
‚Ä¢	–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: –ø—Ä–æ–≤–µ—Ä–∫–∞ qty –ø–µ—Ä–µ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º.

–ß–∞—Å—Ç—å 15/20 ‚Äî –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ —Ä–æ–ª–∏
15.1. –¶–µ–ª–∏
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–∞–Ω–∏–∏.
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –ø–∞—Ä–æ–ª—å –æ–ø—Ü., —Ä–æ–ª—å).
‚Ä¢	–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–ø–æ —Ä–æ–ª—è–º –∏ —á–µ–∫–±–æ–∫—Å–∞–º).
‚Ä¢	–ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.
________________________________________
15.2. –°—É—â–Ω–æ—Å—Ç–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã
15.2.1. users
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	phone (—É–Ω–∏–∫–∞–ª–µ–Ω)
‚Ä¢	password_hash (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ä–æ–ª—å, bcrypt/argon2id; –ø—Ä–∏ OTP –º–æ–∂–Ω–æ null)
‚Ä¢	role (admin, manager, storekeeper, analyst, custom)
‚Ä¢	is_active (bool)
‚Ä¢	created_at, updated_at
15.2.2. user_permissions
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø—ã (—á–µ–∫–±–æ–∫—Å—ã).
‚Ä¢	id
‚Ä¢	user_id
‚Ä¢	permission_key (—Å—Ç—Ä–æ–∫–∞, –Ω–∞–ø—Ä. products.view, products.edit, orders.cancel)
‚Ä¢	value (bool)
–ò–Ω–¥–µ–∫—Å (user_id, permission_key) —É–Ω–∏–∫–∞–ª–µ–Ω.
________________________________________
15.3. –ë–∞–∑–æ–≤—ã–µ —Ä–æ–ª–∏
‚Ä¢	admin ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –º–æ–¥—É–ª—è–º.
‚Ä¢	manager ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏ –∏ –∑–∞–∫–∞–∑–∞–º–∏, –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º.
‚Ä¢	storekeeper ‚Äî —Å–∫–ª–∞–¥—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ—Å—Ç–∞—Ç–∫–∏, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è).
‚Ä¢	analyst ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á—ë—Ç–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
‚Ä¢	custom ‚Äî –∫–∞—Å—Ç–æ–º–Ω–∞—è —Ä–æ–ª—å, –ø—Ä–∞–≤–∞ –∑–∞–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ —á–µ–∫–±–æ–∫—Å—ã).
________________________________________
15.4. API (FastAPI, app/routers/users.py)
15.4.1. –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GET /api/users
‚Ä¢	–ü–∞–≥–∏–Ω–∞—Ü–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–æ–ª–∏/–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.
15.4.2. –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POST /api/users
{
  "phone": "+77001234567",
  "role": "manager",
  "permissions": {
    "products.view": true,
    "products.edit": false
  }
}
‚Ä¢	–í–∞–ª–∏–¥–∞—Ü–∏—è: —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏.
‚Ä¢	–ï—Å–ª–∏ —Ä–æ–ª—å = custom, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —á–µ–∫–±–æ–∫—Å—ã –≤ user_permissions.
‚Ä¢	–ï—Å–ª–∏ role ‚àà {admin, manager, ‚Ä¶} ‚Äî –ø—Ä–∞–≤–∞ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ —à–∞–±–ª–æ–Ω–∞.
15.4.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
PATCH /api/users/{id}
‚Ä¢	–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏, —Å—Ç–∞—Ç—É—Å–∞, —Å–ø–∏—Å–∫–∞ permissions.
15.4.4. –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
DELETE /api/users/{id}
‚Ä¢	–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ is_active=false.
15.4.5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
–í middleware:
‚Ä¢	–†–∞—Å–ø–∞—Ä—Å–∏—Ç—å JWT ‚Üí claims role, user_id.
‚Ä¢	–ï—Å–ª–∏ —Ä–æ–ª—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è ‚Üí –¥–æ—Å—Ç—É–ø –∏–∑ –º–∞—Ç—Ä–∏—Ü—ã.
‚Ä¢	–ï—Å–ª–∏ custom ‚Üí –∑–∞–ø—Ä–æ—Å–∏—Ç—å user_permissions.
‚Ä¢	–ù–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö ‚Üí –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å Depends(check_permission("products.edit")).
________________________________________
15.5. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React + MUI)
15.5.1. –†–∞–∑–¥–µ–ª ¬´–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞: –§–ò–û (–æ–ø—Ü.), —Ç–µ–ª–µ—Ñ–æ–Ω, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å.
‚Ä¢	–ö–Ω–æ–ø–∫–∏: ¬´–°–æ–∑–¥–∞—Ç—å¬ª, ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª, ¬´–î–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å¬ª.
15.5.2. –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚Ä¢	–ü–æ–ª—è: —Ç–µ–ª–µ—Ñ–æ–Ω, —Ä–æ–ª—å (dropdown), –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (—á–µ–∫–±–æ–∫—Å).
‚Ä¢	–ï—Å–ª–∏ —Ä–æ–ª—å = custom ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ (—Ç–∞–±–ª–∏—Ü–∞ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏).
15.5.3. –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ (–ø—Ä–∏–º–µ—Ä)
‚Ä¢	–¢–æ–≤–∞—Ä—ã: –ø—Ä–æ—Å–º–æ—Ç—Ä, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç.
‚Ä¢	–ó–∞–∫–∞–∑—ã: –ø—Ä–æ—Å–º–æ—Ç—Ä, –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, –æ—Ç–º–µ–Ω–∞, –≤–æ–∑–≤—Ä–∞—Ç—ã.
‚Ä¢	–°–∫–ª–∞–¥—ã: –ø—Ä–∏—Ö–æ–¥, —Ä–∞—Å—Ö–æ–¥, –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ.
‚Ä¢	–ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –ø—Ä–æ—Å–º–æ—Ç—Ä –≥—Ä–∞—Ñ–∏–∫–æ–≤, –≤—ã–≥—Ä—É–∑–∫–∞.
‚Ä¢	–ù–∞—Å—Ç—Ä–æ–π–∫–∏: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏, API-–∫–ª—é—á–∞–º–∏.
________________________________________
15.6. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–£ –∫–∞–∂–¥–æ–π –∫–æ–º–ø–∞–Ω–∏–∏ –º–∏–Ω–∏–º—É–º 1 admin.
‚Ä¢	admin –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –Ω–∞–∑–Ω–∞—á–∞—Ç—å —Ä–æ–ª–∏.
‚Ä¢	custom –ø—Ä–∞–≤–∞ –≥–∏–±–∫–æ –∑–∞–¥–∞—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.
‚Ä¢	–ü—Ä–∏ –≤—Ö–æ–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç JWT —Å role –∏ permissions (–æ–ø—Ü.).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ: —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–Ω–∏–∑–∏—Ç—å —Å–≤–æ–∏ –ø—Ä–∞–≤–∞ –Ω–∏–∂–µ —Ç–µ–∫—É—â–∏—Ö (—Ç–æ–ª—å–∫–æ –¥—Ä—É–≥–æ–π admin).
________________________________________
15.7. –ê—É–¥–∏—Ç
‚Ä¢	–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ audit_log:
o	user_created, user_updated, user_deactivated;
o	–æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –∑–∞–∫–∞–∑–∞–º–∏, —Ç–æ–≤–∞—Ä–∞–º–∏, —Å–∫–ª–∞–¥–∞–º–∏.
‚Ä¢	–ü–æ–ª—è –∞—É–¥–∏—Ç–∞: user_id, action, entity_type, entity_id, timestamp.
________________________________________
15.8. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤
‚Ä¢	400 ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—Ä–æ–ª—å –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, permission key –Ω–µ–≤–∞–ª–∏–¥–µ–Ω).
‚Ä¢	401 ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
‚Ä¢	403 ‚Äî –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ (—Ä–æ–ª—å/permission).
‚Ä¢	404 ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω.
‚Ä¢	409 ‚Äî –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
________________________________________
15.9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Ç—Ä–∏—Ü—ã —Ä–æ–ª–µ–π, –∑–∞–≥—Ä—É–∑–∫–∞ permissions.
‚Ä¢	Integration: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å custom-–ø—Ä–∞–≤–∞–º–∏ ‚Üí –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π ‚Äî admin —Å–æ–∑–¥–∞—ë—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø—Ä–∞–≤–∞, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤—Ö–æ–¥–∏—Ç –∏ –≤–∏–¥–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Ñ—É–Ω–∫—Ü–∏–π.
________________________________________
15.10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–ü–∞—Ä–æ–ª–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å) —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤ hash (bcrypt/argon2id).
‚Ä¢	–ü—Ä–∏ –≤—Ö–æ–¥–µ —á–µ—Ä–µ–∑ OTP –º–æ–∂–Ω–æ –±–µ–∑ –ø–∞—Ä–æ–ª—è, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞.
‚Ä¢	–î–æ—Å—Ç—É–ø—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ API –∏ —Ñ—Ä–æ–Ω—Ç–∞.
‚Ä¢	–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–±–æ—Ä –ø—Ä–∞–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (principle of least privilege).

–ß–∞—Å—Ç—å 16/20 ‚Äî –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã
16.1. –¶–µ–ª–∏
‚Ä¢	–ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞–º –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º.
‚Ä¢	–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Ç—Ä–∏–∫: –ø—Ä–æ–¥–∞–∂–∏, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫–ª–∏–µ–Ω—Ç—ã.
‚Ä¢	–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–≥—Ä–∞—Ñ–∏–∫–∏, —Ç–∞–±–ª–∏—Ü—ã).
‚Ä¢	–≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–æ–≤ (Excel/PDF).
________________________________________
16.2. –ú–µ—Ç—Ä–∏–∫–∏ –∏ KPI
16.2.1. –ü—Ä–æ–¥–∞–∂–∏
‚Ä¢	–û–±—â–∏–π –æ–±–æ—Ä–æ—Ç (—Å—É–º–º–∞ –∑–∞–∫–∞–∑–æ–≤ completed|paid).
‚Ä¢	–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤.
‚Ä¢	–°—Ä–µ–¥–Ω–∏–π —á–µ–∫ = –æ–±–æ—Ä–æ—Ç / –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤.
‚Ä¢	–ü—Ä–æ–¥–∞–∂–∏ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º/–º–µ—Å—è—Ü–∞–º.
16.2.2. –ö–ª–∏–µ–Ω—Ç—ã
‚Ä¢	–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (–ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É/email).
‚Ä¢	–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã (‚â•2 –∑–∞–∫–∞–∑–æ–≤).
‚Ä¢	–î–æ–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ = –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ / –≤—Å–µ.
‚Ä¢	–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –º–µ–∂–¥—É –∑–∞–∫–∞–∑–∞–º–∏.
16.2.3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
‚Ä¢	–ü—Ä–æ–¥–∞–∂–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ç–æ–≤–∞—Ä–æ–≤.
‚Ä¢	–¢–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ø–æ –≤—ã—Ä—É—á–∫–µ/–∫–æ–ª-–≤—É).
‚Ä¢	–¢–æ–ø-—Ç–æ–≤–∞—Ä—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
16.2.4. –°–∫–ª–∞–¥—ã
‚Ä¢	–û–±–æ—Ä–æ—Ç –ø–æ —Å–∫–ª–∞–¥–∞–º.
‚Ä¢	–¢–æ–≤–∞—Ä—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –æ—Å—Ç–∞—Ç–∫–∞–º–∏.
‚Ä¢	–¢–æ–ø-—Ç–æ–≤–∞—Ä—ã –ø–æ –¥–≤–∏–∂–µ–Ω–∏—é.
________________________________________
16.3. API (FastAPI, app/routers/analytics.py)
16.3.1. –ü—Ä–æ–¥–∞–∂–∏
GET /api/analytics/sales?from=&to=&interval=day|week|month
{
  "labels": ["2025-09-01","2025-09-02"],
  "data": [120000, 85000],
  "total": 205000,
  "avg_check": 10250
}
16.3.2. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
GET /api/analytics/customers/repeat?from=&to=
{
  "unique_customers": 150,
  "repeat_customers": 45,
  "repeat_rate": 0.3
}
16.3.3. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/analytics/categories?from=&to=
[
  { "category":"–¢–µ–ª–µ—Ñ–æ–Ω—ã", "sales": 500000, "orders": 120 },
  { "category":"–ù–æ—É—Ç–±—É–∫–∏", "sales": 300000, "orders": 45 }
]
16.3.4. –°–∫–ª–∞–¥—ã
GET /api/analytics/warehouses?from=&to=
[
  { "warehouse":"–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π", "sales": 400000 },
  { "warehouse":"–§–∏–ª–∏–∞–ª 1", "sales": 150000 }
]
16.3.5. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á—ë—Ç–∞
GET /api/analytics/export?format=xlsx|pdf&type=sales&from=&to=
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Excel –∏–ª–∏ PDF.
‚Ä¢	–í–æ–∑–≤—Ä–∞—Ç file_url –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è.
________________________________________
16.4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥, React + Recharts)
16.4.1. –î–∞—à–±–æ—Ä–¥
‚Ä¢	–ö–∞—Ä—Ç–æ—á–∫–∏: –æ–±–æ—Ä–æ—Ç, –∑–∞–∫–∞–∑—ã, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.
‚Ä¢	–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–¥–∞–∂ –ø–æ –¥–Ω—è–º/–Ω–µ–¥–µ–ª—è–º.
‚Ä¢	–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (pie chart).
16.4.2. –†–∞–∑–¥–µ–ª ¬´–ö–ª–∏–µ–Ω—Ç—ã¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞: —Å–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤, –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤, —Å—É–º–º–∞.
‚Ä¢	–§–∏–ª—å—Ç—Ä: –Ω–æ–≤—ã–µ vs –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ.
16.4.3. –†–∞–∑–¥–µ–ª ¬´–ö–∞—Ç–µ–≥–æ—Ä–∏–∏¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞: –ø—Ä–æ–¥–∞–∂–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
‚Ä¢	–î–∏–∞–≥—Ä–∞–º–º–∞: —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
16.4.4. –†–∞–∑–¥–µ–ª ¬´–°–∫–ª–∞–¥—ã¬ª
‚Ä¢	–ì—Ä–∞—Ñ–∏–∫ –æ–±–æ—Ä–æ—Ç–∞ –ø–æ —Å–∫–ª–∞–¥–∞–º.
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞: –æ—Å—Ç–∞—Ç–∫–∏, –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ä–µ–∑–µ—Ä–≤—ã.
________________________________________
16.5. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–í –æ—Ç—á—ë—Ç—ã –≤–∫–ª—é—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏ paid|completed.
‚Ä¢	–û—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ/–≤–æ–∑–≤—Ä–∞—â—ë–Ω–Ω—ã–µ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è.
‚Ä¢	–í –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–∞—Ö —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É –∏–ª–∏ email.
‚Ä¢	–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Å–º. –¢–ó –ø–æ —Ç–æ–≤–∞—Ä–∞–º).
________________________________________
16.6. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
‚Ä¢	–ò–Ω–¥–µ–∫—Å—ã –ø–æ orders.created_at, orders.customer_phone.
‚Ä¢	–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è (materialized views –∏–ª–∏ —Ñ–æ–Ω–æ–≤—ã–µ –¥–∂–æ–±—ã –¥–ª—è –∫—Ä—É–ø–Ω—ã—Ö –æ–±—ä—ë–º–æ–≤).
‚Ä¢	–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ –Ω–∞ –∫–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5‚Äì10 –º–∏–Ω).
________________________________________
16.7. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã
‚Ä¢	400 ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã –∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
‚Ä¢	401 ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
‚Ä¢	403 ‚Äî –Ω–µ—Ç –ø—Ä–∞–≤ (analyst|admin).
‚Ä¢	500 ‚Äî –æ—à–∏–±–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏.
________________________________________
16.8. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞—Å—á—ë—Ç–æ–≤ (—Å—Ä–µ–¥–Ω–∏–π —á–µ–∫, repeat rate).
‚Ä¢	Integration: –≤—ã–±–æ—Ä–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏–∑ –ë–î –∑–∞ –ø–µ—Ä–∏–æ–¥.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π: –∫–ª–∏–µ–Ω—Ç —Å–¥–µ–ª–∞–ª 3 –∑–∞–∫–∞–∑–∞ ‚Üí UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç repeat rate=100%.
________________________________________
16.9. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞: —Ç–æ–ª—å–∫–æ admin|analyst.
‚Ä¢	–ü—Ä–∏ —ç–∫—Å–ø–æ—Ä—Ç–µ Excel/PDF –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å presigned URL —Å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 —á–∞—Å).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–ª—è –∞—É–¥–∏—Ç–∞.

–ß–∞—Å—Ç—å 17/20 ‚Äî –ë–∏–ª–ª–∏–Ω–≥ –∏ —Ç–∞—Ä–∏—Ñ—ã
17.1. –¶–µ–ª–∏
‚Ä¢	–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞–º–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã (Start, Pro, Business).
‚Ä¢	–ü–æ–¥–ø–∏—Å–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ TipTop Pay.
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–æ —Ç–∞—Ä–∏—Ñ—É.
‚Ä¢	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∏—Å–∫–∞–ª—å–Ω—ã—Ö —á–µ–∫–æ–≤.
‚Ä¢	–ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Ä–æ—Ç–∞—Ü–∏—è –ø–ª–∞—Ç—ë–∂–Ω—ã—Ö –∫–ª—é—á–µ–π.
________________________________________
17.2. –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
17.2.1. Start
‚Ä¢	1 –º–∞–≥–∞–∑–∏–Ω.
‚Ä¢	–î–æ 500 —Ç–æ–≤–∞—Ä–æ–≤.
‚Ä¢	–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –∫–∞—Ç–∞–ª–æ–≥, –∑–∞–∫–∞–∑—ã, –Ω–∞–∫–ª–∞–¥–Ω—ã–µ.
‚Ä¢	–¶–µ–Ω–∞: 10 000 ‚Ç∏/–º–µ—Å.
17.2.2. Pro
‚Ä¢	–î–æ 5 –º–∞–≥–∞–∑–∏–Ω–æ–≤.
‚Ä¢	–î–æ 5000 —Ç–æ–≤–∞—Ä–æ–≤.
‚Ä¢	–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Start + —Å–∫–ª–∞–¥—ã, –¥–µ–º–ø–∏–Ω–≥, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.
‚Ä¢	–¶–µ–Ω–∞: 25 000 ‚Ç∏/–º–µ—Å.
17.2.3. Business
‚Ä¢	–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –º–∞–≥–∞–∑–∏–Ω–æ–≤.
‚Ä¢	–ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ —Ç–æ–≤–∞—Ä–æ–≤.
‚Ä¢	–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ Pro + API-–¥–æ—Å—Ç—É–ø, —Ä–∞—Å—Å—ã–ª–∫–∏, –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ä–æ–ª–∏.
‚Ä¢	–¶–µ–Ω–∞: 50 000 ‚Ç∏/–º–µ—Å.
________________________________________
17.3. –¢–∞–±–ª–∏—Ü—ã
17.3.1. subscriptions
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	plan (start|pro|business)
‚Ä¢	status (active|expired|pending)
‚Ä¢	started_at, expires_at
‚Ä¢	payment_id (—Å–≤—è–∑—å —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –ø–ª–∞—Ç–µ–∂–æ–º)
17.3.2. billing_payments
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	amount
‚Ä¢	currency (KZT)
‚Ä¢	status (pending|success|failed)
‚Ä¢	provider_invoice_id
‚Ä¢	created_at, updated_at
17.3.3. fiscal_receipts
‚Ä¢	id
‚Ä¢	payment_id
‚Ä¢	receipt_number
‚Ä¢	pdf_url
‚Ä¢	created_at
________________________________________
17.4. API (FastAPI, app/routers/billing.py)
17.4.1. –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â—É—é –ø–æ–¥–ø–∏—Å–∫—É
GET /api/billing/subscription
{ "plan": "pro", "status": "active", "expires_at": "2025-10-13T00:00:00Z" }
17.4.2. –í—ã–±—Ä–∞—Ç—å —Ç–∞—Ä–∏—Ñ
POST /api/billing/choose
{ "plan": "business" }
‚Ä¢	–°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å subscription{status=pending}.
‚Ä¢	–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞.
17.4.3. –ò–Ω–∏—Ü–∏–∞—Ü–∏—è –æ–ø–ª–∞—Ç—ã
POST /api/billing/pay
{ "plan": "pro", "period": "1m" }
‚Ä¢	–†–∞—Å—á—ë—Ç —Å—É–º–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, 25 000 ‚Ç∏).
‚Ä¢	–í—ã–∑–æ–≤ TipTop Pay API ‚Üí –≤–æ–∑–≤—Ä–∞—Ç redirect_url.
‚Ä¢	–°–æ–∑–¥–∞–Ω–∏–µ billing_payments{status=pending}.
17.4.4. Webhook TipTop Pay
POST /api/webhooks/tiptop-billing
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏.
‚Ä¢	–ü—Ä–∏ success:
o	billing_payments.status=success
o	subscriptions.status=active
o	expires_at = started_at + 1 –º–µ—Å—è—Ü
o	–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏—Å–∫–∞–ª—å–Ω–æ–≥–æ —á–µ–∫–∞.
________________________________________
17.5. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–æ —Ç–∞—Ä–∏—Ñ—É
‚Ä¢	Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç subscription.plan.
‚Ä¢	–ü—Ä–∏–º–µ—Ä—ã:
o	Start: –∑–∞–ø—Ä–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –±–æ–ª–µ–µ 500 —Ç–æ–≤–∞—Ä–æ–≤; 1 –º–∞–≥–∞–∑–∏–Ω.
o	Pro: –∑–∞–ø—Ä–µ—Ç > 5 –º–∞–≥–∞–∑–∏–Ω–æ–≤.
o	Business: –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
‚Ä¢	–ï—Å–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–æ ‚Üí 403 Forbidden —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º: ¬´–í–∞—à —Ç–∞—Ä–∏—Ñ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ —Ç–æ–≤–∞—Ä–æ–≤. –û–±–Ω–æ–≤–∏—Ç–µ —Ç–∞—Ä–∏—Ñ¬ª.
________________________________________
17.6. –§–∏—Å–∫–∞–ª—å–Ω—ã–µ —á–µ–∫–∏
‚Ä¢	–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∏—Å–∫–∞–ª—å–Ω—ã–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º (API –ö–ö–ú/TipTop Pay).
‚Ä¢	–ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —á–µ–∫–∞ –∏ PDF.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –≤ fiscal_receipts.
‚Ä¢	–î–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ GET /api/billing/receipts/{id}.
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ Email/WhatsApp –∫–ª–∏–µ–Ω—Ç—É.
________________________________________
17.7. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π
‚Ä¢	API-–∫–ª—é—á–∏ TipTop Pay —Ö—Ä–∞–Ω–∏—Ç—å –≤ HashiCorp Vault –∏–ª–∏ AWS/GCP Secret Manager.
‚Ä¢	–í –ë–î ‚Äî —Ç–æ–ª—å–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –∫–ª—é—á–µ–π.
‚Ä¢	–î–æ—Å—Ç—É–ø –∫ –∫–ª—é—á–∞–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–µ—Ä–≤–∏—Å–∞–º–∏ billing_service.
‚Ä¢	–†–æ—Ç–∞—Ü–∏—è –∫–ª—é—á–µ–π ‚Äî —Ä–∞–∑ –≤ 3‚Äì6 –º–µ—Å—è—Ü–µ–≤.
________________________________________
17.8. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React + MUI)
17.8.1. –†–∞–∑–¥–µ–ª ¬´–¢–∞—Ä–∏—Ñ—ã¬ª
‚Ä¢	–ö–∞—Ä—Ç–æ—á–∫–∏: Start, Pro, Business.
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥–∫–ª—é—á–∏—Ç—å¬ª.
‚Ä¢	–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–∞—Ä–∏—Ñ–∞ –∏ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è.
17.8.2. –†–∞–∑–¥–µ–ª ¬´–ü–ª–∞—Ç–µ–∂–∏¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞: —Å—É–º–º–∞, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞.
‚Ä¢	–°—Å—ã–ª–∫–∞ ¬´–°–∫–∞—á–∞—Ç—å —á–µ–∫ (PDF)¬ª.
17.8.3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚Ä¢	–ü—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –∑–∞ 7 –¥–Ω–µ–π ‚Üí Email + –±–∞–Ω–Ω–µ—Ä –≤ UI.
‚Ä¢	–ü—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ (–ø–æ–¥–ø–∏—Å–∫–∞ expired) ‚Üí –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π, —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ —Ä–∞–∑–¥–µ–ª ¬´–¢–∞—Ä–∏—Ñ—ã¬ª.
________________________________________
17.9. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã
‚Ä¢	400 ‚Äî —Ç–∞—Ä–∏—Ñ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
‚Ä¢	401 ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
‚Ä¢	403 ‚Äî –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ç–∞—Ä–∏—Ñ–∞.
‚Ä¢	404 ‚Äî –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.
‚Ä¢	409 ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–ø–ª–∞—Ç—ã –±–µ–∑ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–µ–¥—ã–¥—É—â–µ–π.
‚Ä¢	500 ‚Äî –æ—à–∏–±–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
________________________________________
17.10. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: —Ä–∞—Å—á—ë—Ç —Ü–µ–Ω—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ª–∏–º–∏—Ç–∞–º.
‚Ä¢	Integration: webhook TipTop Pay, —Ñ–∏—Å–∫–∞–ª—å–Ω—ã–π —á–µ–∫.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π: –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ ‚Üí –æ–ø–ª–∞—Ç–∞ ‚Üí –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è ‚Üí –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º.
________________________________________
17.11. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ TipTop Pay (–Ω–∏–∫–∞–∫–∏—Ö –ø—Ä—è–º—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤).
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π webhook.
‚Ä¢	Presigned URL –¥–ª—è —á–µ–∫–æ–≤ —Å TTL (–Ω–∞–ø—Ä–∏–º–µ—Ä, 24 —á–∞—Å–∞).
‚Ä¢	–õ–∏–º–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ø—ã—Ç–æ–∫ –æ–ø–ª–∞—Ç—ã.

–ß–∞—Å—Ç—å 18/20 ‚Äî –†–∞—Å—Å—ã–ª–∫–∏
18.1. –¶–µ–ª–∏
‚Ä¢	–ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ WhatsApp, Email, Telegram.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (–ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è).
‚Ä¢	–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ (–æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ, –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ).
‚Ä¢	–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º (–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å 22:00 –¥–æ 08:00, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ).
‚Ä¢	–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç–∞–≤–∫–∏.
________________________________________
18.2. –°—É—â–Ω–æ—Å—Ç–∏ –∏ —Ç–∞–±–ª–∏—Ü—ã
18.2.1. campaigns
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	channel (whatsapp|email|telegram)
‚Ä¢	template_id
‚Ä¢	status (scheduled|running|completed|failed)
‚Ä¢	scheduled_at
‚Ä¢	created_at
18.2.2. messages
‚Ä¢	id
‚Ä¢	campaign_id
‚Ä¢	recipient (—Ç–µ–ª–µ—Ñ–æ–Ω/email/chat_id)
‚Ä¢	status (pending|sent|delivered|failed)
‚Ä¢	error (nullable)
‚Ä¢	sent_at, delivered_at
18.2.3. templates
‚Ä¢	id
‚Ä¢	company_id
‚Ä¢	channel
‚Ä¢	name
‚Ä¢	content (JSON —Å –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞–º–∏)
________________________________________
18.3. API (FastAPI, app/routers/campaigns.py)
18.3.1. –°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É
POST /api/campaigns
{
  "channel": "whatsapp",
  "template_id": 5,
  "recipients": ["+77001234567","+77007654321"],
  "scheduled_at": "2025-09-14T20:00:00Z"
}
‚Ä¢	–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞—Ä–∏—Ñ–∞: —Ä–∞—Å—Å—ã–ª–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –≤ Business.
‚Ä¢	–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è campaign, —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–ø–∏—Å–∏ messages.
18.3.2. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Å—ã–ª–æ–∫
GET /api/campaigns
‚Ä¢	–§–∏–ª—å—Ç—Ä—ã: –ø–æ —Å—Ç–∞—Ç—É—Å—É, –¥–∞—Ç–µ, –∫–∞–Ω–∞–ª—É.
18.3.3. –î–µ—Ç–∞–ª–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
GET /api/campaigns/{id}
‚Ä¢	–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∏—Ö —Å—Ç–∞—Ç—É—Å—ã.
18.3.4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏
‚Ä¢	POST /api/templates ‚Äî —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω.
‚Ä¢	GET /api/templates ‚Äî —Å–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤.
‚Ä¢	PATCH /api/templates/{id} ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å.
________________________________________
18.4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–æ –∫–∞–Ω–∞–ª–∞–º
18.4.1. WhatsApp
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Business API –∏–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–±–ª–æ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ services/whatsapp_service.py.
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è: –ª–∏–º–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å—É—Ç–∫–∏ (–Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞).
18.4.2. Email
‚Ä¢	SMTP/SendGrid.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTML-—à–∞–±–ª–æ–Ω–æ–≤.
‚Ä¢	–í–ª–æ–∂–µ–Ω–∏—è (PDF, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è).
18.4.3. Telegram
‚Ä¢	–ß–µ—Ä–µ–∑ –±–æ—Ç–∞ (telegram_service.py).
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤, —Å—Å—ã–ª–æ–∫, –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
________________________________________
18.5. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∏ –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è APScheduler.
‚Ä¢	–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å scheduled_at ‚Üí –∑–∞–¥–∞—á–∞ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è.
‚Ä¢	–ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º:
o	–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 22:00‚Äì08:00 (–ª–æ–∫–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è).
o	–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∫–æ–º–ø–∞–Ω–∏–∏.
o	–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ –Ω–æ—á—å ‚Üí –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—Å—è –Ω–∞ 08:00.
________________________________________
18.6. –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤
–§–æ—Ä–º–∞—Ç —à–∞–±–ª–æ–Ω–∞ (JSON):
{
  "text": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{name}}! –í–∞—à –∑–∞–∫–∞–∑ ‚Ññ{{order_id}} –≥–æ—Ç–æ–≤."
}
–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:
‚Ä¢	–ü–æ–¥—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–ø–æ–ª—è –∫–ª–∏–µ–Ω—Ç–∞, –∑–∞–∫–∞–∑–∞).
‚Ä¢	–í —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π ‚Üí –æ—Å—Ç–∞–≤–ª—è—Ç—å –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ –¥–µ—Ñ–æ–ª—Ç.
________________________________________
18.7. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã
18.7.1. –ú–µ—Ç—Ä–∏–∫–∏
‚Ä¢	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π;
‚Ä¢	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö;
‚Ä¢	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫;
‚Ä¢	CTR (–¥–ª—è email/telegram –ø–æ –∫–ª–∏–∫–∞–º).
18.7.2. API
GET /api/campaigns/{id}/stats
{ "sent": 1000, "delivered": 950, "failed": 50, "ctr": 0.12 }
________________________________________
18.8. –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React + MUI)
18.8.1. –†–∞–∑–¥–µ–ª ¬´–†–∞—Å—Å—ã–ª–∫–∏¬ª
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –∫–∞–º–ø–∞–Ω–∏–π: –∫–∞–Ω–∞–ª, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç–∞.
‚Ä¢	–ö–Ω–æ–ø–∫–∞ ¬´–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É¬ª.
18.8.2. –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è
‚Ä¢	–ü–æ–ª—è: –≤—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞, —à–∞–±–ª–æ–Ω, —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π (–∏–ª–∏ –∏–º–ø–æ—Ä—Ç CSV).
‚Ä¢	–î–∞—Ç–∞/–≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫).
‚Ä¢	–ß–µ–∫–±–æ–∫—Å ¬´–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ¬ª.
18.8.3. –î–µ—Ç–∞–ª–∏ –∫–∞–º–ø–∞–Ω–∏–∏
‚Ä¢	–¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –∏ —Å—Ç–∞—Ç—É—Å–æ–≤.
‚Ä¢	–ì—Ä–∞—Ñ–∏–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ (sent vs delivered).
________________________________________
18.9. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
‚Ä¢	–î–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—Å—ã–ª–∫–∞–º —Ç–æ–ª—å–∫–æ —É admin –∏ manager.
‚Ä¢	–†–∞—Å—Å—ã–ª–∫–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã —Ç–∞—Ä–∏—Ñ–æ–º Business.
‚Ä¢	Email/WhatsApp-–∞–¥—Ä–µ—Å–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è (–≤–∞–ª–∏–¥–∞—Ç–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞).
‚Ä¢	–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Ä–∞—Å—Å—ã–ª–∫–∞ —Å—Ç–∞–≤–∏—Ç—Å—è –≤ —Å—Ç–∞—Ç—É—Å failed.
________________________________________
18.10. –û—à–∏–±–∫–∏ –∏ –∫–æ–¥—ã
‚Ä¢	400 ‚Äî –Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –Ω–æ–º–µ—Ä–∞/email).
‚Ä¢	401 ‚Äî –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω.
‚Ä¢	403 ‚Äî —Ç–∞—Ä–∏—Ñ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç.
‚Ä¢	404 ‚Äî –∫–∞–º–ø–∞–Ω–∏—è/—à–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.
‚Ä¢	500 ‚Äî –æ—à–∏–±–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞.
________________________________________
18.11. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	Unit: —Ä–µ–Ω–¥–µ—Ä —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏.
‚Ä¢	Integration: –º–æ–∫–∏ WhatsApp/SMTP/Telegram API.
‚Ä¢	E2E: —Å—Ü–µ–Ω–∞—Ä–∏–π: —Å–æ–∑–¥–∞—Ç—å –∫–∞–º–ø–∞–Ω–∏—é ‚Üí –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —É—Ç—Ä–æ ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É ‚Üí –≤—ã–≥—Ä—É–∑–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.
________________________________________
18.12. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚Ä¢	–•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏ (–Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–π).
‚Ä¢	–õ–∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –∑–∞ –∫–∞–º–ø–∞–Ω–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, ‚â§10 000).
‚Ä¢	Presigned URL –¥–ª—è –≤–ª–æ–∂–µ–Ω–∏–π (PDF —á–µ–∫–æ–≤, –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö).
‚Ä¢	–û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ HTTPS.

–ß–∞—Å—Ç—å 19/20 ‚Äî –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
19.1. –¶–µ–ª–∏
‚Ä¢	–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã SmartSell.
‚Ä¢	–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ (Docker).
‚Ä¢	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π (CI/CD —á–µ—Ä–µ–∑ GitHub Actions).
‚Ä¢	–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥.
‚Ä¢	–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î.
‚Ä¢	–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
________________________________________
19.2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–µ–Ω–∏–π
19.2.1. Dev
‚Ä¢	–õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞.
‚Ä¢	–ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose.
‚Ä¢	Hot reload (FastAPI + React).
19.2.2. Staging
‚Ä¢	–ü–æ—á—Ç–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ Prod.
‚Ä¢	–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º.
‚Ä¢	–û—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ API.
19.2.3. Prod
‚Ä¢	Kubernetes (–∏–ª–∏ Docker Swarm).
‚Ä¢	–û—Ç–¥–µ–ª—å–Ω—ã–µ —É–∑–ª—ã –¥–ª—è app (FastAPI) –∏ frontend.
‚Ä¢	–ë–∞–∑–∞ PostgreSQL –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º–æ–º —Å–µ—Ä–≤–∏—Å–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Yandex Managed PostgreSQL –∏–ª–∏ –∞–Ω–∞–ª–æ–≥).
________________________________________
19.3. Docker
19.3.1. Backend (FastAPI)
Dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
19.3.2. Frontend (React)
Dockerfile
FROM node:20-alpine as build
WORKDIR /frontend
COPY package.json package-lock.json ./
RUN npm install
COPY . .
RUN npm run build

FROM nginx:stable-alpine
COPY --from=build /frontend/dist /usr/share/nginx/html
19.3.3. docker-compose (Dev)
version: "3.9"
services:
  backend:
    build: ./app
    ports: ["8000:8000"]
    env_file: .env.dev
    volumes: ["./app:/app"]
  frontend:
    build: ./frontend
    ports: ["3000:80"]
  db:
    image: postgres:15
    env_file: .env.dev
    volumes:
      - db_data:/var/lib/postgresql/data
volumes:
  db_data:
________________________________________
19.4. CI/CD (GitHub Actions)
.github/workflows/deploy.yml
name: Deploy
on:
  push:
    branches: [main]
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Build backend
        run: docker build -t smartsell-backend ./app
      - name: Build frontend
        run: docker build -t smartsell-frontend ./frontend
      - name: Push images
        run: |
          docker tag smartsell-backend registry/smartsell-backend:${{ github.sha }}
          docker push registry/smartsell-backend:${{ github.sha }}
‚Ä¢	–ü–æ—Å–ª–µ –ø—É—à–∞ –≤ main ‚Üí —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –æ–±—Ä–∞–∑—ã ‚Üí –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ Registry ‚Üí –¥–µ–ø–ª–æ–π –≤ Kubernetes.
________________________________________
19.5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥
19.5.1. –ú–µ—Ç—Ä–∏–∫–∏
‚Ä¢	Prometheus (—ç–∫—Å–ø–æ—Ä—Ç–µ—Ä—ã: FastAPI, PostgreSQL).
‚Ä¢	Grafana ‚Äî –¥–∞—à–±–æ—Ä–¥—ã (RPS, –æ—à–∏–±–∫–∏ 5xx, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞).
19.5.2. –õ–æ–≥–∏
‚Ä¢	Loki + Grafana.
‚Ä¢	–§–æ—Ä–º–∞—Ç JSON –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.
‚Ä¢	–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –ø–æ trace_id.
19.5.3. –ê–ª–µ—Ä—Ç—ã
‚Ä¢	Alertmanager (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram/Email).
‚Ä¢	–¢—Ä–∏–≥–≥–µ—Ä—ã:
o	–æ—à–∏–±–∫–∏ 5xx > 5% –∑–∞ 5 –º–∏–Ω;
o	—Ä–æ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ > 2 —Å–µ–∫;
o	–ø–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞;
o	–º–µ—Å—Ç–æ –≤ –ë–î < 20%.
________________________________________
19.6. –ë—ç–∫–∞–ø—ã
‚Ä¢	PostgreSQL ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π dump —á–µ—Ä–µ–∑ pg_dump ‚Üí —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ S3/–æ–±–ª–∞–∫–µ (7‚Äì30 –¥–Ω–µ–π).
‚Ä¢	–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–∂–µ–º–µ—Å—è—á–Ω–æ.
‚Ä¢	–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (—á–µ–∫-–ª–∏—Å—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç—ã) ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ.
________________________________________
19.7. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –ø–∏—à—É—Ç –ª–æ–≥–∏ –≤ stdout (Docker best practice).
‚Ä¢	–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Loki/Elastic.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ min 30 –¥–Ω–µ–π.
‚Ä¢	–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, OTP) ‚Äî –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å.
________________________________________
19.8. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢	–°–µ–∫—Ä–µ—Ç—ã ‚Äî —Ç–æ–ª—å–∫–æ –≤ Secret Manager –∏–ª–∏ Kubernetes Secrets.
‚Ä¢	HTTPS (Let's Encrypt, cert-manager).
‚Ä¢	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ staging (VPN –∏–ª–∏ IP whitelist).
‚Ä¢	–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–∑–æ–≤ (Dependabot).
‚Ä¢	Fail2ban/Firewall –Ω–∞ –≤—Ö–æ–¥–Ω—ã–µ —É–∑–ª—ã.
________________________________________
19.9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚Ä¢	Smoke-—Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (curl /health).
‚Ä¢	–ù–∞–≥—Ä—É–∑–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã (locust/jmeter).
‚Ä¢	Chaos testing (–∏–º–∏—Ç–∞—Ü–∏—è –ø–∞–¥–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤).

–ß–∞—Å—Ç—å 20/20 ‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
20.1. –¶–µ–ª–∏
‚Ä¢	–ì–∞—Ä–∞–Ω—Ç–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∫–æ–º–ø–∞–Ω–∏–π.
‚Ä¢	–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É –†–ö (–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) –∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º (GDPR-–ø–æ–¥–æ–±–Ω—ã–π –ø–æ–¥—Ö–æ–¥).
‚Ä¢	–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è —Ä–∏—Å–∫–æ–≤ —É—Ç–µ—á–µ–∫ –∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤.
‚Ä¢	–û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ API.
________________________________________
20.2. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
20.2.1. –î–∞–Ω–Ω—ã–µ –≤ –¥–≤–∏–∂–µ–Ω–∏–∏
‚Ä¢	–í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ HTTPS (TLS 1.2+).
‚Ä¢	HSTS –≤–∫–ª—é—á—ë–Ω.
‚Ä¢	–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã (API, –ë–î) ‚Äî —á–µ—Ä–µ–∑ TLS –∏–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∑–∞—â–∏—â—ë–Ω–Ω–æ–π —Å–µ—Ç–∏.
20.2.2. –î–∞–Ω–Ω—ã–µ –≤ –ø–æ–∫–æ–µ
‚Ä¢	–ë–î PostgreSQL ‚Äî —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∏—Å–∫–∞ (cloud-managed encryption).
‚Ä¢	–§–∞–π–ª—ã (PDF, Excel) ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ S3/–∞–Ω–∞–ª–æ–≥–∞—Ö —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º (AES-256).
‚Ä¢	–°–µ–∫—Ä–µ—Ç—ã (API-–∫–ª—é—á–∏) ‚Äî —Ç–æ–ª—å–∫–æ –≤ Secret Manager, –±–µ–∑ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ.
________________________________________
20.3. –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
20.3.1. –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è
‚Ä¢	–•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è (—Ç–µ–ª–µ—Ñ–æ–Ω, email).
‚Ä¢	–ù–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª–µ–π (–≤—Å–µ —á–µ—Ä–µ–∑ TipTop Pay).
20.3.2. –ü–æ–ª–∏—Ç–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è
‚Ä¢	–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
‚Ä¢	–õ–æ–≥–∏—á–µ—Å–∫–∞—è –∞–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è: —É–¥–∞–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.
20.3.3. –õ–æ–∫–∞–ª—å–Ω–æ–µ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ
‚Ä¢	–ó–∞–∫–æ–Ω –†–ö ¬´–û –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –∏—Ö –∑–∞—â–∏—Ç–µ¬ª.
‚Ä¢	–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è: —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ü–î –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–ö (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –ë–î —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–µ).
________________________________________
20.4. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
20.4.1. –ü–ª–∞—Ç–µ–∂–∏
‚Ä¢	–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ idempotency_key –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π.
‚Ä¢	Webhooks —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ webhook_events ‚Üí –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.
20.4.2. API-–æ–ø–µ—Ä–∞—Ü–∏–∏
‚Ä¢	POST-–æ–ø–µ—Ä–∞—Ü–∏–∏, –∏–∑–º–µ–Ω—è—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ, –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å X-Idempotency-Key.
‚Ä¢	–í —Ç–∞–±–ª–∏—Ü–µ idempotency_records —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
________________________________________
20.5. –ê—É–¥–∏—Ç –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
20.5.1. –ê—É–¥–∏—Ç
‚Ä¢	–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω, –ø–ª–∞—Ç–µ–∂, –Ω–∞–∫–ª–∞–¥–Ω—ã–µ) –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ audit_log.
‚Ä¢	–ü–æ–ª—è: user_id, action, entity_type, entity_id, old_value, new_value, timestamp.
20.5.2. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚Ä¢	–õ–æ–≥–∏ –≤ JSON.
‚Ä¢	–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (OTP, –ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏) –º–∞—Å–∫–∏—Ä—É—é—Ç—Å—è.
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ: min 30 –¥–Ω–µ–π, max 1 –≥–æ–¥ –¥–ª—è –∞—É–¥–∏—Ç–∞.
________________________________________
20.6. –ö–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞
‚Ä¢	JWT + —Ä–æ–ª–∏ + —á–µ–∫–±–æ–∫—Å—ã (—Å–º. –ß–∞—Å—Ç—å 15/20).
‚Ä¢	MFA (—á–µ—Ä–µ–∑ OTP).
‚Ä¢	Principle of Least Privilege ‚Äî –¥–æ—Å—Ç—É–ø –ø–æ –º–∏–Ω–∏–º—É–º—É.
‚Ä¢	–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –Ω–∞ API-–∫–ª—é—á–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–ª—é—á —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏).
________________________________________
20.7. –ë—ç–∫–∞–ø—ã –∏ –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å
‚Ä¢	–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –±—ç–∫–∞–ø—ã –ë–î (pg_dump, retention 30 –¥–Ω–µ–π).
‚Ä¢	–•—Ä–∞–Ω–µ–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ –≤ S3 (—Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º).
‚Ä¢	DR-–ø–ª–∞–Ω: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–Ω—è—Ç—å –∫–æ–ø–∏—é –ë–î –Ω–∞ –¥—Ä—É–≥–æ–º —Ä–µ–≥–∏–æ–Ω–µ –≤ —Ç–µ—á–µ–Ω–∏–µ 4 —á–∞—Å–æ–≤.
‚Ä¢	–¢–µ—Å—Ç–æ–≤–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚Äî –µ–∂–µ–º–µ—Å—è—á–Ω–æ.
________________________________________
20.8. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚Ä¢	ISO-–ø–æ–¥–æ–±–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏, –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞, –∞—É–¥–∏—Ç.
‚Ä¢	–ü–æ–¥–¥–µ—Ä–∂–∫–∞ GDPR-–ø–æ–¥–æ–±–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: –ø—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.
‚Ä¢	–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–ö–ó): —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø–æ –∑–∞—â–∏—Ç–µ –ü–î.
________________________________________
20.9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
‚Ä¢	Unit: –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è.
‚Ä¢	Integration: —Ç–µ—Å—Ç—ã –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –¥–≤–æ–π–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π.
‚Ä¢	Pentest: –≤–Ω–µ—à–Ω–∏–µ —Ç–µ—Å—Ç—ã —Ä–∞–∑ –≤ –ø–æ–ª–≥–æ–¥–∞.
‚Ä¢	OWASP Top-10: SQL Injection, XSS, CSRF, RCE, IDOR ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.
________________________________________
20.10. –ò–Ω—Ü–∏–¥–µ–Ω—Ç-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç
‚Ä¢	–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–Ω–æ–º–∞–ª–∏–π –≤ –ª–æ–≥–∞—Ö.
‚Ä¢	SLA –Ω–∞ —Ä–µ–∞–∫—Ü–∏—é: 1 —á–∞—Å –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö, 24 —á –¥–ª—è —Å—Ä–µ–¥–Ω–∏—Ö.
‚Ä¢	–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ Telegram/Email.
‚Ä¢	–ñ—É—Ä–Ω–∞–ª –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å –∞–Ω–∞–ª–∏–∑–æ–º –∏ –ø–ª–∞–Ω–æ–º –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–æ–≤.
________________________________________
20.11. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚Ä¢	CSP (Content Security Policy).
‚Ä¢	XSS-–ø—Ä–æ—Ç–µ–∫—Ü–∏—è (escape/—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö).
‚Ä¢	CSRF-—Ç–æ–∫–µ–Ω—ã –¥–ª—è POST-–∑–∞–ø—Ä–æ—Å–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è cookie-–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è).
‚Ä¢	HttpOnly, Secure, SameSite cookies.
________________________________________
20.12. –†–æ–ª–∏ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
‚Ä¢	–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä —Å–∏—Å—Ç–µ–º—ã ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞, –∞—É–¥–∏—Ç.
‚Ä¢	DevOps ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –±—ç–∫–∞–ø—ã.
‚Ä¢	Security officer ‚Äî –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤, –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ pentest.
‚Ä¢	–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –≤ –∫–æ–¥–µ.
SmartSell v16 ‚Äì –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ SmartSell: –æ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–∫–ª–∞–¥–æ–º.
1. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢	‚Ä¢ SmartSell ‚Äî –æ–±–ª–∞—á–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞–º–∏, –∑–∞–∫–∞–∑–∞–º–∏, –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏, –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏ —Å –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º–∏.

2. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞
‚Ä¢	‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–Ω–ª–∞–π–Ω-–º–∞–≥–∞–∑–∏–Ω–æ–º, –≤–∫–ª—é—á–∞—è –∫–∞—Å–ø–∏-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é, –¥–µ–º–ø–∏–Ω–≥, –∞–Ω–∞–ª–∏—Ç–∏–∫—É, WhatsApp-—Ä–∞—Å—Å—ã–ª–∫–∏, —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.

3. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚Ä¢	‚Ä¢ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
‚Ä¢	‚Ä¢ –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ +7XXXXXXXXXX.
‚Ä¢	‚Ä¢ –ü—Ä–∏–¥—É–º—ã–≤–∞–µ—Ç –ø–∞—Ä–æ–ª—å (–Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤).
‚Ä¢	‚Ä¢ –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ mobizon.kz (OTP)
‚Ä¢	‚Ä¢ –í–≤–æ–¥–∏—Ç –∫–æ–¥ ‚Äî –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è.
‚Ä¢	‚Ä¢ –ü—Ä–∏ –≤—Ö–æ–¥–µ: –≤–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä –∏ –ø–∞—Ä–æ–ª—å.
‚Ä¢	‚Ä¢ –ü—Ä–∏ 5 –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ 15 –º–∏–Ω—É—Ç.
‚Ä¢	‚Ä¢ –ü—Ä–æ–±–Ω—ã–π –¥–æ—Å—Ç—É–ø (—Ç–∞—Ä–∏—Ñ Pro) ‚Äî –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ 15 –¥–Ω–µ–π.
‚Ä¢	‚Ä¢ –ü–æ—Å–ª–µ 15 –¥–Ω–µ–π ‚Äî –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞, —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –æ–± –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —á–∞—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ Start.
‚Ä¢	‚Ä¢ –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ (bcrypt).
‚Ä¢	‚Ä¢ –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è –ø–æ –∫–æ–¥—É ‚Üí –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–∞—è —Å–º–µ–Ω–∞.
‚Ä¢	1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ —Å—Å—ã–ª–∫—É ¬´–ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?¬ª –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –≤—Ö–æ–¥–∞.
‚Ä¢	2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.
‚Ä¢	3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤ —Å–∏—Å—Ç–µ–º–µ.
‚Ä¢	4. –ù–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π –∫–æ–¥ (OTP) —á–µ—Ä–µ–∑ mobizon.kz.
‚Ä¢	5. –ö–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ 5 –º–∏–Ω—É—Ç.
‚Ä¢	6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–æ–¥.
‚Ä¢	7. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è.
‚Ä¢	8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–≤–∞–∂–¥—ã (–≤–≤–æ–¥ + –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ).
‚Ä¢	9. –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω–µ –º–µ–Ω–µ–µ 6 —Å–∏–º–≤–æ–ª–æ–≤.
‚Ä¢	10. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è ‚Äî —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º.
‚Ä¢	11. –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è –≤ –ª–æ–≥–∞—Ö –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å –æ—Ç–º–µ—Ç–∫–æ–π –≤—Ä–µ–º–µ–Ω–∏ –∏ IP.

4. –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
‚Ä¢	‚Ä¢ –¢–æ–≤–∞—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Kaspi –ø–æ API.
‚Ä¢	‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ–ª–æ–Ω–∫–∏: —Ñ–æ—Ç–æ, –Ω–∞–∑–≤–∞–Ω–∏–µ, –æ—Å—Ç–∞—Ç–æ–∫, —Ü–µ–Ω–∞, —Å—Ç–∞—Ç—É—Å, –¥–µ–º–ø–∏–Ω–≥, –ø—Ä–µ–¥–∑–∞–∫–∞–∑, –ø–æ–∑–∏—Ü–∏—è.
‚Ä¢	‚Ä¢ –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è: –ø–æ–∑–∏—Ü–∏—è —Å—Ä–µ–¥–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3 –∏–∑ 15).
‚Ä¢	‚Ä¢ –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –¥–µ–º–ø–∏–Ω–≥–∞ ‚Äî –∫–Ω–æ–ø–∫–∞ –≤ —Å—Ç—Ä–æ–∫–µ —Ç–æ–≤–∞—Ä–∞ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–º–∏–Ω/–º–∞–∫—Å —Ü–µ–Ω–∞,).
‚Ä¢	‚Ä¢ –ü—Ä–µ–¥–∑–∞–∫–∞–∑: –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ üì¶, –ø—Ä–∏ –æ—Å—Ç–∞—Ç–∫–µ = 0 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è (–≤ Business).
‚Ä¢	‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—É, –æ—Å—Ç–∞—Ç–æ–∫, —Ñ–æ—Ç–æ –∏ —Ç.–¥.).
‚Ä¢	‚Ä¢ –§–∏–∫—Å–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
‚Ä¢	‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –º–∞–≥–∞–∑–∏–Ω–∞–º–∏ (store_id) ‚Äî –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏ –∏–∑ –¥–µ–º–ø–∏–Ω–≥–∞.
‚Ä¢	‚Ä¢ –í–∏–¥–∏–º–æ—Å—Ç—å: –∫–∞–∫–∏–µ –º–∞–≥–∞–∑–∏–Ω—ã —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –¥–µ–º–ø–∏–Ω–≥–µ –ø–æ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ.
‚Ä¢	‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å —Å—Ä–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–æ 30 –¥–Ω–µ–π.

5. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏
‚Ä¢	‚Ä¢ –¢–æ–ª—å–∫–æ 2 —Ä–æ–ª–∏: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∏ –°–æ—Ç—Ä—É–¥–Ω–∏–∫.
‚Ä¢	‚Ä¢ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞—Ö–æ–¥–∏—Ç –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –≤–∫–ª–∞–¥–∫–∞ '–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏'.
‚Ä¢	‚Ä¢ –ù–∞–∂–∏–º–∞–µ—Ç '–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'.
‚Ä¢	‚Ä¢ –í–≤–æ–¥–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏ –∑–∞–¥–∞—ë—Ç –ø–∞—Ä–æ–ª—å.
‚Ä¢	‚Ä¢ –í—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: –ø—Ä–æ—Å–º–æ—Ç—Ä/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–æ—Å—Ç–∞—Ç–∫–∏/—Ü–µ–Ω—ã –∏ —Ç.–¥.
‚Ä¢	‚Ä¢ –ú–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.
‚Ä¢	‚Ä¢ –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.
6. –†–∞–±–æ—Ç–∞ —Å –Ω–∞–∫–ª–∞–¥–Ω—ã–º–∏
‚Ä¢	‚Ä¢ –ù–∞–∫–ª–∞–¥–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∏ –±–µ—Ä—É—Ç—Å—è —Å Kaspi.
‚Ä¢	‚Ä¢ –ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö ‚Üí —Å–∫–ª–µ–∏—Ç—å –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª.
‚Ä¢	‚Ä¢ –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∏–ª–∏ –ø–µ—á–∞—Ç–∏ –Ω–∞ –æ–±—ã—á–Ω–æ–º –ø—Ä–∏–Ω—Ç–µ—Ä–µ —Ñ–æ—Ä–º–∞—Ç–∞ –ê4 –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å: —Å–∫–æ–ª—å–∫–æ –Ω–∞–∫–ª–∞–¥–Ω—ã—Ö –Ω–∞ –ª–∏—Å—Ç A4.
‚Ä¢	‚Ä¢ –í—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ –∏–ª–∏ —Å–∫–ª–µ–µ–Ω–Ω—ã–µ –Ω–∞–∫–ª–∞–¥–Ω—ã–µ –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ WhatsApp, Telegram –∏–ª–∏ Email.
‚Ä¢	‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ—Ä–º–æ–ø–µ—á–∞—Ç–∏ –∏ –æ–±—ã—á–Ω–æ–π –ø–µ—á–∞—Ç—å
‚Ä¢	  –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
7. –°–∫–ª–∞–¥—ã –∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∞
‚Ä¢	‚Ä¢ –í–∫–ª–∞–¥–∫–∞ '–°–∫–ª–∞–¥—ã' –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º —Ç–∞—Ä–∏—Ñ–∞–º.
‚Ä¢	‚Ä¢ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Å–∫–ª–∞–¥–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è: –≥–æ—Ä–æ–¥, —Ä–∞–π–æ–Ω, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞.
‚Ä¢	‚Ä¢ –ü—Ä–æ–¥–∞–≤–µ—Ü —É–∫–∞–∑—ã–≤–∞–µ—Ç —á–∞—Å—ã —Ä–∞–±–æ—Ç—ã, –æ–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Å –ø–æ–º–æ—â—å—é –ø–æ–ª–∑—É–Ω–∫–æ–≤.
‚Ä¢	‚Ä¢ –°–∫–ª–∞–¥—ã —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –ª–æ–≥–∏–∫–µ Kaspi –∫–∞–∫ —Ç–æ—á–∫–∞ —Å–∞–º–æ–≤—ã–≤–æ–∑–∞/–æ—Ç–≥—Ä—É–∑–∫–∏.
9. –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã
‚Ä¢	‚Ä¢ –û—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è –ø–æ ID –Ω–æ–º–µ—Ä—É –≤ –∫–∞—Å–ø–∏ –º–∞–≥–∞–∑–∏–Ω–µ, –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É –∏–∑ Kaspi API.
‚Ä¢	‚Ä¢ –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏—Å—Ç–æ—Ä–∏—è: –∫–æ–ª-–≤–æ –∑–∞–∫–∞–∑–æ–≤, —Å—É–º–º—ã, –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–∫–∞–∑.
‚Ä¢	‚Ä¢ –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è: –ù–æ–≤—ã–π, –ü–æ–≤—Ç–æ—Ä–Ω—ã–π, –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π, VIP.
‚Ä¢	‚Ä¢ –§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ —Ç–∞—Ä–∏—Ñ–µ Business.
10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
‚Ä¢	‚Ä¢ –í—Å–µ –ø–∞—Ä–æ–ª–∏ —à–∏—Ñ—Ä—É—é—Ç—Å—è (bcrypt),  –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π, –∑–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–æ–±–Ω—ã—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–π.
‚Ä¢	‚Ä¢ IP-–∞–¥—Ä–µ—Å–∞ –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è, –Ω–æ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –¥–æ—Å—Ç—É–ø.
‚Ä¢	‚Ä¢ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞: —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ BIN/store_id.
11. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã
‚Ä¢	‚Ä¢ –ù–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ '–ü–æ–¥–¥–µ—Ä–∂–∫–∞'.
‚Ä¢	‚Ä¢ –ü–æ –Ω–∞–∂–∞—Ç–∏—é ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è WhatsApp-—á–∞—Ç —Å —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–æ–π SmartSell.

12. –¢–∞—Ä–∏—Ñ—ã
‚Ä¢	‚Ä¢ Start ‚Äî ‚Ç∏9 900: 50 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –¥–µ–º–ø–∏–Ω–≥–µ, —Ñ–∏–ª—å—Ç—Ä—ã, —Å–∫–ª–∞–¥—ã, –Ω–∞–∫–ª–∞–¥–Ω—ã–µ, –±–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤, WhatsApp —Ä–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ  ‚Ç∏10 000.
‚Ä¢	‚Ä¢ Pro ‚Äî ‚Ç∏23 900: 300 —Ç–æ–≤–∞—Ä–æ–≤ –≤ –¥–µ–º–ø–∏–Ω–≥–µ, –ø—Ä–µ–¥–∑–∞–∫–∞–∑, —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, WhatsApp —Ä–∞—Å—Å—ã–ª–∫–∞ 
‚Ç∏5 000, –æ—Ç—á—ë—Ç—ã.
‚Ä¢	‚Ä¢ Business ‚Äî ‚Ç∏33 900: –≤—Å—ë –≤–∫–ª—é—á–µ–Ω–æ, –±–µ–∑–ª–∏–º–∏—Ç, WhatsApp –≤—Ö–æ–¥–∏—Ç –≤ —Ç–∞—Ä–∏—Ñ, –∞–≤—Ç–æ-–ø—Ä–µ–¥–∑–∞–∫–∞–∑, –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω, —Å–∫–ª–∞–¥—ã, –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã.
‚Ä¢	‚Ä¢ –û–¥–∏–Ω –º–∞–≥–∞–∑–∏–Ω (–ø–æ store_id –∏–ª–∏ BIN) –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω 15-–¥–Ω–µ–≤–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –ø–æ —Ç–∞—Ä–∏—Ñ—É –ø—Ä–æ.
‚Ä¢	‚Ä¢ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–æ–≥–æ –Ω–æ–º–µ—Ä–∞, –Ω–æ –¥–ª—è —Ç–æ–≥–æ –∂–µ –º–∞–≥–∞–∑–∏–Ω–∞ ‚Äî –Ω–µ –¥–∞—ë—Ç –≤—Ç–æ—Ä—É—é –±–µ—Å–ø–ª–∞—Ç–∫—É.
‚Ä¢	‚Ä¢ IP –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ª–æ–≥–æ–≤ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è).

13. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
‚Ä¢	‚Ä¢ –ê–≤—Ç–æ—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –±—Ä–µ–Ω–¥–∞–º, —Å—Ç–∞—Ç—É—Å–∞–º, —Ü–µ–Ω–∞–º, –æ—Å—Ç–∞—Ç–∫–∞–º (–¥–∞–Ω–Ω—ã–µ –∏–∑ Kaspi API).
‚Ä¢	‚Ä¢ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤

14. –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç
‚Ä¢	‚Ä¢ –ò–º–ø–æ—Ä—Ç –∏–∑ Excel: –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞, –æ—Å—Ç–∞—Ç–æ–∫, —Ñ–æ—Ç–æ, ID –∫–∞—Ä—Ç–æ—á–∫–∏ Kaspi.
‚Ä¢	‚Ä¢ –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º.
‚Ä¢	‚Ä¢ –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ –ø–µ—Ä–µ–¥ –∏–º–ø–æ—Ä—Ç–æ–º.

15. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã
‚Ä¢	‚Ä¢ –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, –≤—ã—Ä—É—á–∫–µ, –æ—Å—Ç–∞—Ç–∫–∞–º.
‚Ä¢	‚Ä¢ –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –¥–∏–Ω–∞–º–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
‚Ä¢	‚Ä¢ –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è: –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞, –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω, –≥—Ä–∞—Ñ–∏–∫ —Ü–µ–Ω, –æ—Ç–∫–∞–∑–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–π



18. –°–∫—Ä—ã—Ç–∏–µ —Ç–æ–≤–∞—Ä–æ–≤
–§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü—É –≤—Ä–µ–º–µ–Ω–Ω–æ —Å–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä —Å –≤–∏—Ç—Ä–∏–Ω—ã, –Ω–µ —É–¥–∞–ª—è—è –µ–≥–æ, –∞ —Ç–∞–∫–∂–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ–≥–æ –ø–æ–∑–¥–Ω–µ–µ.
‚Ä¢	‚Ä¢ –í —Ç–∞–±–ª–∏—Ü–µ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–Ω–æ–ø–∫–∞ ¬´–°–∫—Ä—ã—Ç—å¬ª.
‚Ä¢	‚Ä¢ –ü—Ä–∏ —Å–∫—Ä—ã—Ç–∏–∏ —Ç–æ–≤–∞—Ä –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–∫–ª–∞–¥–∫—É ¬´–°–∫—Ä—ã—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã¬ª.
‚Ä¢	‚Ä¢ –í —Å–∫—Ä—ã—Ç—ã—Ö —Ç–æ–≤–∞—Ä–∞—Ö –º–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å  —Ü–µ–Ω—É, –æ—Å—Ç–∞—Ç–æ–∫ –∏ —Å—Ç–∞—Ç—É—Å –≤–Ω—É—Ç—Ä–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã SmartSell –∞–∫—Ç–∏–≤–Ω—ã–π –∏–ª–∏ —Å–∫—Ä—ã—Ç—ã–π.
‚Ä¢	‚Ä¢ –ú–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä –æ–±—Ä–∞—Ç–Ω–æ –≤ –∞–∫—Ç–∏–≤–Ω—ã–µ –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º ¬´–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å¬ª.
‚Ä¢	‚Ä¢ –°–∫—Ä—ã—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã  —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –¥–µ–º–ø–∏–Ω–≥–µ –∏  —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è —Å Kaspi.
‚Ä¢	‚Ä¢ –í–∫–ª–∞–¥–∫–∞ '–°–∫—Ä—ã—Ç—ã–µ —Ç–æ–≤–∞—Ä—ã' –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ä—è–¥–æ–º —Å –¢–æ–≤–∞—Ä–∞–º–∏, –î–µ–º–ø–∏–Ω–≥–æ–º –∏ –ü—Ä–µ–¥–∑–∞–∫–∞–∑–æ–º.
19. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: –æ—Ç—á—ë—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
–§—É–Ω–∫—Ü–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–æ–¥–∞–≤—Ü—É –ø–æ–Ω—è—Ç—å, –∫–∞–∫–∏–µ –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏–Ω–æ—Å—è—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤ –∏ –≤—ã—Ä—É—á–∫–∏.
‚Ä¢	‚Ä¢ –í —Ä–∞–∑–¥–µ–ª–µ ¬´–ê–Ω–∞–ª–∏—Ç–∏–∫–∞¬ª –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤–∫–ª–∞–¥–∫–∞ ¬´–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º¬ª.
‚Ä¢	‚Ä¢ –í—ã–≤–æ–¥–∏—Ç—Å—è –≥—Ä–∞—Ñ–∏–∫: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –∏ –æ–±—â–∞—è –≤—ã—Ä—É—á–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º.
‚Ä¢	‚Ä¢ –¢–∞–±–ª–∏—Ü–∞ —Ç–æ–ø-10 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –≤—ã—Ä—É—á–∫–µ, –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∑–∞–∫–∞–∑–æ–≤ –∏–ª–∏ –¥–∞—Ç–µ.
‚Ä¢	‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–µ—Ä–∏–æ–¥—É: –∑–∞ –¥–µ–Ω—å, –Ω–µ–¥–µ–ª—é, –º–µ—Å—è—Ü, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ –¥–∞—Ç—ã.
‚Ä¢	‚Ä¢ –û—Å–Ω–æ–≤–∞–Ω–æ –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ –∏–∑ Kaspi API (category_name –∏ product_code).
‚Ä¢	‚Ä¢ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á—ë—Ç –≤ Excel.

SmartSell ‚Äî –î–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –¢–ó
2. –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- Email / WhatsApp / Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
  * –û —Å–∫–æ—Ä–æ–º –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ç–∞—Ä–∏—Ñ–∞.
  * –û –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ –æ–ø–ª–∞—Ç—ã.
  * –û–± –æ—à–∏–±–∫–∞—Ö –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ WA-—Å–æ–æ–±—â–µ–Ω–∏–π.

3. –ò—Å—Ç–æ—Ä–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –ø–ª–∞—Ç–µ–∂–µ–π (—Ç–∞—Ä–∏—Ñ—ã, WA, –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è).
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–µ—Ä–∏–æ–¥—É, —Å—Ç–∞—Ç—É—Å—É.
- –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel.
- –ì—Ä–∞—Ñ–∏–∫–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ –º–µ—Å—è—Ü–∞–º.
4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –†–æ–ª–∏: –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä / —Å–æ—Ç—Ä—É–¥–Ω–∏–∫.
- –ê–¥–º–∏–Ω: –º–µ–Ω—è—Ç—å —Ç–∞—Ä–∏—Ñ, –≤–∏–¥–µ—Ç—å –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é.
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫: –Ω–µ –º–µ–Ω—è–µ—Ç —Ç–∞—Ä–∏—Ñ, –Ω–µ –≤–∏–¥–∏—Ç –∏—Å—Ç–æ—Ä–∏—é.
5. –°—á–µ—Ç–∞ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –æ–ø–ª–∞—Ç—ã
- –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –æ–ø–ª–∞—Ç–∞ ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞.
- –ü–µ—Ä–µ–¥ –æ–∫–æ–Ω—á–∞–Ω–∏–µ–º —Ç–∞—Ä–∏—Ñ–∞: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å—á—ë—Ç–∞.
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø–ª–∞—Ç—É (email/WhatsApp).
6. UI –∏ UX –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ —Ç–∞—Ä–∏—Ñ–∞: –≤–∫–ª–∞–¥–∫–∏ QR/–∫–∞—Ä—Ç–∞ .
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π  QR –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–ª—è –æ–ø–ª–∞—Ç—ã.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ  —Ç–∞—Ä–∏—Ñ–µ.
7. –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –º–∞–≥–∞–∑–∏–Ω–æ–≤, —Ç–∞—Ä–∏—Ñ–æ–≤ .
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–æ–≤.
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ WA-—Ä–∞—Å—Å—ã–ª–æ–∫.
- –û—Ç—á—ë—Ç—ã –ø–æ –ø–ª–∞—Ç–µ–∂–∞–º –∏ —Ä–∞—Å—Ö–æ–¥–∞–º.
8. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- –ü–æ–¥–ø–∏—Å—å –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∫–æ–º–ø–∞–Ω–∏–∏ (webhook).
- –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π (–ø–æ provider_invoice_id).
9. –ò–º–ø–æ—Ä—Ç –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–ª–∞—Ç–µ–∂–µ–π, —Ä–∞—Å—Å—ã–ª–æ–∫, —Ç–∞—Ä–∏—Ñ–æ–≤.
- –ò–º–ø–æ—Ä—Ç —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤, —à–∞–±–ª–æ–Ω–æ–≤ WA.
10. WA —Ç–∞—Ä–∏—Ñ—ã (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã)
- –û–ø—Ü–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ –Ω–∞ WA (N —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –º–µ—Å—è—Ü).
–†–∞–∑–¥–µ–ª Billing 
1. –°–∏—Å—Ç–µ–º–∞ —Ç–∞—Ä–∏—Ñ–æ–≤
–ü–ª–∞–Ω—ã: 3, 6, 12 –º–µ—Å—è—Ü–µ–≤.
–°–∫–∏–¥–∫–∏ –æ—Ç –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã P:
 - 3 –º–µ—Å—è—Ü–∞: 5% (—Ü–µ–Ω–∞ = 3 * P * 0.95)
 - 6 –º–µ—Å—è—Ü–µ–≤: 10% (—Ü–µ–Ω–∞ = 6 * P * 0.90)
 - 12 –º–µ—Å—è—Ü–µ–≤: 15% (—Ü–µ–Ω–∞ = 12 * P * 0.85)
–í–∞–ª—é—Ç–∞: KZT (—Ü–µ–Ω—ã –≤ —Ç—ã–π—ã–Ω–∞—Ö). –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–æ–µ.
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ä–∞—Å—á—ë—Ç –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∞—Ä–∏—Ñ–∞: –∫—Ä–µ–¥–∏—Ç –∑–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–∏, —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞, –∏—Ç–æ–≥–æ–≤–∞—è —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ –∏–ª–∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ—à–µ–ª—ë–∫.
3. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ —á–µ—Ä–µ–∑ PayBox
–í –∫–∞–±–∏–Ω–µ—Ç–µ –∫–Ω–æ–ø–∫–∞ '–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å' —Å –±—ã—Å—Ç—Ä—ã–º–∏ —Å—É–º–º–∞–º–∏ (5000, 10000, 20000 ‚Ç∏) + '–î—Ä—É–≥–∞—è —Å—É–º–º–∞'.
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏–Ω–≤–æ–π—Å–∞ TipTopPay (API), –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR –∏ –∫–Ω–æ–ø–∫–∏ '–û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –æ–ø–ª–∞—Ç—ã'.
–ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äî —Ç–∞–∫–∏–º –∂–µ —Å–ø–æ—Å–æ–±–æ–º.
TipTopPay webhook: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏, –∑–∞—á–∏—Å–ª–µ–Ω–∏–µ —Å—É–º–º—ã –Ω–∞ –±–∞–ª–∞–Ω—Å –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ success.
4. –û–ø–ª–∞—Ç–∞ —Ç–∞—Ä–∏—Ñ–æ–≤: –≤—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ '–û–ø–ª–∞—Ç–∏—Ç—å':
 - –í–∞—Ä–∏–∞–Ω—Ç 1 ‚Äî —Å–ø–∏—Å–∞—Ç—å —Å –∫–æ—à–µ–ª—å–∫–∞ (–µ—Å–ª–∏ —Ö–≤–∞—Ç–∞–µ—Ç ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–∞—Ä–∏—Ñ–∞; –µ—Å–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –æ–ø–ª–∞—Ç–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â—É—é —Å—É–º–º—É —á–µ—Ä–µ–∑ TipTopPay).
 - –í–∞—Ä–∏–∞–Ω—Ç 2 ‚Äî –æ–ø–ª–∞—Ç–∏—Ç—å –∫–∞—Ä—Ç–æ–π/QR —á–µ—Ä–µ–∑ TipTopPay (—Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞, –ø–æ–∫–∞–∑ QR, –ø–æ—Å–ª–µ webhook ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Ç–∞—Ä–∏—Ñ–∞).
5. –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞
–ü–µ—Ä–µ—Ä–∞—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (proration): –∫—Ä–µ–¥–∏—Ç –æ—Å—Ç–∞—Ç–∫–∞, —Å—Ç–æ–∏–º–æ—Å—Ç—å –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞, —Å—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ/–≤–æ–∑–≤—Ä–∞—Ç.
–ï—Å–ª–∏ due > 0 ‚Äî —Å–ø–∏—Å–∞—Ç—å —Å –∫–æ—à–µ–ª—å–∫–∞ –∏–ª–∏ –æ–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ TipTopPay
–ï—Å–ª–∏ due = 0 ‚Äî –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞.
–ï—Å–ª–∏ due < 0 ‚Äî –∑–∞—á–∏—Å–ª–∏—Ç—å –Ω–∞ –∫–æ—à–µ–ª—ë–∫.
6. UI
–≠–∫—Ä–∞–Ω '–¢–∞—Ä–∏—Ñ—ã': –∫–∞—Ä—Ç–æ—á–∫–∏ 3/6/12 –º–µ—Å (—Ü–µ–Ω–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π), –∫–Ω–æ–ø–∫–∞ '–û–ø–ª–∞—Ç–∏—Ç—å' ‚Üí –º–æ–¥–∞–ª–∫–∞ —Å –≤—ã–±–æ—Ä–æ–º —Å–ø–æ—Å–æ–±–∞.
–≠–∫—Ä–∞–Ω '–ë–∞–ª–∞–Ω—Å': –±–∞–ª–∞–Ω—Å, –∫–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∏—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
–≠–∫—Ä–∞–Ω '–ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–ø–∏—Å–æ–∫': –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–∞—Ä–∏—Ñ, –¥–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è, –∫–Ω–æ–ø–∫–∞ '–ò–∑–º–µ–Ω–∏—Ç—å –ø–ª–∞–Ω'.
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –°–µ—Ä–∞—è —Å—Ö–µ–º–∞ WhatsApp –¥–ª—è SmartSell (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
1. –¶–µ–ª—å
–ú–∞—Å—Å–æ–≤—ã–µ –∏ —Ç—Ä–∏–≥–≥–µ—Ä–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏ —Å—Ç—Ä–æ–≥–æ –æ—Ç –±–∏–∑–Ω–µ—Å-–Ω–æ–º–µ—Ä–æ–≤ –º–∞–≥–∞–∑–∏–Ω–æ–≤ —á–µ—Ä–µ–∑ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é WhatsApp Web, —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–∞–º, —Å –Ω–æ—á–Ω—ã–º –æ–∫–Ω–æ–º, —Å–∫—Ä—ã—Ç—ã–º —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–æ–º, –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–≥—É–ª–∏—Ä—É–µ–º—ã—Ö –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
2. –ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞
1) –¢–æ–ª—å–∫–æ WhatsApp Business App. –õ–∏—á–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –∑–∞–ø—Ä–µ—â–µ–Ω—ã.
2) –®–∞–±–ª–æ–Ω—ã ‚Äì —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ç—É—Å–Ω—ã–µ, –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ –ø—Ä–æ–¥–∞–≤—Ü–æ–º, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π.
3) –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è: –ø—Ä–æ–¥–∞–≤–µ—Ü –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—Ä—É—á–Ω—É—é –æ—Ç 1 –º–∏–Ω—É—Ç—ã –¥–æ 12 —á–∞—Å–æ–≤. –í—Ä–µ–º—è –≤–≤–æ–¥–∏—Ç—Å—è –≤—Ä—É—á–Ω—É—é (—á–∞—Å—ã/–º–∏–Ω—É—Ç—ã) –∏–ª–∏ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Ä–æ–ª–∏–∫–æ–º.
4) –ù–æ—á–Ω–æ–π —Ä–µ–∂–∏–º: –≤–∫–ª—é—á–∞–µ—Ç—Å—è/–≤—ã–∫–ª—é—á–∞–µ—Ç—Å—è –∫–Ω–æ–ø–∫–æ–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é 22:00‚Äì08:00, –Ω–æ –ø—Ä–æ–¥–∞–≤–µ—Ü –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ —á–∞—Å—ã/–º–∏–Ω—É—Ç—ã –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ä–æ–ª–∏–∫–æ–º.
5) –õ–∏–º–∏—Ç 800 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å—á—ë—Ç—á–∏–∫–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ.
6) –°–ª—É—á–∞–π–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã 3‚Äì7 —Å–µ–∫ –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –æ —á—ë–º –ø—Ä–æ–¥–∞–≤–µ—Ü –Ω–µ –∑–Ω–∞–µ—Ç.
7) –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –±–∏–∑–Ω–µ—Å WhatsApp.
8) –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å—Ç–∞—Ç—É—Å—ã: –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, –æ—à–∏–±–∫–∞, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ (Webhook).
9) –ò—Å—Ç–æ—Ä–∏—è –æ—Ç–ø—Ä–∞–≤–æ–∫.
10) –°–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω.
11) –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–∫–∞–∑–∞ (–∏–∑ Kaspi) –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —à–∞–±–ª–æ–Ω–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞.
12) –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ + –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å + —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É Kaspi –¥–ª—è –æ—Ç–∑—ã–≤–∞.


3. –ü–æ—Ç–æ–∫ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
1) –ü—Ä–æ–¥–∞–≤–µ—Ü –∑–∞—Ö–æ–¥–∏—Ç –≤ —Ä–∞–∑–¥–µ–ª –ö–∞–Ω–∞–ª—ã ‚Üí WhatsApp ‚Üí –ü–æ–¥–∫–ª—é—á–∏—Ç—å (—Å–µ—Ä—ã–π).
2) –°–∫–∞–Ω–∏—Ä—É–µ—Ç QR —á–µ—Ä–µ–∑ WhatsApp Business App.
3) –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Å—Å–∏—é.
4) –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º: –Ω–æ—á–Ω–æ–π —Ä–µ–∂–∏–º, —è–∑—ã–∫, —Ä–µ–∑–µ—Ä–≤–Ω—ã–π –Ω–æ–º–µ—Ä, –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
5) –ï—Å–ª–∏ –ª–∏—á–Ω—ã–π WA ‚Äì –±–ª–æ–∫ —Å–µ—Å—Å–∏–∏.
4. –û—á–µ—Ä–µ–¥–∏ –∏ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥
–°–æ–æ–±—â–µ–Ω–∏—è –ø–ª–∞–Ω–∏—Ä—É—é—Ç—Å—è —Å —É—á—ë—Ç–æ–º –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞, –ª–∏–º–∏—Ç–æ–≤ –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫. –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏ —Å–ª—É—á–∞–π–Ω—ã–µ (3‚Äì7 —Å–µ–∫—É–Ω–¥), –∫–∞–∂–¥—ã–µ 30‚Äì50 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ç–µ—á–µ–Ω–∏–∏ 7 –º–∏–Ω ‚Äì –ø–∞—É–∑–∞ 5‚Äì15 –º–∏–Ω—É—Ç.
5. UI
‚Ä¢	‚Äì –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏ (ONLINE/OFFLINE/REAUTH).
‚Ä¢	‚Äì –°—á—ë—Ç—á–∏–∫ X/800 —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–Ω—å.
‚Äì –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (—Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ä–æ–ª–∏–∫–æ–º).
‚Äì –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (–≤–∫–ª/–≤—ã–∫–ª, —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —Ä–æ–ª–∏–∫–æ–º).
‚Äì –Ø–∑—ã–∫.
‚Äì –†–µ–∑–µ—Ä–≤–Ω—ã–π –Ω–æ–º–µ—Ä.
‚Äì –ñ—É—Ä–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–æ–∫.
‚Äì –ü—Ä–æ—Å–º–æ—Ç—Ä —à–∞–±–ª–æ–Ω–æ–≤ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
6. –®–∞–±–ª–æ–Ω—ã
–•—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ. –ü—Ä–∏–º–µ—Ä:
RU: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {{name}}! –í–∞—à –∑–∞–∫–∞–∑ {{order_id}} –≥–æ—Ç–æ–≤ –∫ –≤—ã–¥–∞—á–µ.
KZ: –°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ, {{name}}! –°—ñ–∑–¥—ñ“£ {{order_id}} —Ç–∞–ø—Å—ã—Ä—ã—Å—ã“£—ã–∑ –¥–∞–π—ã–Ω.
EN: Hello, {{name}}! Your order {{order_id}} is ready for pickup.
